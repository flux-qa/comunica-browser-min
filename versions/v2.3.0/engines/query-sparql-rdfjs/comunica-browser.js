/*! For license information please see comunica-browser.js.LICENSE.txt */
var Comunica;(()=>{var e={10025:(e,t,r)=>{"use strict";var n=r(23716);r(45975);var i,o=(i=r(21654))&&i.__esModule?i:{default:i};o.default._babelPolyfill&&void 0!==n&&n.warn&&n.warn("@babel/polyfill is loaded more than once on this page. This is probably not desirable/intended and may have consequences if different versions of the polyfills are applied sequentially. If you do need to load the polyfill more than once, use @babel/polyfill/noConflict instead to bypass the warning."),o.default._babelPolyfill=!0},45975:(e,t,r)=>{"use strict";r(36435),r(10013),r(90243),r(82890),r(40097),r(90509),r(85468),r(98710),r(26694),r(45424),r(73500),r(37943),r(85092),r(25047)},43698:(e,t,r)=>{"use strict";var n=r(48834).Buffer,i=r(20769),o=r(72489),a=n.from&&n.from!==Uint8Array.from;function s(e,t){return"string"==typeof e?t==e:e&&"function"==typeof e.exec?e.exec(t):"boolean"==typeof e||"object"==typeof e?e:"function"==typeof e&&e(t)}t.parse=function(e,t){var r,u,c=new i,l=o((function(e){"string"==typeof e&&(e=a?n.from(e):new n(e)),c.write(e)}),(function(e){e&&l.write(e),r&&l.emit("header",r),u&&l.emit("footer",u),l.queue(null)}));return"string"==typeof e&&(e=e.split(".").map((function(e){return"$*"===e?{emitKey:!0}:"*"===e||(""===e?{recurse:!0}:e)}))),e&&e.length||(e=null),c.onValue=function(n){if(this.root||(l.root=n),e){for(var i=0,o=0,a=!1,u=!1;i<e.length;){var c,d=e[i];if(o++,d&&!d.recurse){if(!(c=o===this.stack.length?this:this.stack[o]))return;if(!s(d,c.key))return void p(c.key,n);a=!!d.emitKey,u=!!d.emitPath,i++}else{i++;var f=e[i];if(!f)return;for(;;){if(!(c=o===this.stack.length?this:this.stack[o]))return;if(s(f,c.key)){i++,Object.isFrozen(this.stack[o])||(this.stack[o].value=null);break}p(c.key,n),o++}}}if(r&&(l.emit("header",r),r=!1),o===this.stack.length){var h=this.stack.slice(1).map((function(e){return e.key})).concat([this.key]),y=n;for(var g in null!=y&&null!=(y=t?t(y,h):y)&&((a||u)&&(y={value:y},a&&(y.key=this.key),u&&(y.path=h)),l.queue(y)),this.value&&delete this.value[this.key],this.stack)Object.isFrozen(this.stack[g])||(this.stack[g].value=null)}}},c._onToken=c.onToken,c.onToken=function(t,r){c._onToken(t,r),0===this.stack.length&&l.root&&(e||l.queue(l.root),l.root=null)},c.onError=function(e){e.message.indexOf("at position")>-1&&(e.message="Invalid JSON ("+e.message+")"),l.emit("error",e)},l;function p(e,t){!1!==r&&((r=r||{})[e]=t),!1!==u&&!1===r&&((u=u||{})[e]=t)}},t.stringify=function(e,t,r,n){n=n||0,!1===e?(e="",t="\n",r=""):null==e&&(e="[\n",t="\n,\n",r="\n]\n");var i,a=!0,s=!1;return i=o((function(r){s=!0;try{var o=JSON.stringify(r,null,n)}catch(e){return i.emit("error",e)}a?(a=!1,i.queue(e+o)):i.queue(t+o)}),(function(t){s||i.queue(e),i.queue(r),i.queue(null)}))},t.stringifyObject=function(e,t,r,n){n=n||0,!1===e?(e="",t="\n",r=""):null==e&&(e="{\n",t="\n,\n",r="\n}\n");var i=!0,a=!1;return o((function(r){a=!0;var o=JSON.stringify(r[0])+":"+JSON.stringify(r[1],null,n);i?(i=!1,this.queue(e+o)):this.queue(t+o)}),(function(t){a||this.queue(e),this.queue(r),this.queue(null)}))}},47948:e=>{"use strict";const{AbortController:t,AbortSignal:r}="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0;e.exports=t,e.exports.AbortSignal=r,e.exports.default=t},71696:(e,t,r)=>{"use strict";var n=r(34406),i=r(23716);function o(e){return o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o(e)}var a,s,u=r(47515).codes,c=u.ERR_AMBIGUOUS_ARGUMENT,l=u.ERR_INVALID_ARG_TYPE,p=u.ERR_INVALID_ARG_VALUE,d=u.ERR_INVALID_RETURN_VALUE,f=u.ERR_MISSING_ARGS,h=r(64082),y=r(43335).inspect,g=r(43335).types,m=g.isPromise,b=g.isRegExp,v=Object.assign?Object.assign:r(44956).assign,_=Object.is?Object.is:r(34679);function w(){var e=r(26796);a=e.isDeepEqual,s=e.isDeepStrictEqual}new Map;var T=!1,O=e.exports=x,S={};function E(e){if(e.message instanceof Error)throw e.message;throw new h(e)}function A(e,t,r,n){if(!r){var i=!1;if(0===t)i=!0,n="No value argument passed to `assert.ok()`";else if(n instanceof Error)throw n;var o=new h({actual:r,expected:!0,message:n,operator:"==",stackStartFn:e});throw o.generatedMessage=i,o}}function x(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];A.apply(void 0,[x,t.length].concat(t))}O.fail=function e(t,r,o,a,s){var u,c=arguments.length;if(0===c)u="Failed";else if(1===c)o=t,t=void 0;else{if(!1===T){T=!0;var l=n.emitWarning?n.emitWarning:i.warn.bind(i);l("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")}2===c&&(a="!=")}if(o instanceof Error)throw o;var p={actual:t,expected:r,operator:void 0===a?"fail":a,stackStartFn:s||e};void 0!==o&&(p.message=o);var d=new h(p);throw u&&(d.message=u,d.generatedMessage=!0),d},O.AssertionError=h,O.ok=x,O.equal=function e(t,r,n){if(arguments.length<2)throw new f("actual","expected");t!=r&&E({actual:t,expected:r,message:n,operator:"==",stackStartFn:e})},O.notEqual=function e(t,r,n){if(arguments.length<2)throw new f("actual","expected");t==r&&E({actual:t,expected:r,message:n,operator:"!=",stackStartFn:e})},O.deepEqual=function e(t,r,n){if(arguments.length<2)throw new f("actual","expected");void 0===a&&w(),a(t,r)||E({actual:t,expected:r,message:n,operator:"deepEqual",stackStartFn:e})},O.notDeepEqual=function e(t,r,n){if(arguments.length<2)throw new f("actual","expected");void 0===a&&w(),a(t,r)&&E({actual:t,expected:r,message:n,operator:"notDeepEqual",stackStartFn:e})},O.deepStrictEqual=function e(t,r,n){if(arguments.length<2)throw new f("actual","expected");void 0===a&&w(),s(t,r)||E({actual:t,expected:r,message:n,operator:"deepStrictEqual",stackStartFn:e})},O.notDeepStrictEqual=function e(t,r,n){if(arguments.length<2)throw new f("actual","expected");void 0===a&&w(),s(t,r)&&E({actual:t,expected:r,message:n,operator:"notDeepStrictEqual",stackStartFn:e})},O.strictEqual=function e(t,r,n){if(arguments.length<2)throw new f("actual","expected");_(t,r)||E({actual:t,expected:r,message:n,operator:"strictEqual",stackStartFn:e})},O.notStrictEqual=function e(t,r,n){if(arguments.length<2)throw new f("actual","expected");_(t,r)&&E({actual:t,expected:r,message:n,operator:"notStrictEqual",stackStartFn:e})};var R=function e(t,r,n){var i=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r.forEach((function(e){e in t&&(void 0!==n&&"string"==typeof n[e]&&b(t[e])&&t[e].test(n[e])?i[e]=n[e]:i[e]=t[e])}))};function I(e,t,r,n,i,o){if(!(r in e)||!s(e[r],t[r])){if(!n){var a=new R(e,i),u=new R(t,i,e),c=new h({actual:a,expected:u,operator:"deepStrictEqual",stackStartFn:o});throw c.actual=e,c.expected=t,c.operator=o.name,c}E({actual:e,expected:t,message:n,operator:o.name,stackStartFn:o})}}function N(e,t,r,n){if("function"!=typeof t){if(b(t))return t.test(e);if(2===arguments.length)throw new l("expected",["Function","RegExp"],t);if("object"!==o(e)||null===e){var i=new h({actual:e,expected:t,message:r,operator:"deepStrictEqual",stackStartFn:n});throw i.operator=n.name,i}var s=Object.keys(t);if(t instanceof Error)s.push("name","message");else if(0===s.length)throw new p("error",t,"may not be an empty object");return void 0===a&&w(),s.forEach((function(i){"string"==typeof e[i]&&b(t[i])&&t[i].test(e[i])||I(e,t,i,r,s,n)})),!0}return void 0!==t.prototype&&e instanceof t||!Error.isPrototypeOf(t)&&!0===t.call({},e)}function P(e){if("function"!=typeof e)throw new l("fn","Function",e);try{e()}catch(e){return e}return S}function j(e){return m(e)||null!==e&&"object"===o(e)&&"function"==typeof e.then&&"function"==typeof e.catch}function D(e){return Promise.resolve().then((function(){var t;if("function"==typeof e){if(!j(t=e()))throw new d("instance of Promise","promiseFn",t)}else{if(!j(e))throw new l("promiseFn",["Function","Promise"],e);t=e}return Promise.resolve().then((function(){return t})).then((function(){return S})).catch((function(e){return e}))}))}function L(e,t,r,n){if("string"==typeof r){if(4===arguments.length)throw new l("error",["Object","Error","Function","RegExp"],r);if("object"===o(t)&&null!==t){if(t.message===r)throw new c("error/message",'The error message "'.concat(t.message,'" is identical to the message.'))}else if(t===r)throw new c("error/message",'The error "'.concat(t,'" is identical to the message.'));n=r,r=void 0}else if(null!=r&&"object"!==o(r)&&"function"!=typeof r)throw new l("error",["Object","Error","Function","RegExp"],r);if(t===S){var i="";r&&r.name&&(i+=" (".concat(r.name,")")),i+=n?": ".concat(n):".";var a="rejects"===e.name?"rejection":"exception";E({actual:void 0,expected:r,operator:e.name,message:"Missing expected ".concat(a).concat(i),stackStartFn:e})}if(r&&!N(t,r,n,e))throw t}function C(e,t,r,n){if(t!==S){if("string"==typeof r&&(n=r,r=void 0),!r||N(t,r)){var i=n?": ".concat(n):".",o="doesNotReject"===e.name?"rejection":"exception";E({actual:t,expected:r,operator:e.name,message:"Got unwanted ".concat(o).concat(i,"\n")+'Actual message: "'.concat(t&&t.message,'"'),stackStartFn:e})}throw t}}function F(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];A.apply(void 0,[F,t.length].concat(t))}O.throws=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];L.apply(void 0,[e,P(t)].concat(n))},O.rejects=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return D(t).then((function(t){return L.apply(void 0,[e,t].concat(n))}))},O.doesNotThrow=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];C.apply(void 0,[e,P(t)].concat(n))},O.doesNotReject=function e(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];return D(t).then((function(t){return C.apply(void 0,[e,t].concat(n))}))},O.ifError=function e(t){if(null!=t){var r="ifError got unwanted exception: ";"object"===o(t)&&"string"==typeof t.message?0===t.message.length&&t.constructor?r+=t.constructor.name:r+=t.message:r+=y(t);var n=new h({actual:t,expected:null,operator:"ifError",message:r,stackStartFn:e}),i=t.stack;if("string"==typeof i){var a=i.split("\n");a.shift();for(var s=n.stack.split("\n"),u=0;u<a.length;u++){var c=s.indexOf(a[u]);if(-1!==c){s=s.slice(0,c);break}}n.stack="".concat(s.join("\n"),"\n").concat(a.join("\n"))}throw n}},O.strict=v(F,O,{equal:O.strictEqual,deepEqual:O.deepStrictEqual,notEqual:O.notStrictEqual,notDeepEqual:O.notDeepStrictEqual}),O.strict.strict=O.strict},64082:(e,t,r)=>{"use strict";var n=r(34406);function i(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t){return!t||"object"!==f(t)&&"function"!=typeof t?s(e):t}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e){var t="function"==typeof Map?new Map:void 0;return u=function(e){if(null===e||(r=e,-1===Function.toString.call(r).indexOf("[native code]")))return e;var r;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,n)}function n(){return l(e,arguments,d(this).constructor)}return n.prototype=Object.create(e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),p(n,e)},u(e)}function c(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function l(e,t,r){return l=c()?Reflect.construct:function(e,t,r){var n=[null];n.push.apply(n,t);var i=new(Function.bind.apply(e,n));return r&&p(i,r.prototype),i},l.apply(null,arguments)}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}function f(e){return f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},f(e)}var h=r(43335).inspect,y=r(47515).codes.ERR_INVALID_ARG_TYPE;function g(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}var m="",b="",v="",_="",w={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function T(e){var t=Object.keys(e),r=Object.create(Object.getPrototypeOf(e));return t.forEach((function(t){r[t]=e[t]})),Object.defineProperty(r,"message",{value:e.message}),r}function O(e){return h(e,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var S=function(e){function t(e){var r;if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),"object"!==f(e)||null===e)throw new y("options","Object",e);var i=e.message,o=e.operator,u=e.stackStartFn,c=e.actual,l=e.expected,p=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=i)r=a(this,d(t).call(this,String(i)));else if(n.stderr&&n.stderr.isTTY&&(n.stderr&&n.stderr.getColorDepth&&1!==n.stderr.getColorDepth()?(m="[34m",b="[32m",_="[39m",v="[31m"):(m="",b="",_="",v="")),"object"===f(c)&&null!==c&&"object"===f(l)&&null!==l&&"stack"in c&&c instanceof Error&&"stack"in l&&l instanceof Error&&(c=T(c),l=T(l)),"deepStrictEqual"===o||"strictEqual"===o)r=a(this,d(t).call(this,function(e,t,r){var i="",o="",a=0,s="",u=!1,c=O(e),l=c.split("\n"),p=O(t).split("\n"),d=0,h="";if("strictEqual"===r&&"object"===f(e)&&"object"===f(t)&&null!==e&&null!==t&&(r="strictEqualObject"),1===l.length&&1===p.length&&l[0]!==p[0]){var y=l[0].length+p[0].length;if(y<=10){if(!("object"===f(e)&&null!==e||"object"===f(t)&&null!==t||0===e&&0===t))return"".concat(w[r],"\n\n")+"".concat(l[0]," !== ").concat(p[0],"\n")}else if("strictEqualObject"!==r&&y<(n.stderr&&n.stderr.isTTY?n.stderr.columns:80)){for(;l[0][d]===p[0][d];)d++;d>2&&(h="\n  ".concat(function(e,t){if(t=Math.floor(t),0==e.length||0==t)return"";var r=e.length*t;for(t=Math.floor(Math.log(t)/Math.log(2));t;)e+=e,t--;return e+e.substring(0,r-e.length)}(" ",d),"^"),d=0)}}for(var T=l[l.length-1],S=p[p.length-1];T===S&&(d++<2?s="\n  ".concat(T).concat(s):i=T,l.pop(),p.pop(),0!==l.length&&0!==p.length);)T=l[l.length-1],S=p[p.length-1];var E=Math.max(l.length,p.length);if(0===E){var A=c.split("\n");if(A.length>30)for(A[26]="".concat(m,"...").concat(_);A.length>27;)A.pop();return"".concat(w.notIdentical,"\n\n").concat(A.join("\n"),"\n")}d>3&&(s="\n".concat(m,"...").concat(_).concat(s),u=!0),""!==i&&(s="\n  ".concat(i).concat(s),i="");var x=0,R=w[r]+"\n".concat(b,"+ actual").concat(_," ").concat(v,"- expected").concat(_),I=" ".concat(m,"...").concat(_," Lines skipped");for(d=0;d<E;d++){var N=d-a;if(l.length<d+1)N>1&&d>2&&(N>4?(o+="\n".concat(m,"...").concat(_),u=!0):N>3&&(o+="\n  ".concat(p[d-2]),x++),o+="\n  ".concat(p[d-1]),x++),a=d,i+="\n".concat(v,"-").concat(_," ").concat(p[d]),x++;else if(p.length<d+1)N>1&&d>2&&(N>4?(o+="\n".concat(m,"...").concat(_),u=!0):N>3&&(o+="\n  ".concat(l[d-2]),x++),o+="\n  ".concat(l[d-1]),x++),a=d,o+="\n".concat(b,"+").concat(_," ").concat(l[d]),x++;else{var P=p[d],j=l[d],D=j!==P&&(!g(j,",")||j.slice(0,-1)!==P);D&&g(P,",")&&P.slice(0,-1)===j&&(D=!1,j+=","),D?(N>1&&d>2&&(N>4?(o+="\n".concat(m,"...").concat(_),u=!0):N>3&&(o+="\n  ".concat(l[d-2]),x++),o+="\n  ".concat(l[d-1]),x++),a=d,o+="\n".concat(b,"+").concat(_," ").concat(j),i+="\n".concat(v,"-").concat(_," ").concat(P),x+=2):(o+=i,i="",1!==N&&0!==d||(o+="\n  ".concat(j),x++))}if(x>20&&d<E-2)return"".concat(R).concat(I,"\n").concat(o,"\n").concat(m,"...").concat(_).concat(i,"\n")+"".concat(m,"...").concat(_)}return"".concat(R).concat(u?I:"","\n").concat(o).concat(i).concat(s).concat(h)}(c,l,o)));else if("notDeepStrictEqual"===o||"notStrictEqual"===o){var h=w[o],S=O(c).split("\n");if("notStrictEqual"===o&&"object"===f(c)&&null!==c&&(h=w.notStrictEqualObject),S.length>30)for(S[26]="".concat(m,"...").concat(_);S.length>27;)S.pop();r=1===S.length?a(this,d(t).call(this,"".concat(h," ").concat(S[0]))):a(this,d(t).call(this,"".concat(h,"\n\n").concat(S.join("\n"),"\n")))}else{var E=O(c),A="",x=w[o];"notDeepEqual"===o||"notEqual"===o?(E="".concat(w[o],"\n\n").concat(E)).length>1024&&(E="".concat(E.slice(0,1021),"...")):(A="".concat(O(l)),E.length>512&&(E="".concat(E.slice(0,509),"...")),A.length>512&&(A="".concat(A.slice(0,509),"...")),"deepEqual"===o||"equal"===o?E="".concat(x,"\n\n").concat(E,"\n\nshould equal\n\n"):A=" ".concat(o," ").concat(A)),r=a(this,d(t).call(this,"".concat(E).concat(A)))}return Error.stackTraceLimit=p,r.generatedMessage=!i,Object.defineProperty(s(r),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),r.code="ERR_ASSERTION",r.actual=c,r.expected=l,r.operator=o,Error.captureStackTrace&&Error.captureStackTrace(s(r),u),r.stack,r.name="AssertionError",a(r)}var r,u;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&p(e,t)}(t,e),r=t,u=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:h.custom,value:function(e,t){return h(this,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter((function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})))),n.forEach((function(t){i(e,t,r[t])}))}return e}({},t,{customInspect:!1,depth:0}))}}],u&&o(r.prototype,u),t}(u(Error));e.exports=S},47515:(e,t,r)=>{"use strict";function n(e){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},n(e)}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}var a,s,u={};function c(e,t,r){r||(r=Error);var a=function(r){function a(r,o,s){var u;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),u=function(e,t){return!t||"object"!==n(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}(this,i(a).call(this,function(e,r,n){return"string"==typeof t?t:t(e,r,n)}(r,o,s))),u.code=e,u}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&o(e,t)}(a,r),a}(r);u[e]=a}function l(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}c("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),c("ERR_INVALID_ARG_TYPE",(function(e,t,i){var o,s,u,c,p;if(void 0===a&&(a=r(71696)),a("string"==typeof e,"'name' must be a string"),"string"==typeof t&&(s="not ",t.substr(0,s.length)===s)?(o="must not be",t=t.replace(/^not /,"")):o="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))u="The ".concat(e," ").concat(o," ").concat(l(t,"type"));else{var d=("number"!=typeof p&&(p=0),p+".".length>(c=e).length||-1===c.indexOf(".",p)?"argument":"property");u='The "'.concat(e,'" ').concat(d," ").concat(o," ").concat(l(t,"type"))}return u+". Received type ".concat(n(i))}),TypeError),c("ERR_INVALID_ARG_VALUE",(function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===s&&(s=r(43335));var i=s.inspect(t);return i.length>128&&(i="".concat(i.slice(0,128),"...")),"The argument '".concat(e,"' ").concat(n,". Received ").concat(i)}),TypeError,RangeError),c("ERR_INVALID_RETURN_VALUE",(function(e,t,r){var i;return i=r&&r.constructor&&r.constructor.name?"instance of ".concat(r.constructor.name):"type ".concat(n(r)),"Expected ".concat(e,' to be returned from the "').concat(t,'"')+" function but got ".concat(i,".")}),TypeError),c("ERR_MISSING_ARGS",(function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];void 0===a&&(a=r(71696)),a(t.length>0,"At least one arg needs to be specified");var i="The ",o=t.length;switch(t=t.map((function(e){return'"'.concat(e,'"')})),o){case 1:i+="".concat(t[0]," argument");break;case 2:i+="".concat(t[0]," and ").concat(t[1]," arguments");break;default:i+=t.slice(0,o-1).join(", "),i+=", and ".concat(t[o-1]," arguments")}return"".concat(i," must be specified")}),TypeError),e.exports.codes=u},26796:(e,t,r)=>{"use strict";function n(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=e[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}var o=void 0!==/a/g.flags,a=function(e){var t=[];return e.forEach((function(e){return t.push(e)})),t},s=function(e){var t=[];return e.forEach((function(e,r){return t.push([r,e])})),t},u=Object.is?Object.is:r(34679),c=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},l=Number.isNaN?Number.isNaN:r(74782);function p(e){return e.call.bind(e)}var d=p(Object.prototype.hasOwnProperty),f=p(Object.prototype.propertyIsEnumerable),h=p(Object.prototype.toString),y=r(43335).types,g=y.isAnyArrayBuffer,m=y.isArrayBufferView,b=y.isDate,v=y.isMap,_=y.isRegExp,w=y.isSet,T=y.isNativeError,O=y.isBoxedPrimitive,S=y.isNumberObject,E=y.isStringObject,A=y.isBooleanObject,x=y.isBigIntObject,R=y.isSymbolObject,I=y.isFloat32Array,N=y.isFloat64Array;function P(e){if(0===e.length||e.length>10)return!0;for(var t=0;t<e.length;t++){var r=e.charCodeAt(t);if(r<48||r>57)return!0}return 10===e.length&&e>=Math.pow(2,32)}function j(e){return Object.keys(e).filter(P).concat(c(e).filter(Object.prototype.propertyIsEnumerable.bind(e)))}function D(e,t){if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0}function L(e,t,r,n){if(e===t)return 0!==e||!r||u(e,t);if(r){if("object"!==i(e))return"number"==typeof e&&l(e)&&l(t);if("object"!==i(t)||null===e||null===t)return!1;if(Object.getPrototypeOf(e)!==Object.getPrototypeOf(t))return!1}else{if(null===e||"object"!==i(e))return(null===t||"object"!==i(t))&&e==t;if(null===t||"object"!==i(t))return!1}var a,s,c,p,d=h(e);if(d!==h(t))return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;var f=j(e),y=j(t);return f.length===y.length&&F(e,t,r,n,1,f)}if("[object Object]"===d&&(!v(e)&&v(t)||!w(e)&&w(t)))return!1;if(b(e)){if(!b(t)||Date.prototype.getTime.call(e)!==Date.prototype.getTime.call(t))return!1}else if(_(e)){if(!_(t)||(c=e,p=t,!(o?c.source===p.source&&c.flags===p.flags:RegExp.prototype.toString.call(c)===RegExp.prototype.toString.call(p))))return!1}else if(T(e)||e instanceof Error){if(e.message!==t.message||e.name!==t.name)return!1}else{if(m(e)){if(r||!I(e)&&!N(e)){if(!function(e,t){return e.byteLength===t.byteLength&&0===D(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}(e,t))return!1}else if(!function(e,t){if(e.byteLength!==t.byteLength)return!1;for(var r=0;r<e.byteLength;r++)if(e[r]!==t[r])return!1;return!0}(e,t))return!1;var P=j(e),L=j(t);return P.length===L.length&&F(e,t,r,n,0,P)}if(w(e))return!(!w(t)||e.size!==t.size)&&F(e,t,r,n,2);if(v(e))return!(!v(t)||e.size!==t.size)&&F(e,t,r,n,3);if(g(e)){if(s=t,(a=e).byteLength!==s.byteLength||0!==D(new Uint8Array(a),new Uint8Array(s)))return!1}else if(O(e)&&!function(e,t){return S(e)?S(t)&&u(Number.prototype.valueOf.call(e),Number.prototype.valueOf.call(t)):E(e)?E(t)&&String.prototype.valueOf.call(e)===String.prototype.valueOf.call(t):A(e)?A(t)&&Boolean.prototype.valueOf.call(e)===Boolean.prototype.valueOf.call(t):x(e)?x(t)&&BigInt.prototype.valueOf.call(e)===BigInt.prototype.valueOf.call(t):R(t)&&Symbol.prototype.valueOf.call(e)===Symbol.prototype.valueOf.call(t)}(e,t))return!1}return F(e,t,r,n,0)}function C(e,t){return t.filter((function(t){return f(e,t)}))}function F(e,t,r,n,i,o){if(5===arguments.length){o=Object.keys(e);var a=Object.keys(t);if(o.length!==a.length)return!1}for(var s=0;s<o.length;s++)if(!d(t,o[s]))return!1;if(r&&5===arguments.length){var u=c(e);if(0!==u.length){var l=0;for(s=0;s<u.length;s++){var p=u[s];if(f(e,p)){if(!f(t,p))return!1;o.push(p),l++}else if(f(t,p))return!1}var h=c(t);if(u.length!==h.length&&C(t,h).length!==l)return!1}else{var y=c(t);if(0!==y.length&&0!==C(t,y).length)return!1}}if(0===o.length&&(0===i||1===i&&0===e.length||0===e.size))return!0;if(void 0===n)n={val1:new Map,val2:new Map,position:0};else{var g=n.val1.get(e);if(void 0!==g){var m=n.val2.get(t);if(void 0!==m)return g===m}n.position++}n.val1.set(e,n.position),n.val2.set(t,n.position);var b=V(e,t,r,o,n,i);return n.val1.delete(e),n.val2.delete(t),b}function M(e,t,r,n){for(var i=a(e),o=0;o<i.length;o++){var s=i[o];if(L(t,s,r,n))return e.delete(s),!0}return!1}function k(e){switch(i(e)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":e=+e;case"number":if(l(e))return!1}return!0}function B(e,t,r){var n=k(r);return null!=n?n:t.has(n)&&!e.has(n)}function U(e,t,r,n,i){var o=k(r);if(null!=o)return o;var a=t.get(o);return!(void 0===a&&!t.has(o)||!L(n,a,!1,i))&&!e.has(o)&&L(n,a,!1,i)}function q(e,t,r,n,i,o){for(var s=a(e),u=0;u<s.length;u++){var c=s[u];if(L(r,c,i,o)&&L(n,t.get(c),i,o))return e.delete(c),!0}return!1}function V(e,t,r,o,u,c){var l=0;if(2===c){if(!function(e,t,r,n){for(var o=null,s=a(e),u=0;u<s.length;u++){var c=s[u];if("object"===i(c)&&null!==c)null===o&&(o=new Set),o.add(c);else if(!t.has(c)){if(r)return!1;if(!B(e,t,c))return!1;null===o&&(o=new Set),o.add(c)}}if(null!==o){for(var l=a(t),p=0;p<l.length;p++){var d=l[p];if("object"===i(d)&&null!==d){if(!M(o,d,r,n))return!1}else if(!r&&!e.has(d)&&!M(o,d,r,n))return!1}return 0===o.size}return!0}(e,t,r,u))return!1}else if(3===c){if(!function(e,t,r,o){for(var a=null,u=s(e),c=0;c<u.length;c++){var l=n(u[c],2),p=l[0],d=l[1];if("object"===i(p)&&null!==p)null===a&&(a=new Set),a.add(p);else{var f=t.get(p);if(void 0===f&&!t.has(p)||!L(d,f,r,o)){if(r)return!1;if(!U(e,t,p,d,o))return!1;null===a&&(a=new Set),a.add(p)}}}if(null!==a){for(var h=s(t),y=0;y<h.length;y++){var g=n(h[y],2),m=(p=g[0],g[1]);if("object"===i(p)&&null!==p){if(!q(a,e,p,m,r,o))return!1}else if(!(r||e.has(p)&&L(e.get(p),m,!1,o)||q(a,e,p,m,!1,o)))return!1}return 0===a.size}return!0}(e,t,r,u))return!1}else if(1===c)for(;l<e.length;l++){if(!d(e,l)){if(d(t,l))return!1;for(var p=Object.keys(e);l<p.length;l++){var f=p[l];if(!d(t,f)||!L(e[f],t[f],r,u))return!1}return p.length===Object.keys(t).length}if(!d(t,l)||!L(e[l],t[l],r,u))return!1}for(l=0;l<o.length;l++){var h=o[l];if(!L(e[h],t[h],r,u))return!1}return!0}e.exports={isDeepEqual:function(e,t){return L(e,t,!1)},isDeepStrictEqual:function(e,t){return L(e,t,!0)}}},89727:(e,t,r)=>{const n=r(75192),i=r(18015),o=r(2283),a=r(78917),s=r(21527);e.exports={DynamicNestedLoopJoin:n,HashJoin:i,NestedLoopJoin:o,SymmetricHashJoin:a,MergeStream:s}},75192:(e,t,r)=>{let n=r(78664),i=n.MultiTransformIterator,o=n.SimpleTransformIterator;e.exports=class extends i{constructor(e,t,r,n){super(e,n),this.funRight=t,this.funJoin=r}_createTransformer(e){return new o(this.funRight(e),{transform:(t,r,n)=>{let i=this.funJoin(e,t);null!==i&&n(i),r()}})}}},18015:(e,t,r)=>{let n=r(78664).AsyncIterator;e.exports=class extends n{constructor(e,t,r,n){super(),this.addedDataListener=!1,this.left=e,this.right=t,this.funHash=r,this.funJoin=n,this.leftMap=new Map,this.match=null,this.matches=[],this.matchIdx=0,this.left.on("error",(e=>this.destroy(e))),this.right.on("error",(e=>this.destroy(e))),this.readable=!1,this.left.on("end",function(){if(this.leftMap.size<=0)return this.close();this.readable=!0,this.right.on("readable",(()=>this.readable=!0)),this.right.on("end",(()=>{this.hasResults()||this._end()}))}.bind(this)),this.on("newListener",(e=>{"data"!==e||this.addedDataListener||(this.addedDataListener=!0,this._addDataListener())}))}hasResults(){return!this.right.ended||this.matchIdx<this.matches.length}close(){super.close(),this.left.close(),this.right.close()}read(){if(this.addedDataListener||(this.addedDataListener=!0,this._addDataListener()),this.ended||!this.readable)return null;for(;this.matchIdx<this.matches.length;){let e=this.matches[this.matchIdx++],t=this.funJoin(e,this.match);if(null!==t)return t}if(this.hasResults()||this._end(),this.match=this.right.read(),null===this.match)return this.readable=!1,null;let e=this.funHash(this.match);return this.matches=this.leftMap.get(e)||[],this.matchIdx=0,this.read()}_addDataListener(){this.left.on("data",function(e){let t=this.funHash(e);this.leftMap.has(t)||this.leftMap.set(t,[]),this.leftMap.get(t).push(e)}.bind(this))}}},2283:(e,t,r)=>{const{MultiTransformIterator:n,SimpleTransformIterator:i,scheduleTask:o}=r(78664);e.exports=class extends n{constructor(e,t,r,n){super(e,n),this.right=t,this.funJoin=r,this.on("end",(()=>this.right.close()))}close(){super.close(),o((()=>this.right.close()))}_createTransformer(e){return new i(this.right.clone(),{transform:(t,r,n)=>{let i=this.funJoin(e,t);null!==i&&n(i),r()}})}}},78917:(e,t,r)=>{let n=r(78664).AsyncIterator;e.exports=class extends n{constructor(e,t,r,n){super(),this.left=e,this.right=t,this.funHash=r,this.funJoin=n,this.usedLeft=!1,this.leftMap=new Map,this.rightMap=new Map,this.on("end",(()=>this._cleanup())),this.match=null,this.matches=[],this.matchIdx=0,(this.left.readable||this.right.readable)&&(this.readable=!0),this.left.on("error",(e=>this.destroy(e))),this.right.on("error",(e=>this.destroy(e))),this.left.on("readable",(()=>this.readable=!0)),this.right.on("readable",(()=>this.readable=!0)),this.left.on("end",(()=>{this.hasResults()||this._end()})),this.right.on("end",(()=>{this.hasResults()||this._end()}))}hasResults(){return!this.left.ended||!this.right.ended||!!this.matches&&this.matchIdx<this.matches.length}_cleanup(){this.leftMap=null,this.rightMap=null,this.matches=null}close(){super.close(),this.left.close(),this.right.close()}read(){if(this.ended)return null;for(;this.matchIdx<this.matches.length;){let e=this.matches[this.matchIdx++],t=this.usedLeft?this.funJoin(this.match,e):this.funJoin(e,this.match);if(null!==t)return t}this.hasResults()||this._end();let e=null;for(let t=0;t<2&&(e=this.usedLeft?this.right.read():this.left.read(),this.usedLeft=!this.usedLeft,null===e);++t);if(null===e)return this.readable=!1,null;let t=this.funHash(e),r=this.usedLeft?this.leftMap:this.rightMap;return r.has(t)||r.set(t,[]),r.get(t).push(e),this.match=e,this.matches=(this.usedLeft?this.rightMap:this.leftMap).get(t)||[],this.matchIdx=0,this.read()}}},21527:(e,t,r)=>{let n=r(78664).AsyncIterator;e.exports=class extends n{constructor(e){super(),Array.isArray(e)||(e=Array.prototype.slice.call(arguments)),this.streams=e;for(let t of e)t.on("readable",(()=>this.emit("readable"))),t.on("end",(()=>this._removeStream(t)));0===this.streams.length&&this.close(),this.idx=this.streams.length-1}_removeStream(e){let t=this.streams.indexOf(e);t<0||(this.streams.splice(t,1),this.idx>=this.streams.length&&--this.idx,0===this.streams.length&&this._end())}close(){super.close();for(let e of this.streams)e.close()}read(){for(let e=0;e<this.streams.length;++e){this.idx=(this.idx+1)%this.streams.length;let e=this.streams[this.idx].read();if(null!==e)return e}return null}}},89720:(e,t,r)=>{const n=new(r(60738).LoggerVoid),i=new(r(21049).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-init/^2.0.0/components/ActorInit.jsonld#ActorInit_default_bus"}),o=new(r(21049).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-context-preprocess/^2.0.0/components/ActorContextPreprocess.jsonld#ActorContextPreprocess_default_bus"}),a=new(r(21049).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-hash-bindings/^2.0.0/components/ActorHashBindings.jsonld#ActorHashBindings_default_bus"}),s=new(r(21049).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-optimize-query-operation/^2.0.0/components/ActorOptimizeQueryOperation.jsonld#ActorOptimizeQueryOperation_default_bus"}),u=new(r(83814).BusQueryOperation)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-operation/^2.0.0/components/ActorQueryOperation.jsonld#ActorQueryOperation_default_bus"}),c=new(r(21049).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-parse/^2.0.0/components/ActorQueryParse.jsonld#ActorQueryParse_default_bus"}),l=new(r(21049).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-query-result-serialize/^2.0.0/components/ActorQueryResultSerialize.jsonld#ActorQueryResultSerialize_default_bus"}),p=new(r(21049).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http-invalidate/^2.0.0/components/ActorHttpInvalidate.jsonld#ActorHttpInvalidate_default_bus"}),d=new(r(21049).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-serialize/^2.0.0/components/ActorRdfSerialize.jsonld#ActorRdfSerialize_default_bus"}),f=new(r(21049).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-http/^2.0.0/components/ActorHttp.jsonld#ActorHttp_default_bus"}),h=new(r(21049).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-entries-sort/^2.0.0/components/ActorRdfJoinEntriesSort.jsonld#ActorRdfJoinEntriesSort_default_bus"}),y=new(r(21049).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join-selectivity/^2.0.0/components/ActorRdfJoinSelectivity.jsonld#ActorRdfJoinSelectivity_default_bus"}),g=new(r(21049).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-update-quads/^2.0.0/components/ActorRdfUpdateQuads.jsonld#ActorRdfUpdateQuads_default_bus"}),m=new(r(21049).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-join/^2.0.0/components/ActorRdfJoin.jsonld#ActorRdfJoin_default_bus"}),b=new(r(21049).Bus)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/bus-rdf-resolve-quad-pattern/^2.0.0/components/ActorRdfResolveQuadPattern.jsonld#ActorRdfResolveQuadPattern_default_bus"}),v=(new(r(76400).ActorContextPreprocessSourceToDestination)({name:"urn:comunica:default:context-preprocess/actors#source-to-destination",bus:o}),new(r(84190).MediatorCombinePipeline)({name:"urn:comunica:default:context-preprocess/mediators#main",bus:o})),_=(new(r(82738).ActorHashBindingsSha1)({name:"urn:comunica:default:hash-bindings/actors#sha1",bus:a}),new(r(7204).MediatorRace)({name:"urn:comunica:default:hash-bindings/mediators#main",bus:a})),w=new(r(84190).MediatorCombinePipeline)({name:"urn:comunica:default:optimize-query-operation/mediators#main",bus:s}),T=(new(r(68723).ActorOptimizeQueryOperationJoinBgp)({name:"urn:comunica:default:optimize-query-operation/actors#join-bgp",bus:s}),new(r(1525).ActorOptimizeQueryOperationBgpToJoin)({name:"urn:comunica:default:optimize-query-operation/actors#bgp-to-join",bus:s}),new(r(67768).ActorOptimizeQueryOperationJoinConnected)({name:"urn:comunica:default:optimize-query-operation/actors#join-connected",bus:s}),new(r(92201).MediatorNumber)({field:"httpRequests",type:"min",ignoreErrors:!0,name:"urn:comunica:default:query-operation/mediators#main",bus:u})),O=(new(r(78251).ActorQueryOperationValues)({name:"urn:comunica:default:query-operation/actors#values",bus:u}),new(r(7204).MediatorRace)({name:"urn:comunica:default:query-parse/mediators#main",bus:c})),S=(new(r(93700).ActorQueryParseSparql)({prefixes:{dbpedia:"http://dbpedia.org/resource/","dbpedia-owl":"http://dbpedia.org/ontology/",dbpprop:"http://dbpedia.org/property/",dc:"http://purl.org/dc/terms/",dc11:"http://purl.org/dc/elements/1.1/",dcterms:"http://purl.org/dc/terms/",foaf:"http://xmlns.com/foaf/0.1/",geo:"http://www.w3.org/2003/01/geo/wgs84_pos#",owl:"http://www.w3.org/2002/07/owl#",rdf:"http://www.w3.org/1999/02/22-rdf-syntax-ns#",rdfs:"http://www.w3.org/2000/01/rdf-schema#",schema:"http://schema.org/",skos:"http://www.w3.org/2008/05/skos#",xsd:"http://www.w3.org/2001/XMLSchema#"},name:"urn:comunica:default:query-parse/actors#sparql",bus:c}),new(r(37873).ActorQueryParseGraphql)({name:"urn:comunica:default:query-parse/actors#graphql",bus:c}),new(r(7204).MediatorRace)({name:"urn:comunica:default:query-result-serialize/mediators#serialize",bus:l})),E=new(r(21413).MediatorCombineUnion)({field:"mediaTypes",name:"urn:comunica:default:query-result-serialize/mediators#mediaType",bus:l}),A=new(r(21413).MediatorCombineUnion)({field:"mediaTypeFormats",name:"urn:comunica:default:query-result-serialize/mediators#mediaTypeFormat",bus:l}),x=(new(r(6234).ActorQueryResultSerializeJson)({mediaTypePriorities:{"application/json":1},mediaTypeFormats:{"application/json":"https://comunica.linkeddatafragments.org/#results_JSON"},name:"urn:comunica:default:query-result-serialize/actors#json",bus:l}),new(r(54399).ActorQueryResultSerializeSimple)({mediaTypePriorities:{simple:.9},mediaTypeFormats:{simple:"https://comunica.linkeddatafragments.org/#results_simple"},name:"urn:comunica:default:query-result-serialize/actors#simple",bus:l}),new(r(74295).ActorQueryResultSerializeSparqlCsv)({mediaTypePriorities:{"text/csv":.75},mediaTypeFormats:{"text/csv":"http://www.w3.org/ns/formats/SPARQL_Results_CSV"},name:"urn:comunica:default:query-result-serialize/actors#csv",bus:l}),new(r(68058).ActorQueryResultSerializeSparqlJson)({mediaTypePriorities:{"application/sparql-results+json":.8},mediaTypeFormats:{"application/sparql-results+json":"http://www.w3.org/ns/formats/SPARQL_Results_JSON"},name:"urn:comunica:default:query-result-serialize/actors#sparql-json",bus:l}),new(r(30865).ActorQueryResultSerializeSparqlTsv)({mediaTypePriorities:{"text/tab-separated-values":.75},mediaTypeFormats:{"text/tab-separated-values":"http://www.w3.org/ns/formats/SPARQL_Results_TSV"},name:"urn:comunica:default:query-result-serialize/actors#sparql-tsv",bus:l}),new(r(33499).ActorQueryResultSerializeSparqlXml)({mediaTypePriorities:{"application/sparql-results+xml":.8},mediaTypeFormats:{"application/sparql-results+xml":"http://www.w3.org/ns/formats/SPARQL_Results_XML"},name:"urn:comunica:default:query-result-serialize/actors#sparql-xml",bus:l}),new(r(68266).ActorQueryResultSerializeTable)({columnWidth:50,mediaTypePriorities:{table:.6},mediaTypeFormats:{table:"https://comunica.linkeddatafragments.org/#results_table"},name:"urn:comunica:default:query-result-serialize/actors#table",bus:l}),new(r(93148).ActorQueryResultSerializeTree)({mediaTypePriorities:{tree:.5},mediaTypeFormats:{tree:"https://comunica.linkeddatafragments.org/#results_tree"},name:"urn:comunica:default:query-result-serialize/actors#tree",bus:l}),new(r(95069).MediatorAll)({name:"urn:comunica:default:http-invalidate/mediators#main",bus:p})),R=new(r(7204).MediatorRace)({name:"urn:comunica:default:rdf-serialize/mediators#serialize",bus:d}),I=new(r(21413).MediatorCombineUnion)({field:"mediaTypes",name:"urn:comunica:default:rdf-serialize/mediators#mediaType",bus:d}),N=new(r(21413).MediatorCombineUnion)({field:"mediaTypeFormats",name:"urn:comunica:default:rdf-serialize/mediators#mediaTypeFormat",bus:d}),P=(new(r(97021).ActorRdfSerializeN3)({mediaTypePriorities:{"application/n-quads":1,"application/n-triples":.8,"application/trig":.95,"text/n3":.35,"text/turtle":.6},mediaTypeFormats:{"application/n-quads":"http://www.w3.org/ns/formats/N-Quads","application/n-triples":"http://www.w3.org/ns/formats/N-Triples","application/trig":"http://www.w3.org/ns/formats/TriG","text/n3":"http://www.w3.org/ns/formats/N3","text/turtle":"http://www.w3.org/ns/formats/Turtle"},name:"urn:comunica:default:rdf-serialize/actors#n3",bus:d}),new(r(21336).ActorRdfSerializeJsonLd)({jsonStringifyIndentSpaces:2,mediaTypePriorities:{"application/ld+json":1},mediaTypeFormats:{"application/ld+json":"http://www.w3.org/ns/formats/JSON-LD"},priorityScale:.9,name:"urn:comunica:default:rdf-serialize/actors#jsonld",bus:d}),new(r(81801).ActionObserverHttp)({name:"https://linkedsoftwaredependencies.org/bundles/npm/@comunica/actor-query-result-serialize-stats/^2.0.0/components/ActorQueryResultSerializeStats.jsonld#ActorQueryResultSerializeStats_default_observer",bus:f})),j=new(r(92201).MediatorNumber)({field:"time",type:"min",ignoreErrors:!0,name:"urn:comunica:default:http/mediators#main",bus:f}),D=(new(r(12321).ActorRdfJoinEntriesSortCardinality)({name:"urn:comunica:default:rdf-join-entries-sort/actors#cardinality",bus:h}),new(r(7204).MediatorRace)({name:"urn:comunica:default:rdf-join-entries-sort/mediators#main",bus:h})),L=(new(r(41998).ActorRdfJoinSelectivityVariableCounting)({name:"urn:comunica:default:rdf-join-selectivity/actors#variable-counting",bus:y}),new(r(92201).MediatorNumber)({field:"accuracy",type:"max",ignoreErrors:!0,name:"urn:comunica:default:rdf-join-selectivity/mediators#main",bus:y})),C=(new(r(2340).ActorRdfUpdateQuadsRdfJsStore)({name:"urn:comunica:default:rdf-update-quads/actors#rdfjs-store",bus:g}),new(r(7204).MediatorRace)({name:"urn:comunica:default:rdf-update-quads/mediators#main",bus:g})),F=new(r(78557).MediatorJoinCoefficientsFixed)({cpuWeight:1,memoryWeight:1,timeWeight:10,ioWeight:100,name:"urn:comunica:default:rdf-join/mediators#main",bus:m}),M=new(r(7204).MediatorRace)({name:"urn:comunica:default:rdf-resolve-quad-pattern/mediators#main",bus:b}),k=(new(r(62515).ActorRdfResolveQuadPatternRdfJsSource)({name:"urn:comunica:default:rdf-resolve-quad-pattern/actors#rdfjs-source",bus:b}),new(r(8589).ActorQueryOperationAsk)({mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#ask",bus:u}),new(r(44185).ActorQueryOperationBgpJoin)({mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#bgp",bus:u}),new(r(32023).ActorQueryOperationConstruct)({mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#construct",bus:u}),new(r(26245).ActorQueryOperationDescribeSubject)({mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#describe",bus:u}),new(r(51245).ActorQueryOperationDistinctHash)({mediatorHashBindings:_,mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#distinct",bus:u}),new(r(97320).ActorQueryOperationExtend)({mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#extend",bus:u}),new(r(29403).ActorQueryOperationFilterSparqlee)({mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#filter",bus:u}),new(r(17877).ActorQueryOperationFromQuad)({mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#from",bus:u}),new(r(7375).ActorQueryOperationGroup)({mediatorHashBindings:_,mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#group",bus:u}),new(r(24675).ActorQueryOperationNop)({mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#nop",bus:u}),new(r(3438).ActorQueryOperationOrderBySparqlee)({mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#orderby",bus:u}),new(r(82491).ActorQueryOperationProject)({mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#project",bus:u}),new(r(86019).ActorQueryOperationReducedHash)({mediatorHashBindings:_,cacheSize:100,mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#reduced",bus:u}),new(r(85900).ActorQueryOperationService)({forceSparqlEndpoint:!1,mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#service",bus:u}),new(r(86069).ActorQueryOperationSlice)({mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#slice",bus:u}),new(r(54036).ActorQueryOperationUnion)({mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#union",bus:u}),new(r(956).ActorQueryOperationPathAlt)({mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#path-alt",bus:u}),new(r(60283).ActorQueryOperationPathInv)({mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#path-inv",bus:u}),new(r(2450).ActorQueryOperationPathLink)({mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#path-link",bus:u}),new(r(14985).ActorQueryOperationPathNps)({mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#path-nps",bus:u}),new(r(53346).ActorQueryOperationPathOneOrMore)({mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#path-one-or-more",bus:u}),new(r(54945).ActorQueryOperationPathZeroOrMore)({mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#path-zero-or-more",bus:u}),new(r(39079).ActorQueryOperationPathZeroOrOne)({mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#path-zero-or-one",bus:u}),new(r(46270).ActorQueryOperationAddRewrite)({mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#update-add",bus:u}),new(r(56690).ActorQueryOperationUpdateCompositeUpdate)({mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#update-composite",bus:u}),new(r(71852).ActorQueryOperationCopyRewrite)({mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#update-copy",bus:u}),new(r(69259).ActorQueryOperationMoveRewrite)({mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#update-move",bus:u}),new(r(96226).ActorInitQuery)({mediatorOptimizeQueryOperation:w,mediatorQueryOperation:T,mediatorQueryParse:O,mediatorQueryResultSerialize:S,mediatorQueryResultSerializeMediaTypeCombiner:E,mediatorQueryResultSerializeMediaTypeFormatCombiner:A,mediatorContextPreprocess:v,mediatorHttpInvalidate:x,logger:n,defaultQueryInputFormat:"sparql",contextKeyShortcuts:{baseIRI:"@comunica/actor-init-query:baseIRI",datetime:"@comunica/actor-http-memento:datetime",destination:"@comunica/bus-rdf-update-quads:destination",explain:"@comunica/actor-init-query:explain",extensionFunctionCreator:"@comunica/actor-init-query:extensionFunctionCreator",extensionFunctions:"@comunica/actor-init-query:extensionFunctions",fetch:"@comunica/bus-http:fetch",httpAuth:"@comunica/bus-http:auth",httpBodyTimeout:"@comunica/bus-http:http-body-timeout",httpIncludeCredentials:"@comunica/bus-http:include-credentials",httpProxyHandler:"@comunica/actor-http-proxy:httpProxyHandler",httpTimeout:"@comunica/bus-http:http-timeout",initialBindings:"@comunica/actor-init-query:initialBindings",lenient:"@comunica/actor-init-query:lenient",log:"@comunica/core:log",queryFormat:"@comunica/actor-init-query:queryFormat",queryTimestamp:"@comunica/actor-init-query:queryTimestamp",readOnly:"@comunica/bus-query-operation:readOnly",source:"@comunica/bus-rdf-resolve-quad-pattern:source",sources:"@comunica/bus-rdf-resolve-quad-pattern:sources",unionDefaultGraph:"@comunica/bus-query-operation:unionDefaultGraph"},name:"urn:comunica:default:init/actors#query",bus:i}));new(r(45322).ActorQueryResultSerializeRdf)({mediatorRdfSerialize:R,mediatorMediaTypeCombiner:I,mediatorMediaTypeFormatCombiner:N,name:"urn:comunica:default:query-result-serialize/actors#rdf",bus:l}),new(r(81801).ActorQueryResultSerializeStats)({httpObserver:P,mediaTypePriorities:{stats:.5},mediaTypeFormats:{stats:"https://comunica.linkeddatafragments.org/#results_stats"},name:"urn:comunica:default:query-result-serialize/actors#stats",bus:l}),new(r(71111).ActorQueryOperationSparqlEndpoint)({mediatorHttp:j,checkUrlSuffixSparql:!0,checkUrlSuffixUpdate:!0,forceHttpGet:!1,name:"urn:comunica:default:query-operation/actors#sparql-endpoint",bus:u}),new(r(64849).ActorRdfJoinNone)({mediatorJoinSelectivity:L,name:"urn:comunica:default:rdf-join/actors#inner-none",bus:m}),new(r(85427).ActorRdfJoinSingle)({mediatorJoinSelectivity:L,name:"urn:comunica:default:rdf-join/actors#inner-single",bus:m}),new(r(3771).ActorRdfJoinMultiEmpty)({mediatorJoinSelectivity:L,name:"urn:comunica:default:rdf-join/actors#inner-multi-empty",bus:m}),new(r(39474).ActorRdfJoinMultiBind)({bindOrder:"depth-first",selectivityModifier:1e-4,mediatorJoinEntriesSort:D,mediatorQueryOperation:T,mediatorJoinSelectivity:L,name:"urn:comunica:default:rdf-join/actors#inner-multi-bind",bus:m}),new(r(55393).ActorRdfJoinHash)({mediatorJoinSelectivity:L,name:"urn:comunica:default:rdf-join/actors#inner-hash",bus:m}),new(r(33023).ActorRdfJoinSymmetricHash)({mediatorJoinSelectivity:L,name:"urn:comunica:default:rdf-join/actors#inner-symmetric-hash",bus:m}),new(r(87622).ActorRdfJoinNestedLoop)({mediatorJoinSelectivity:L,name:"urn:comunica:default:rdf-join/actors#inner-nested-loop",bus:m}),new(r(66927).ActorRdfJoinMinusHash)({mediatorJoinSelectivity:L,name:"urn:comunica:default:rdf-join/actors#minus-hash",bus:m}),new(r(56419).ActorRdfJoinMinusHashUndef)({mediatorJoinSelectivity:L,name:"urn:comunica:default:rdf-join/actors#minus-hash-undef",bus:m}),new(r(95117).ActorRdfJoinOptionalBind)({bindOrder:"depth-first",selectivityModifier:1e-4,mediatorQueryOperation:T,mediatorJoinSelectivity:L,name:"urn:comunica:default:rdf-join/actors#optional-bind",bus:m}),new(r(36920).ActorRdfJoinOptionalNestedLoop)({mediatorJoinSelectivity:L,name:"urn:comunica:default:rdf-join/actors#optional-nested-loop",bus:m}),new(r(71103).ActorQueryOperationClear)({mediatorUpdateQuads:C,mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#update-clear",bus:u}),new(r(17166).ActorQueryOperationCreate)({mediatorUpdateQuads:C,mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#update-create",bus:u}),new(r(6215).ActorQueryOperationUpdateDeleteInsert)({mediatorUpdateQuads:C,mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#update-delete-insert",bus:u}),new(r(54322).ActorQueryOperationDrop)({mediatorUpdateQuads:C,mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#update-drop",bus:u}),new(r(82965).ActorQueryOperationLoad)({mediatorUpdateQuads:C,mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#update-load",bus:u}),new(r(1513).ActorQueryOperationJoin)({mediatorJoin:F,mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#join",bus:u}),new(r(42678).ActorQueryOperationLeftJoin)({mediatorJoin:F,mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#leftjoin",bus:u}),new(r(21530).ActorQueryOperationMinus)({mediatorJoin:F,mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#minus",bus:u}),new(r(14059).ActorQueryOperationPathSeq)({mediatorJoin:F,mediatorQueryOperation:T,name:"urn:comunica:default:query-operation/actors#path-seq",bus:u}),new(r(34442).ActorRdfJoinMultiSmallest)({mediatorJoinEntriesSort:D,mediatorJoin:F,mediatorJoinSelectivity:L,name:"urn:comunica:default:rdf-join/actors#inner-multi-smallest",bus:m});new(r(63632).ActorQueryOperationQuadpattern)({mediatorResolveQuadPattern:M,unionDefaultGraph:!1,name:"urn:comunica:default:query-operation/actors#quadpattern",bus:u}),new(r(87779).ActorRdfResolveQuadPatternFederated)({mediatorResolveQuadPattern:M,skipEmptyPatterns:!1,name:"urn:comunica:default:rdf-resolve-quad-pattern/actors#federated",bus:b}),e.exports=k},39901:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryEngine=void 0;const n=r(96226),i=r(89720);class o extends n.QueryEngineBase{constructor(e=i){super(e)}}t.QueryEngine=o},2159:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(39901),t)},33790:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorAbstractMediaTyped=void 0;const n=r(21049);class i extends n.Actor{constructor(e){super(e)}async run(e){if("handle"in e){const t=e;return{handle:await this.runHandle(t.handle,t.handleMediaType,e.context)}}if("mediaTypes"in e)return{mediaTypes:await this.getMediaTypes(e.context)};if("mediaTypeFormats"in e)return{mediaTypeFormats:await this.getMediaTypeFormats(e.context)};throw new Error("Either a handle, mediaTypes or mediaTypeFormats action needs to be provided")}async test(e){if("handle"in e){const t=e;return{handle:await this.testHandle(t.handle,t.handleMediaType,e.context)}}if("mediaTypes"in e)return{mediaTypes:await this.testMediaType(e.context)};if("mediaTypeFormats"in e)return{mediaTypeFormats:await this.testMediaTypeFormats(e.context)};throw new Error("Either a handle, mediaTypes or mediaTypeFormats action needs to be provided")}}t.ActorAbstractMediaTyped=i},86171:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorAbstractMediaTypedFixed=void 0;const n=r(33790);class i extends n.ActorAbstractMediaTyped{constructor(e){super(e);const t=this.priorityScale||0===this.priorityScale?this.priorityScale:1;this.mediaTypePriorities&&Object.entries(this.mediaTypePriorities).forEach((([e,r],n)=>{this.mediaTypePriorities[e]=t*r})),this.mediaTypePriorities=Object.freeze(this.mediaTypePriorities),this.mediaTypeFormats=Object.freeze(this.mediaTypeFormats)}async testHandle(e,t,r){if(!(t in this.mediaTypePriorities))throw new Error(`Unrecognized media type: ${t}`);return await this.testHandleChecked(e,r)}async testMediaType(e){return!0}async getMediaTypes(e){return this.mediaTypePriorities}async testMediaTypeFormats(e){return!0}async getMediaTypeFormats(e){return this.mediaTypeFormats}}t.ActorAbstractMediaTypedFixed=i},89208:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(33790),t),i(r(86171),t)},51573:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorAbstractPath=void 0;const n=r(79550),i=r(83814),o=r(78470),a=r(78664),s=r(91194),u=r(6053),c=r(6789),l=new s.DataFactory,p=new n.BindingsFactory;class d extends i.ActorQueryOperationTypedMediated{constructor(e,t){super(e,"path"),this.predicateType=t}async testOperation(e,t){if(e.predicate.type!==this.predicateType)throw new Error(`This Actor only supports ${this.predicateType} Path operations.`);return!0}generateVariable(e,t){return t?!e||e.subject.value!==t&&e.object.value!==t?l.variable(t):this.generateVariable(e,`${t}b`):this.generateVariable(e,"b")}async isPathArbitraryLengthDistinct(e,t){return e.get(o.KeysQueryOperation.isPathArbitraryLengthDistinctKey)?{context:e=e.set(o.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!1),operation:void 0}:{context:e=e.set(o.KeysQueryOperation.isPathArbitraryLengthDistinctKey,!0),operation:i.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:d.FACTORY.createDistinct(t),context:e}))}}async predicateStarGraphVariable(e,t,r,n,o){const s=this.generateVariable(d.FACTORY.createPath(e,r,t,n)),u=d.FACTORY.createUnion([d.FACTORY.createPattern(e,s,t,n),d.FACTORY.createPattern(t,s,e,n)]),c=i.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:o,operation:u})),l=new Set;return{bindingsStream:new a.MultiTransformIterator(c.bindingsStream,{multiTransform:i=>{const s=i.get(n);return l.has(s.value)?new a.EmptyIterator:(l.add(s.value),new a.TransformIterator((async()=>{const i=new a.BufferedIterator;return await this.getObjectsPredicateStar(e,r,s,o,{},i,{count:0}),i.transform({transform(e,r,i){i(p.bindings([[t,e],[n,s]])),r()}})}),{maxBufferSize:128}))},autoStart:!1}),metadata:c.metadata}}async getObjectsPredicateStarEval(e,t,r,n,i){if("Variable"===n.termType)return this.predicateStarGraphVariable(e,t,r,n,i);const o=new a.BufferedIterator,s=await this.getObjectsPredicateStar(e,r,n,i,{},o,{count:0});return{bindingsStream:o.transform({transform(e,r,n){n(p.bindings([[t,e]])),r()}}),metadata:s}}async getObjectsPredicateStar(e,t,r,n,o,a,s){const c=(0,u.termToString)(e);if(o[c])return;a._push(e),o[c]=e,s.count++;const l=this.generateVariable(),p=d.FACTORY.createPath(e,t,l,r),f=i.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:p,context:n}));return f.bindingsStream.on("data",(async e=>{const i=e.get(l);await this.getObjectsPredicateStar(i,t,r,n,o,a,s)})),f.bindingsStream.on("end",(()=>{0==--s.count&&a.close()})),f.metadata}async getSubjectAndObjectBindingsPredicateStar(e,t,r,n,o,a,s,c,l,f,h){const y=(0,u.termToString)(n)+(0,u.termToString)(a);if(l[y])return;if(h.count++,l[y]=!0,f._push(p.bindings([[e,r],[t,n]])),y in c){const n=await c[y];for(const i of n)await this.getSubjectAndObjectBindingsPredicateStar(e,t,r,i,o,a,s,c,l,f,h);return void(0==--h.count&&f.close())}const g=new Promise((async(u,p)=>{const y=[],g=this.generateVariable(),m=d.FACTORY.createPath(n,o,g,a),b=i.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:m,context:s}));b.bindingsStream.on("data",(async n=>{const i=n.get(g);y.push(i),await this.getSubjectAndObjectBindingsPredicateStar(e,t,r,i,o,a,s,c,l,f,h)})),b.bindingsStream.on("error",p),b.bindingsStream.on("end",(()=>{0==--h.count&&f.close(),u(y)}))}));c[y]=g}}t.ActorAbstractPath=d,d.FACTORY=new c.Factory},26622:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(51573),t)},35320:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorContextPreprocessSourceToDestination=void 0;const n=r(20846),i=r(78470);class o extends n.ActorContextPreprocess{constructor(e){super(e)}async test(e){return!0}async run(e){if(e.context.get(i.KeysRdfResolveQuadPattern.sources)&&!e.context.get(i.KeysRdfUpdateQuads.destination)){const t=e.context.get(i.KeysRdfResolveQuadPattern.sources);if(1===t.length)return{context:e.context.set(i.KeysRdfUpdateQuads.destination,t[0])}}return e}}t.ActorContextPreprocessSourceToDestination=o},76400:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(35320),t)},84699:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorHashBindingsSha1=void 0;const n=r(47582),i=r(34485),o=r(6053),a=r(67026);class s extends n.ActorHashBindings{async test(e){if(!e.allowHashCollisions)throw new Error(`Actor ${this.name} can not provide hash functions without hash collisions`);return!0}async run(e){return{hashFunction:e=>(0,i.sha1)().update(a(Object.fromEntries([...e].map((([e,t])=>[(0,o.termToString)(e),(0,o.termToString)(t)]))))).digest("hex"),hashCollisions:!0}}}t.ActorHashBindingsSha1=s},82738:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(84699),t)},13757:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorInitQuery=void 0;const n=r(4739);class i extends n.ActorInitQueryBase{}t.ActorInitQuery=i},4739:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorInitQueryBase=void 0;const n=r(40104);class i extends n.ActorInit{constructor(e){super(e)}async test(e){return!0}async run(e){throw new Error("ActorInitSparql#run is not supported in the browser.")}}t.ActorInitQueryBase=i},78332:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MemoryPhysicalQueryPlanLogger=void 0;const n=r(6053);t.MemoryPhysicalQueryPlanLogger=class{constructor(){this.children=new Map}logOperation(e,t,r,n,i,o){const a={actor:i,logicalOperator:e,physicalOperator:t,rawNode:r,children:[],metadata:o};if(this.children.set(r,a.children),this.rootNode){if(!n)throw new Error("Detected more than one parent-less node");const e=this.children.get(n);if(!e)throw new Error("Could not find parent node");e.push(a)}else{if(n)throw new Error("No root node has been set yet, while a parent is being referenced");this.rootNode=a}}toJson(){return this.rootNode?this.planNodeToJson(this.rootNode):{}}planNodeToJson(e){return{logical:e.logicalOperator,physical:e.physicalOperator,...this.getLogicalMetadata(e.rawNode),...e.metadata,...e.children.length>0?{children:e.children.map((e=>this.planNodeToJson(e)))}:{}}}getLogicalMetadata(e){if("type"in e){const t=e;switch(t.type){case"pattern":return{pattern:this.quadToString(t)};case"project":return{variables:t.variables.map((e=>e.value))}}}return{}}quadToString(e){return`${(0,n.termToString)(e.subject)} ${(0,n.termToString)(e.predicate)} ${(0,n.termToString)(e.object)}${"DefaultGraph"===e.graph.termType?"":` ${(0,n.termToString)(e.graph)}`}`}}},53451:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.QueryEngineBase=void 0;const n=r(83814),i=r(78470),o=r(21049),a=r(78332);class s{constructor(e){this.actorInitQuery=e}async queryBindings(e,t){return this.queryOfType(e,t,"bindings")}async queryQuads(e,t){return this.queryOfType(e,t,"quads")}async queryBoolean(e,t){return this.queryOfType(e,t,"boolean")}async queryVoid(e,t){return this.queryOfType(e,t,"void")}async queryOfType(e,t,r){const n=await this.query(e,t);if(n.resultType===r)return n.execute();throw new Error(`Query result type '${r}' was expected, while '${n.resultType}' was found.`)}async query(e,t){const r=await this.queryOrExplain(e,t);if("explain"in r)throw new Error("Tried to explain a query when in query-only mode");return r}async explain(e,t,r){return t.explain=r,await this.queryOrExplain(e,t)}async queryOrExplain(e,t){t=t||{};for(const e in t)this.actorInitQuery.contextKeyShortcuts[e]&&(t[this.actorInitQuery.contextKeyShortcuts[e]]=t[e],delete t[e]);let r=new o.ActionContext(t),u={language:"sparql",version:"1.1"};r.has(i.KeysInitQuery.queryFormat)&&(u=r.get(i.KeysInitQuery.queryFormat),r=r.delete(i.KeysInitQuery.queryFormat),"graphql"===u.language&&(r=r.setDefault(i.KeysInitQuery.graphqlSingularizeVariables,{})));const c=r.get(i.KeysInitQuery.baseIRI);r=r.setDefault(i.KeysInitQuery.queryTimestamp,new Date).setDefault(i.KeysRdfResolveQuadPattern.sourceIds,new Map).setDefault(i.KeysCore.log,this.actorInitQuery.logger),r=(await this.actorInitQuery.mediatorContextPreprocess.mediate({context:r})).context;const l=r.get(i.KeysInitQuery.explain);let p;if("string"==typeof e){r=r.set(i.KeysInitQuery.queryString,e);const t=await this.actorInitQuery.mediatorQueryParse.mediate({context:r,query:e,queryFormat:u,baseIRI:c});p=t.operation,t.baseIRI&&(r=r.set(i.KeysInitQuery.baseIRI,t.baseIRI))}else p=e;if("parsed"===l)return{explain:!0,type:l,data:p};r.has(i.KeysInitQuery.initialBindings)&&(p=(0,n.materializeOperation)(p,r.get(i.KeysInitQuery.initialBindings)),r=r.delete(i.KeysInitQuery.queryString));const d=await this.actorInitQuery.mediatorOptimizeQueryOperation.mediate({context:r,operation:p});if(p=d.operation,r=d.context||r,"logical"===l)return{explain:!0,type:l,data:p};let f;r=r.set(i.KeysInitQuery.query,p),"physical"===l&&(f=new a.MemoryPhysicalQueryPlanLogger,r=r.set(i.KeysInitQuery.physicalQueryPlanLogger,f));const h=await this.actorInitQuery.mediatorQueryOperation.mediate({context:r,operation:p});h.context=r;const y=s.internalToFinalResult(h);if(f){switch(y.resultType){case"bindings":case"quads":await(await y.execute()).toArray();break;case"boolean":case"void":await y.execute()}return{explain:!0,type:l,data:f.toJson()}}return y}async getResultMediaTypes(e){return e=o.ActionContext.ensureActionContext(e),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeCombiner.mediate({context:e,mediaTypes:!0})).mediaTypes}async getResultMediaTypeFormats(e){return e=o.ActionContext.ensureActionContext(e),(await this.actorInitQuery.mediatorQueryResultSerializeMediaTypeFormatCombiner.mediate({context:e,mediaTypeFormats:!0})).mediaTypeFormats}async resultToString(e,t,r){if(r=o.ActionContext.ensureActionContext(r),!t)switch(e.resultType){case"bindings":t="application/json";break;case"quads":t="application/trig";break;default:t="simple"}const n={...await s.finalToInternalResult(e),context:r};return(await this.actorInitQuery.mediatorQueryResultSerialize.mediate({context:r,handle:n,handleMediaType:t})).handle}invalidateHttpCache(e,t){return t=o.ActionContext.ensureActionContext(t),this.actorInitQuery.mediatorHttpInvalidate.mediate({url:e,context:t})}static internalToFinalResult(e){switch(e.type){case"bindings":return{resultType:"bindings",execute:async()=>e.bindingsStream,metadata:async()=>await e.metadata(),context:e.context};case"quads":return{resultType:"quads",execute:async()=>e.quadStream,metadata:async()=>await e.metadata(),context:e.context};case"boolean":return{resultType:"boolean",execute:async()=>e.execute(),context:e.context};case"void":return{resultType:"void",execute:async()=>e.execute(),context:e.context}}}static async finalToInternalResult(e){switch(e.resultType){case"bindings":return{type:"bindings",bindingsStream:await e.execute(),metadata:async()=>await e.metadata()};case"quads":return{type:"quads",quadStream:await e.execute(),metadata:async()=>await e.metadata()};case"boolean":return{type:"boolean",execute:()=>e.execute()};case"void":return{type:"void",execute:()=>e.execute()}}}}t.QueryEngineBase=s},96226:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.QueryEngineBase=void 0,i(r(4739),t),i(r(13757),t);var o=r(53451);Object.defineProperty(t,"QueryEngineBase",{enumerable:!0,get:function(){return o.QueryEngineBase}})},5309:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorOptimizeQueryOperationBgpToJoin=void 0;const n=r(9302),i=r(6789);class o extends n.ActorOptimizeQueryOperation{async test(e){return!0}async run(e){return{operation:i.Util.mapOperation(e.operation,{bgp:(e,t)=>({recurse:!1,result:t.createJoin(e.patterns)})}),context:e.context}}}t.ActorOptimizeQueryOperationBgpToJoin=o},1525:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(5309),t)},84778:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorOptimizeQueryOperationJoinBgp=void 0;const n=r(9302),i=r(6789);class o extends n.ActorOptimizeQueryOperation{async test(e){return!0}async run(e){return{operation:i.Util.mapOperation(e.operation,{join:(e,t)=>e.input.every((e=>"bgp"===e.type))?{recurse:!1,result:t.createBgp(e.input.flatMap((e=>e.patterns)))}:{recurse:!1,result:e}}),context:e.context}}}t.ActorOptimizeQueryOperationJoinBgp=o},68723:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(84778),t)},30230:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorOptimizeQueryOperationJoinConnected=void 0;const n=r(9302),i=r(6789);class o extends n.ActorOptimizeQueryOperation{async test(e){return!0}async run(e){return{operation:i.Util.mapOperation(e.operation,{join:(e,t)=>({recurse:!1,result:o.cluster(e,t)})}),context:e.context}}static cluster(e,t){let r,n=e.input.map((e=>({inScopeVariables:Object.fromEntries(i.Util.inScopeVariables(e).map((e=>[e.value,!0]))),entries:[e]})));do{r=n,n=o.clusterIteration(r)}while(r.length!==n.length);const a=n.map((e=>t.createJoin(e.entries)));return 1===a.length?a[0]:t.createJoin(a,!1)}static clusterIteration(e){const t=[];for(const r of e){let e=!1;for(const n of t)if(o.haveOverlappingVariables(r.inScopeVariables,n.inScopeVariables)){n.entries=[...n.entries,...r.entries],n.inScopeVariables={...n.inScopeVariables,...r.inScopeVariables},e=!0;break}e||t.push({inScopeVariables:r.inScopeVariables,entries:r.entries})}return t}static haveOverlappingVariables(e,t){for(const r of Object.keys(e))if(t[r])return!0;return!1}}t.ActorOptimizeQueryOperationJoinConnected=o},67768:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(30230),t)},83094:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationAsk=void 0;const n=r(83814);class i extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"ask")}async testOperation(e,t){return!0}async runOperation(e,t){const r=await this.mediatorQueryOperation.mediate({operation:e.input,context:t}),i=n.ActorQueryOperation.getSafeBindings(r);return{type:"boolean",execute:()=>new Promise(((e,t)=>{i.bindingsStream.once("data",(()=>{e(!0),i.bindingsStream.close()})),i.bindingsStream.on("end",(()=>e(!1))),i.bindingsStream.on("error",t)}))}}}t.ActorQueryOperationAsk=i},8589:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(83094),t)},51238:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationBgpJoin=void 0;const n=r(83814),i=r(6789);class o extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"bgp")}async testOperation(e,t){return!0}async runOperation(e,t){return this.mediatorQueryOperation.mediate({operation:o.FACTORY.createJoin(e.patterns),context:t})}}t.ActorQueryOperationBgpJoin=o,o.FACTORY=new i.Factory},44185:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(51238),t)},13804:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationConstruct=void 0;const n=r(83814),i=r(98086),o=r(6789),a=r(86031);class s extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"construct")}static getVariables(e){return(0,i.uniqTerms)([].concat.apply([],e.map((e=>(0,i.getVariables)((0,i.getTerms)(e))))))}async testOperation(e,t){return!0}async runOperation(e,t){const r=s.getVariables(e.template),i={type:o.Algebra.types.PROJECT,input:e.input,variables:r},u=n.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:i,context:t}));return{metadata:()=>u.metadata().then((t=>({...t,order:void 0,cardinality:{type:t.cardinality.type,value:t.cardinality.value*e.template.length},canContainUndefs:!1,availableOrders:void 0}))),quadStream:new a.BindingsToQuadsIterator(e.template,u.bindingsStream),type:"quads"}}}t.ActorQueryOperationConstruct=s},86031:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingsToQuadsIterator=void 0;const n=r(78664),i=r(91194),o=r(98086),a=new i.DataFactory;class s extends n.MultiTransformIterator{constructor(e,t,r=!0){super(t,{autoStart:!1}),this.template=e,this.localizeBlankNodes=r,this.blankNodeCounter=0}static bindTerm(e,t){return"Variable"===t.termType?e.get(t):t}static bindQuad(e,t){try{return(0,o.mapTerms)(t,(t=>{const r=s.bindTerm(e,t);if(!r)throw new Error("Unbound term");return r}))}catch{}}static localizeBlankNode(e,t){return"BlankNode"===t.termType?a.blankNode(`${t.value}${e}`):t}static localizeQuad(e,t){return(0,o.mapTerms)(t,(t=>s.localizeBlankNode(e,t)))}bindTemplate(e,t,r){let n=t.map((t=>s.bindQuad.bind(null,e)(t))).filter(Boolean);return this.localizeBlankNodes&&(n=n.map(s.localizeQuad.bind(null,r))),n}_createTransformer(e){return new n.ArrayIterator(this.bindTemplate(e,this.template,this.blankNodeCounter++))}}t.BindingsToQuadsIterator=s},32023:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(13804),t),i(r(86031),t)},6159:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationDescribeSubject=void 0;const n=r(54036),i=r(83814),o=r(78664),a=r(91194),s=r(6789),u=new a.DataFactory;class c extends i.ActorQueryOperationTypedMediated{constructor(e){super(e,"describe")}async testOperation(e,t){return!0}async runOperation(e,t){const r=e.terms.filter((e=>"Variable"!==e.termType)).map((e=>{const t=[u.quad(e,u.variable("__predicate"),u.variable("__object"))];return t.forEach((e=>e.type="pattern")),{input:{type:s.Algebra.types.BGP,patterns:t},template:t,type:"construct"}}));if(r.length!==e.terms.length){let t=[];e.terms.filter((e=>"Variable"===e.termType)).forEach(((e,r)=>{const n=[u.quad(e,u.variable(`__predicate${r}`),u.variable(`__object${r}`))];n.forEach((e=>e.type="pattern")),t=[...t,...n]})),r.push({input:{type:s.Algebra.types.JOIN,input:[e.input,{type:s.Algebra.types.BGP,patterns:t}]},template:t,type:s.Algebra.types.CONSTRUCT})}const a=(await Promise.all(r.map((e=>this.mediatorQueryOperation.mediate({operation:e,context:t}))))).map(i.ActorQueryOperation.getSafeQuads);return{type:"quads",quadStream:new o.UnionIterator(a.map((e=>e.quadStream)),{autoStart:!1}),metadata:()=>Promise.all(a.map((e=>e.metadata()))).then((e=>n.ActorQueryOperationUnion.unionMetadata(e,!1)))}}}t.ActorQueryOperationDescribeSubject=c},26245:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(6159),t)},39794:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationDistinctHash=void 0;const n=r(83814);class i extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"distinct")}async testOperation(e,t){return!0}async runOperation(e,t){const r=n.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:e.input,context:t}));return{type:"bindings",bindingsStream:r.bindingsStream.filter(await this.newHashFilter(t)),metadata:r.metadata}}async newHashFilter(e){const{hashFunction:t}=await this.mediatorHashBindings.mediate({allowHashCollisions:!0,context:e}),r={};return e=>{const n=t(e);return!(n in r)&&(r[n]=!0)}}}t.ActorQueryOperationDistinctHash=i},51245:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(39794),t)},50487:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationExtend=void 0;const n=r(79550),i=r(83814),o=r(13651);class a extends i.ActorQueryOperationTypedMediated{constructor(e){super(e,"extend")}async testOperation(e,t){return Boolean(new o.AsyncEvaluator(e.expression,i.ActorQueryOperation.getAsyncExpressionContext(t,this.mediatorQueryOperation))),!0}async runOperation(e,t){const{expression:r,input:a,variable:s}=e,u=i.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:a,context:t})),c={...i.ActorQueryOperation.getAsyncExpressionContext(t,this.mediatorQueryOperation)},l=new o.AsyncEvaluator(r,c),p=u.bindingsStream.transform({transform:async(e,r,i)=>{try{const t=await l.evaluate(e);i(e.set(s,t))}catch(r){(0,o.isExpressionError)(r)?(i(e),this.logWarn(t,`Expression error for extend operation with bindings '${(0,n.bindingsToString)(e)}'`)):p.emit("error",r)}r()}});return{type:"bindings",bindingsStream:p,async metadata(){const e=await u.metadata();return{...e,variables:[...e.variables,s]}}}}}t.ActorQueryOperationExtend=a},97320:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(50487),t)},25534:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationFilterSparqlee=void 0;const n=r(79550),i=r(83814),o=r(13651);class a extends i.ActorQueryOperationTypedMediated{constructor(e){super(e,"filter")}async testOperation(e,t){const r={...i.ActorQueryOperation.getAsyncExpressionContext(t,this.mediatorQueryOperation)};return new o.AsyncEvaluator(e.expression,r),!0}async runOperation(e,t){const r=await this.mediatorQueryOperation.mediate({operation:e.input,context:t}),a=i.ActorQueryOperation.getSafeBindings(r);i.ActorQueryOperation.validateQueryOutput(a,"bindings");const s={...i.ActorQueryOperation.getAsyncExpressionContext(t,this.mediatorQueryOperation)},u=new o.AsyncEvaluator(e.expression,s),c=a.bindingsStream.transform({transform:async(e,r,i)=>{try{await u.evaluateAsEBV(e)&&i(e)}catch(r){(0,o.isExpressionError)(r)?this.logWarn(t,"Error occurred while filtering.",(()=>({error:r,bindings:(0,n.bindingsToString)(e)}))):c.emit("error",r)}r()}});return{type:"bindings",bindingsStream:c,metadata:a.metadata}}}t.ActorQueryOperationFilterSparqlee=a},29403:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(25534),t)},85005:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationFromQuad=void 0;const n=r(83814),i=r(6789);class o extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"from")}static copyOperation(e,t){const r={};for(const n of Object.keys(e))Array.isArray(e[n])&&"template"!==n?r[n]="variables"===n?e[n]:e[n].map(t):o.ALGEBRA_TYPES.includes(e[n].type)?r[n]=t(e[n]):r[n]=e[n];return r}static applyOperationDefaultGraph(e,t){if("bgp"===e.type&&e.patterns.length>0||"path"===e.type||"pattern"===e.type){if("bgp"===e.type)return o.joinOperations(e.patterns.map((e=>{if("DefaultGraph"!==e.graph.termType)return o.FACTORY.createBgp([e]);const r=t.map((t=>o.FACTORY.createBgp([o.FACTORY.createPattern(e.subject,e.predicate,e.object,t)])));return o.unionOperations(r)})));if("DefaultGraph"!==e.graph.termType)return e;const r=t.map((t=>"path"===e.type?o.FACTORY.createPath(e.subject,e.predicate,e.object,t):o.FACTORY.createPattern(e.subject,e.predicate,e.object,t)));return o.unionOperations(r)}return o.copyOperation(e,(e=>this.applyOperationDefaultGraph(e,t)))}static applyOperationNamedGraph(e,t,r){if("bgp"===e.type&&e.patterns.length>0||"path"===e.type||"pattern"===e.type){const n="bgp"===e.type?e.patterns[0].graph:e.graph;if("DefaultGraph"===n.termType)return{type:i.Algebra.types.BGP,patterns:[]};if("Variable"===n.termType){if(1===t.length){const r=t[0],i={};i[`?${n.value}`]=r;const a=o.FACTORY.createValues([n],[i]);let s;return s="bgp"===e.type?o.FACTORY.createBgp(e.patterns.map((e=>o.FACTORY.createPattern(e.subject,e.predicate,e.object,r)))):"path"===e.type?o.FACTORY.createPath(e.subject,e.predicate,e.object,r):o.FACTORY.createPattern(e.subject,e.predicate,e.object,r),o.FACTORY.createJoin([a,s])}return o.unionOperations(t.map((t=>o.applyOperationNamedGraph(e,[t],r))))}return[...t,...r].some((e=>e.equals(n)))?e:{type:i.Algebra.types.BGP,patterns:[]}}return o.copyOperation(e,(e=>this.applyOperationNamedGraph(e,t,r)))}static joinOperations(e){if(1===e.length)return e[0];if(e.length>1)return o.FACTORY.createJoin(e);throw new Error("A join can only be applied on at least one operation")}static unionOperations(e){if(1===e.length)return e[0];if(e.length>1)return o.FACTORY.createUnion(e);throw new Error("A union can only be applied on at least one operation")}static createOperation(e){let t=e.input;return e.default.length>0&&(t=o.applyOperationDefaultGraph(t,e.default)),(e.named.length>0||e.default.length>0)&&(t=o.applyOperationNamedGraph(t,e.named,e.default)),t}async testOperation(e,t){return!0}async runOperation(e,t){const r=o.createOperation(e);return this.mediatorQueryOperation.mediate({operation:r,context:t})}}t.ActorQueryOperationFromQuad=o,o.FACTORY=new i.Factory,o.ALGEBRA_TYPES=Object.keys(i.Algebra.types).map((e=>i.Algebra.types[e]))},17877:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(85005),t)},90323:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationGroup=void 0;const n=r(83814),i=r(78664),o=r(13651),a=r(29749);class s extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"group")}async testOperation(e,t){for(const r of e.aggregates)new o.AsyncEvaluator(r.expression,n.ActorQueryOperation.getAsyncExpressionContext(t));return!0}async runOperation(e,t){const{hashFunction:r}=await this.mediatorHashBindings.mediate({allowHashCollisions:!0,context:t}),{input:o,aggregates:s}=e,u=await this.mediatorQueryOperation.mediate({operation:o,context:t}),c=n.ActorQueryOperation.getSafeBindings(u),l=[...e.variables,...s.map((e=>e.variable))],p=n.ActorQueryOperation.getAsyncExpressionContext(t);return new Promise(((t,n)=>{const o=new a.GroupsState(r,e,p);c.bindingsStream.on("end",(async()=>{try{const e=new i.ArrayIterator(await o.collectResults(),{autoStart:!1});t({type:"bindings",bindingsStream:e,metadata:async()=>({...await c.metadata(),variables:l})})}catch(e){n(e)}})),c.bindingsStream.on("error",n),c.bindingsStream.on("data",(e=>{o.consumeBindings(e).catch(n)}))}))}}t.ActorQueryOperationGroup=s},29749:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GroupsState=void 0;const n=r(79550),i=r(91194),o=r(13651),a=new i.DataFactory,s=new n.BindingsFactory;t.GroupsState=class{constructor(e,t,r){this.hashFunction=e,this.pattern=t,this.sparqleeConfig=r,this.groups=new Map,this.groupsInitializer=new Map,this.groupVariables=new Set(this.pattern.variables.map((e=>e.value))),this.distinctHashes=t.aggregates.some((({distinct:e})=>e))?new Map:null,this.waitCounter=1,this.resultHasBeenCalled=!1}consumeBindings(e){const t=this.resultCheck();if(t)return t;this.waitCounter++;const r=e.filter(((e,t)=>this.groupVariables.has(t.value))),n=this.hashBindings(r);let i,a=this.groupsInitializer.get(n);if(a){const t=a;i=(async()=>{const r=await t;await Promise.all(this.pattern.aggregates.map((async t=>{if(t.distinct){const t=this.hashBindings(e);if(this.distinctHashes.get(n).has(t))return;this.distinctHashes.get(n).add(t)}const i=t.variable.value;await r.aggregators[i].put(e)})))})().then((()=>{this.subtractWaitCounterAndCollect()}))}else a=(async()=>{const t={};if(await Promise.all(this.pattern.aggregates.map((async r=>{const n=r.variable.value;t[n]=new o.AsyncAggregateEvaluator(r,this.sparqleeConfig),await t[n].put(e)}))),this.distinctHashes){const t=this.hashBindings(e);this.distinctHashes.set(n,new Set([t]))}const i={aggregators:t,bindings:r};return this.groups.set(n,i),this.subtractWaitCounterAndCollect(),i})(),this.groupsInitializer.set(n,a),i=a;return i}subtractWaitCounterAndCollect(){0==--this.waitCounter&&this.handleResultCollection()}handleResultCollection(){let e=[...this.groups].map((([e,t])=>{const{bindings:r,aggregators:n}=t;let i=r;for(const e in n){const t=n[e].result();t&&(i=i.set(a.variable(e),t))}return i}));if(0===e.length&&0===this.groupVariables.size){const t=[];for(const e of this.pattern.aggregates){const r=e.variable,n=o.AsyncAggregateEvaluator.emptyValue(e);void 0!==n&&t.push([r,n])}e=[s.bindings(t)]}this.waitResolver(e)}resultCheck(){if(this.resultHasBeenCalled)return Promise.reject(new Error("Calling any function after calling collectResult is invalid."))}collectResults(){const e=this.resultCheck();if(e)return e;this.resultHasBeenCalled=!0;const t=new Promise((e=>{this.waitResolver=e}));return this.subtractWaitCounterAndCollect(),t}hashBindings(e){return this.hashFunction(e)}}},7375:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(90323),t)},54017:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationJoin=void 0;const n=r(83814);class i extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"join")}async testOperation(e,t){return!0}async runOperation(e,t){const r=(await Promise.all(e.input.map((async e=>({output:await this.mediatorQueryOperation.mediate({operation:e,context:t}),operation:e}))))).map((({output:e,operation:t})=>({output:n.ActorQueryOperation.getSafeBindings(e),operation:t})));return this.mediatorJoin.mediate({type:"inner",entries:r,context:t})}}t.ActorQueryOperationJoin=i},1513:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(54017),t)},9507:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationLeftJoin=void 0;const n=r(83814),i=r(13651);class o extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"leftjoin")}async testOperation(e,t){return!0}async runOperation(e,t){const r=(await Promise.all(e.input.map((async e=>({output:await this.mediatorQueryOperation.mediate({operation:e,context:t}),operation:e}))))).map((({output:e,operation:t})=>({output:n.ActorQueryOperation.getSafeBindings(e),operation:t}))),o=await this.mediatorJoin.mediate({type:"optional",entries:r,context:t});if(e.expression){const r={...n.ActorQueryOperation.getAsyncExpressionContext(t)},a=new i.AsyncEvaluator(e.expression,r),s=o.bindingsStream.transform({autoStart:!1,transform:async(e,r,n)=>{try{await a.evaluateAsEBV(e)&&n(e)}catch(r){(0,i.isExpressionError)(r)?this.logWarn(t,"Error occurred while filtering.",(()=>({error:r,bindings:e}))):s.emit("error",r)}r()}});o.bindingsStream=s}return o}}t.ActorQueryOperationLeftJoin=o},42678:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(9507),t)},41085:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationMinus=void 0;const n=r(83814);class i extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"minus")}async testOperation(e,t){return!0}async runOperation(e,t){const r=(await Promise.all(e.input.map((async e=>({output:await this.mediatorQueryOperation.mediate({operation:e,context:t}),operation:e}))))).map((({output:e,operation:t})=>({output:n.ActorQueryOperation.getSafeBindings(e),operation:t})));return this.mediatorJoin.mediate({type:"minus",entries:r,context:t})}}t.ActorQueryOperationMinus=i},21530:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(41085),t)},2217:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationNop=void 0;const n=r(79550),i=r(83814),o=r(78664),a=new n.BindingsFactory;class s extends i.ActorQueryOperationTypedMediated{constructor(e){super(e,"nop")}async testOperation(e,t){return!0}async runOperation(e,t){return{bindingsStream:new o.SingletonIterator(a.bindings()),metadata:()=>Promise.resolve({cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]}),type:"bindings"}}}t.ActorQueryOperationNop=s},24675:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(2217),t)},46091:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationOrderBySparqlee=void 0;const n=r(83814),i=r(6789),o=r(13651),a=r(81328);class s extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"orderby"),this.window=e.window??Number.POSITIVE_INFINITY}async testOperation(e,t){for(let r of e.expressions)r=this.extractSortExpression(r),new o.AsyncEvaluator(r,n.ActorQueryOperation.getAsyncExpressionContext(t));return!0}async runOperation(e,t){const r=await this.mediatorQueryOperation.mediate({operation:e.input,context:t}),i=n.ActorQueryOperation.getSafeBindings(r),s={window:this.window},u={...n.ActorQueryOperation.getAsyncExpressionContext(t)};let{bindingsStream:c}=i;for(let t=e.expressions.length-1;t>=0;t--){let r=e.expressions[t];const n=this.isAscending(r);r=this.extractSortExpression(r);const i=new o.AsyncEvaluator(r,u),l=async(e,t,r)=>{try{r({bindings:e,result:await i.evaluate(e)})}catch(t){(0,o.isExpressionError)(t)||c.emit("error",t),r({bindings:e,result:void 0})}t()},p=c.transform({transform:l}),d=new a.SortIterator(p,((e,t)=>(0,o.orderTypes)(e.result,t.result,n)),s);c=d.map((({bindings:e,result:t})=>e))}return{type:"bindings",bindingsStream:c,metadata:i.metadata}}extractSortExpression(e){const{expressionType:t,operator:r}=e;return t!==i.Algebra.expressionTypes.OPERATOR?e:"desc"===r?e.args[0]:e}isAscending(e){const{expressionType:t,operator:r}=e;return t!==i.Algebra.expressionTypes.OPERATOR||"desc"!==r}}t.ActorQueryOperationOrderBySparqlee=s},81328:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SortIterator=void 0;const n=r(78664);class i extends n.TransformIterator{constructor(e,t,r){super(e,r);const n=r&&r.window;this.windowLength=Number.isFinite(n)&&n>0?n:Number.POSITIVE_INFINITY,this.sort=t,this.sorted=[]}_read(e,t){let r,{length:n}=this.sorted;for(;n!==this.windowLength&&(r=this.source.read(),null!==r);){let e,t,i=0,o=n-1;for(;i<=o;)e=Math.trunc((i+o)/2),t=this.sort(r,this.sorted[e]),t<0?i=e+1:t>0?o=e-1:(i=e,o=-1);this.sorted.splice(i,0,r),n++}n===this.windowLength&&this._push(this.sorted.pop()),t()}_flush(e){let{length:t}=this.sorted;for(;t--;)this._push(this.sorted.pop());e()}}t.SortIterator=i},3438:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(46091),t)},18484:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationPathAlt=void 0;const n=r(26622),i=r(54036),o=r(83814),a=r(78664),s=r(6789);class u extends n.ActorAbstractPath{constructor(e){super(e,s.Algebra.types.ALT)}async runOperation(e,t){const r=e.predicate,s=(await Promise.all(r.input.map((r=>this.mediatorQueryOperation.mediate({context:t,operation:n.ActorAbstractPath.FACTORY.createPath(e.subject,r,e.object,e.graph)}))))).map(o.ActorQueryOperation.getSafeBindings);return{type:"bindings",bindingsStream:new a.UnionIterator(s.map((e=>e.bindingsStream)),{autoStart:!1}),metadata:()=>Promise.all(s.map((e=>e.metadata()))).then((e=>i.ActorQueryOperationUnion.unionMetadata(e,!0)))}}}t.ActorQueryOperationPathAlt=u},956:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(18484),t)},10906:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationPathInv=void 0;const n=r(26622),i=r(6789);class o extends n.ActorAbstractPath{constructor(e){super(e,i.Algebra.types.INV)}async runOperation(e,t){const r=e.predicate,i=n.ActorAbstractPath.FACTORY.createPath(e.object,r.path,e.subject,e.graph);return this.mediatorQueryOperation.mediate({operation:i,context:t})}}t.ActorQueryOperationPathInv=o},60283:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(10906),t)},76814:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationPathLink=void 0;const n=r(26622),i=r(6789);class o extends n.ActorAbstractPath{constructor(e){super(e,i.Algebra.types.LINK)}async runOperation(e,t){const r=e.predicate,i=n.ActorAbstractPath.FACTORY.createPattern(e.subject,r.iri,e.object,e.graph);return this.mediatorQueryOperation.mediate({operation:i,context:t})}}t.ActorQueryOperationPathLink=o},2450:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(76814),t)},87665:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationPathNps=void 0;const n=r(26622),i=r(83814),o=r(6789);class a extends n.ActorAbstractPath{constructor(e){super(e,o.Algebra.types.NPS)}async runOperation(e,t){const r=e.predicate,o=this.generateVariable(e),a=n.ActorAbstractPath.FACTORY.createPattern(e.subject,o,e.object,e.graph),s=i.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:a,context:t}));return{type:"bindings",bindingsStream:s.bindingsStream.transform({filter:e=>!r.iris.some((t=>t.equals(e.get(o)))),transform(e,t,r){r(e.delete(o)),t()}}),metadata:s.metadata}}}t.ActorQueryOperationPathNps=a},14985:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(87665),t)},25455:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationPathOneOrMore=void 0;const n=r(26622),i=r(79550),o=r(83814),a=r(78664),s=r(6789),u=new i.BindingsFactory;class c extends n.ActorAbstractPath{constructor(e){super(e,s.Algebra.types.ONE_OR_MORE_PATH)}async runOperation(e,t){const r=await this.isPathArbitraryLengthDistinct(t,e);if(r.operation)return r.operation;t=r.context;const i=e.predicate;if("Variable"!==e.subject.termType&&"Variable"===e.object.termType){const r=n.ActorAbstractPath.FACTORY.createDistinct(n.ActorAbstractPath.FACTORY.createPath(e.subject,i.path,e.object,e.graph)),s=o.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:t,operation:r})),c=e.object,l={},p=new a.MultiTransformIterator(s.bindingsStream,{multiTransform:r=>{const n=r.get(c),o="Variable"===e.graph.termType?r.get(e.graph):e.graph;return new a.TransformIterator((async()=>{const r=new a.BufferedIterator;return await this.getObjectsPredicateStar(n,i.path,e.graph,t,l,r,{count:0}),r.transform({transform(t,r,n){let i=u.bindings([[c,t]]);"Variable"===e.graph.termType&&(i=i.set(e.graph,o)),n(i),r()}})}),{maxBufferSize:128})},autoStart:!1}),d="Variable"===e.graph.termType?[c,e.graph]:[c];return{type:"bindings",bindingsStream:p,metadata:async()=>({...await s.metadata(),variables:d})}}if("Variable"===e.subject.termType&&"Variable"===e.object.termType){const r=n.ActorAbstractPath.FACTORY.createDistinct(n.ActorAbstractPath.FACTORY.createPath(e.subject,e.predicate.path,e.object,e.graph)),s=o.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:t,operation:r})),u=e.subject,c=e.object,l={},p=new a.MultiTransformIterator(s.bindingsStream,{multiTransform:r=>{const n=r.get(u),o=r.get(c),s="Variable"===e.graph.termType?r.get(e.graph):e.graph;return new a.TransformIterator((async()=>{const r=new a.BufferedIterator;return await this.getSubjectAndObjectBindingsPredicateStar(u,c,n,o,i.path,s,t,l,{},r,{count:0}),r.transform({transform(t,r,n){"Variable"===e.graph.termType&&(t=t.set(e.graph,s)),n(t),r()}})}),{maxBufferSize:128})},autoStart:!1}),d="Variable"===e.graph.termType?[u,c,e.graph]:[u,c];return{type:"bindings",bindingsStream:p,metadata:async()=>({...await s.metadata(),variables:d})}}if("Variable"===e.subject.termType&&"Variable"!==e.object.termType)return this.mediatorQueryOperation.mediate({context:t,operation:n.ActorAbstractPath.FACTORY.createPath(e.object,n.ActorAbstractPath.FACTORY.createOneOrMorePath(n.ActorAbstractPath.FACTORY.createInv(i.path)),e.subject,e.graph)});const s=this.generateVariable(),c=o.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:t,operation:n.ActorAbstractPath.FACTORY.createPath(e.subject,i,s,e.graph)}));return{type:"bindings",bindingsStream:c.bindingsStream.transform({filter:t=>e.object.equals(t.get(s)),transform(t,r,n){n("Variable"===e.graph.termType?u.bindings([[e.graph,t.get(e.graph)]]):u.bindings()),r()}}),metadata:async()=>({...await c.metadata(),variables:"Variable"===e.graph.termType?[e.graph]:[]})}}}t.ActorQueryOperationPathOneOrMore=c},53346:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(25455),t)},41551:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationPathSeq=void 0;const n=r(26622),i=r(83814),o=r(6789);class a extends n.ActorAbstractPath{constructor(e){super(e,o.Algebra.types.SEQ)}async runOperation(e,t){const r=e.predicate;let o=e.subject;const a=[],s=await Promise.all(r.input.map(((i,s)=>{const u=s===r.input.length-1?e.object:this.generateVariable(e,`b${s}`),c=n.ActorAbstractPath.FACTORY.createPath(o,i,u,e.graph),l=this.mediatorQueryOperation.mediate({context:t,operation:c});return o=u,s<r.input.length-1&&a.push(u),{output:l,operation:c}})).map((async({output:e,operation:t})=>({output:i.ActorQueryOperation.getSafeBindings(await e),operation:t})))),u=i.ActorQueryOperation.getSafeBindings(await this.mediatorJoin.mediate({type:"inner",entries:s,context:t}));return{type:"bindings",bindingsStream:u.bindingsStream.transform({transform(e,t,r){for(const t of a)e=e.delete(t);r(e),t()}}),async metadata(){const e=await u.metadata(),t=e.variables.filter((e=>!a.some((t=>t.value===e.value))));return{...e,variables:t}}}}}t.ActorQueryOperationPathSeq=a},14059:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(41551),t)},17520:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationPathZeroOrMore=void 0;const n=r(26622),i=r(79550),o=r(83814),a=r(78664),s=r(6053),u=r(6789),c=new i.BindingsFactory;class l extends n.ActorAbstractPath{constructor(e){super(e,u.Algebra.types.ZERO_OR_MORE_PATH)}async runOperation(e,t){const r=await this.isPathArbitraryLengthDistinct(t,e);if(r.operation)return r.operation;t=r.context;const i=e.predicate,u="Variable"===e.subject.termType,l="Variable"===e.object.termType;if("Variable"===e.subject.termType&&"Variable"===e.object.termType){const r=this.generateVariable(e),u=n.ActorAbstractPath.FACTORY.createPattern(e.subject,r,e.object,e.graph),c=o.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:t,operation:u})),l=e.subject,p=e.object,d=new Set,f={},h=new a.MultiTransformIterator(c.bindingsStream,{multiTransform:r=>{const n=r.get(l),o=r.get(p),u="Variable"===e.graph.termType?r.get(e.graph):e.graph,c=(0,s.termToString)(n)+(0,s.termToString)(u),h=(0,s.termToString)(o)+(0,s.termToString)(u);return new a.TransformIterator((async()=>{if(d.has(c)&&d.has(h))return new a.EmptyIterator;const r=new a.BufferedIterator,s={count:0};return d.has(c)||(d.add(c),await this.getSubjectAndObjectBindingsPredicateStar(l,p,n,n,i.path,u,t,f,{},r,s)),d.has(h)||(d.add(h),await this.getSubjectAndObjectBindingsPredicateStar(l,p,o,o,i.path,u,t,f,{},r,s)),r.transform({transform(t,r,n){"Variable"===e.graph.termType&&(t=t.set(e.graph,u)),n(t),r()}})}))}}),y="Variable"===e.graph.termType?[l,e.object,e.graph]:[l,e.object];return{type:"bindings",bindingsStream:h,metadata:async()=>({...await c.metadata(),variables:y})}}if(!u&&!l){const r=this.generateVariable(),n=await this.getObjectsPredicateStarEval(e.subject,r,i.path,e.graph,t);return{type:"bindings",bindingsStream:n.bindingsStream.transform({filter:t=>e.object.equals(t.get(r)),transform(t,r,n){n("Variable"===e.graph.termType?c.bindings([[e.graph,t.get(e.graph)]]):c.bindings()),r()}}),metadata:async()=>({...await n.metadata(),variables:"Variable"===e.graph.termType?[e.graph]:[]})}}const p=u?e.object:e.subject,d=u?e.subject:e.object,f=u?n.ActorAbstractPath.FACTORY.createInv(i.path):i.path,h=await this.getObjectsPredicateStarEval(p,d,f,e.graph,t),y=h.bindingsStream.transform({transform(e,t,r){r(e),t()}}),g="Variable"===e.graph.termType?[d,e.graph]:[d];return{type:"bindings",bindingsStream:y,metadata:async()=>({...await h.metadata(),variables:g})}}}t.ActorQueryOperationPathZeroOrMore=l},54945:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(17520),t)},34584:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationPathZeroOrOne=void 0;const n=r(26622),i=r(79550),o=r(83814),a=r(78664),s=r(6789),u=new i.BindingsFactory;class c extends n.ActorAbstractPath{constructor(e){super(e,s.Algebra.types.ZERO_OR_ONE_PATH)}async runOperation(e,t){const r=e.predicate,i="Variable"===e.subject.termType,s="Variable"===e.object.termType,c=[];if(!i&&!s&&e.subject.equals(e.object))return{type:"bindings",bindingsStream:new a.SingletonIterator(u.bindings()),metadata:()=>Promise.resolve({cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]})};if(i&&s)throw new Error("ZeroOrOne path expressions with 2 variables not supported yet");const l=await this.isPathArbitraryLengthDistinct(t,e);if(l.operation)return l.operation;t=l.context,"Variable"===e.subject.termType&&c.push(u.bindings([[e.subject,e.object]])),"Variable"===e.object.termType&&c.push(u.bindings([[e.object,e.subject]]));const p=o.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({context:t,operation:n.ActorAbstractPath.FACTORY.createPath(e.subject,r.path,e.object,e.graph)}));return{type:"bindings",bindingsStream:p.bindingsStream.prepend(c),metadata:p.metadata}}}t.ActorQueryOperationPathZeroOrOne=c},39079:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(34584),t)},22354:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationProject=void 0;const n=r(83814),i=r(27057),o=new(r(91194).DataFactory);class a extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"project")}async testOperation(e,t){return!0}async runOperation(e,t){const r=n.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:e.input,context:t})),a=await r.metadata(),s=e.variables,u=a.variables.filter((e=>!s.some((t=>e.value===t.value)))),c=s.filter((e=>!a.variables.some((t=>e.value===t.value))));if(c.length>0)throw new Error(`Variables '${c.map((e=>`?${e.value}`))}' are used in the projection result, but are not assigned.`);let l=0===u.length?r.bindingsStream:r.bindingsStream.transform({map(e){for(const t of u)e=e.delete(t);return e},autoStart:!1}),p=0;return l=l.transform({map(e){p++;const t=new Map;return e.map((e=>{if(e instanceof i.BlankNodeBindingsScoped){let r=t.get(e.value);return r||(r=o.blankNode(`${e.value}${p}`),t.set(e.value,r)),r}return e}))},autoStart:!1}),{type:"bindings",bindingsStream:l,metadata:async()=>({...a,variables:s})}}}t.ActorQueryOperationProject=a},82491:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(22354),t)},17536:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationQuadpattern=void 0;const n=r(79550),i=r(83814),o=r(78470),a=r(78664),s=r(91194),u=r(98086),c=r(6789),l=new n.BindingsFactory,p=new s.DataFactory,d=new c.Factory;class f extends i.ActorQueryOperationTyped{constructor(e){super(e,"pattern")}static isTermVariable(e){return"Variable"===e.termType}static getVariables(e){return(0,u.uniqTerms)((0,u.getTerms)(e).filter(f.isTermVariable))}static getDuplicateElementLinks(e){const t={};let r=!1;for(const n of u.QUAD_TERM_NAMES)if("Variable"===e[n].termType){const i=e[n].value,o=(t[i]||(t[i]=[])).push(n);r=r||o>1}if(!r)return;const n={};for(const e in t){const r=t[e],i=r.slice(1);i.length>0&&(n[r[0]]=i)}return n}static validateMetadata(e){for(const t of["cardinality","canContainUndefs"])if(!(t in e))throw new Error(`Invalid metadata: missing ${t} in ${JSON.stringify(e)}`);return e}static getMetadata(e,t,r){return()=>new Promise(((t,r)=>{e.getProperty("metadata",(e=>t(e))),e.on("error",r)})).then((e=>("canContainUndefs"in e||(e.canContainUndefs=!1),f.quadsMetadataToBindingsMetadata(f.validateMetadata(e),t,r))))}static quadsMetadataToBindingsMetadata(e,t,r){return{...e,order:e.order?f.quadsOrderToBindingsOrder(e.order,t):void 0,availableOrders:e.availableOrders?e.availableOrders.map((e=>({cost:e.cost,terms:f.quadsOrderToBindingsOrder(e.terms,t)}))):void 0,variables:r}}static quadsOrderToBindingsOrder(e,t){const r={};return e.map((e=>{const n=t[e.term];if(n&&!r[n])return r[n]=!0,{term:p.variable(n),direction:e.direction}})).filter((e=>Boolean(e)))}async testOperation(e,t){return!0}async runOperation(e,t){e.context&&(t=t.merge(e.context));let r=e;const n=this.unionDefaultGraph||t.get(o.KeysQueryOperation.unionDefaultGraph);"DefaultGraph"===e.graph.termType&&n&&(r=d.createPattern(e.subject,e.predicate,e.object,p.variable("__comunica:defaultGraph")));const i=await this.mediatorResolveQuadPattern.mediate({pattern:r,context:t}),s=f.getVariables(e),c=(0,u.reduceTerms)(e,((e,t,r)=>("Variable"===t.termType&&(e[r]=t.value),e)),{}),h=(e,t,r)=>{const n=c[r];return n&&e.push([p.variable(n),t]),e},y=f.getMetadata(i.data,c,s);return{type:"bindings",bindingsStream:new a.TransformIterator((async()=>{let t=i.data;const r=f.getDuplicateElementLinks(e);return"Variable"!==e.graph.termType||n||(t=t.filter((e=>"DefaultGraph"!==e.graph.termType))),r&&(t=t.filter((e=>{for(const t of u.TRIPLE_TERM_NAMES)for(const n of r[t]||[])if(!e[t].equals(e[n]))return!1;return!0}))),t.map((e=>l.bindings((0,u.reduceTerms)(e,h,[]))))}),{autoStart:!1}),metadata:y}}}t.ActorQueryOperationQuadpattern=f},63632:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(17536),t)},53128:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationReducedHash=void 0;const n=r(83814),i=r(77105);class o extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"reduced")}async testOperation(e,t){return!0}async runOperation(e,t){const r=n.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:e.input,context:t}));return{type:"bindings",bindingsStream:r.bindingsStream.filter(await this.newHashFilter(t)),metadata:r.metadata}}async newHashFilter(e){const{hashFunction:t}=await this.mediatorHashBindings.mediate({allowHashCollisions:!0,context:e}),r=new i({max:this.cacheSize});return e=>{const n=t(e);return!r.has(n)&&r.set(n,!0)}}}t.ActorQueryOperationReducedHash=o},86019:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(53128),t)},86013:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationService=void 0;const n=r(79550),i=r(83814),o=r(78470),a=r(78664),s=new n.BindingsFactory;class u extends i.ActorQueryOperationTypedMediated{constructor(e){super(e,"service")}async testOperation(e,t){if("NamedNode"!==e.name.termType)throw new Error(`${this.name} can only query services by IRI, while a ${e.name.termType} was given.`);return!0}async runOperation(e,t){const r=e.name.value;let n=t.delete(o.KeysRdfResolveQuadPattern.source).delete(o.KeysRdfResolveQuadPattern.sources).delete(o.KeysInitQuery.queryString);const u=this.forceSparqlEndpoint?"sparql":void 0;let c;n=n.set(o.KeysRdfResolveQuadPattern.sources,[{type:u,value:r}]);try{c=i.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:e.input,context:n}))}catch(t){if(!e.silent)throw t;c={bindingsStream:new a.SingletonIterator(s.bindings()),type:"bindings",metadata:async()=>({cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]})}}return c}}t.ActorQueryOperationService=u},85900:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(86013),t)},60720:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationSlice=void 0;const n=r(83814),i=r(78470);class o extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"slice")}async testOperation(e,t){return!0}async runOperation(e,t){e.length&&(t=t.set(i.KeysQueryOperation.limitIndicator,e.length));const r=await this.mediatorQueryOperation.mediate({operation:e.input,context:t});if("bindings"===r.type)return{type:"bindings",bindingsStream:this.sliceStream(r.bindingsStream,e),metadata:this.sliceMetadata(r,e)};if("quads"===r.type)return{type:"quads",quadStream:this.sliceStream(r.quadStream,e),metadata:this.sliceMetadata(r,e)};throw new Error(`Invalid query output type: Expected 'bindings' or 'quads' but got '${r.type}'`)}sliceStream(e,t){const r=Boolean(t.length)||0===t.length,{start:n}=t,i=r?t.start+t.length-1:Number.POSITIVE_INFINITY;return e.transform({offset:n,limit:Math.max(i-n+1,0),autoStart:!1})}sliceMetadata(e,t){const r=Boolean(t.length)||0===t.length;return()=>e.metadata().then((e=>{const n={...e.cardinality};return Number.isFinite(n.value)&&(n.value=Math.max(0,n.value-t.start),r&&(n.value=Math.min(n.value,t.length))),{...e,cardinality:n}}))}}t.ActorQueryOperationSlice=o},86069:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(60720),t)},36170:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationSparqlEndpoint=void 0;const n=r(79550),i=r(83814),o=r(58392),a=r(58595),s=r(78470),u=r(78664),c=r(88436),l=r(91194),p=r(6789),d=new n.BindingsFactory,f=new l.DataFactory;class h extends i.ActorQueryOperation{constructor(e){super(e),this.endpointFetcher=new c.SparqlEndpointFetcher({method:e.forceHttpGet?"GET":"POST",fetch:(e,t)=>this.mediatorHttp.mediate({input:e,init:t,context:this.lastContext}),prefixVariableQuestionMark:!0})}async test(e){if(!e.operation)throw new Error("Missing field 'operation' in a query operation action.");const t=(0,o.getContextSourceFirst)(e.context),r=(0,a.getContextDestinationFirst)(e.context),n=t?(0,o.getDataSourceType)(t):void 0,i=r?(0,a.getDataDestinationType)(r):void 0,s=t?(0,o.getDataSourceValue)(t):void 0,u=r?(0,a.getDataDestinationValue)(r):void 0;if(t&&"sparql"===n&&(!r||"sparql"===i&&u===s)||t&&!n&&(!r||!i&&u===s)&&"string"==typeof s&&(this.checkUrlSuffixSparql&&s.endsWith("/sparql")||this.checkUrlSuffixUpdate&&s.endsWith("/update")))return{httpRequests:1};throw new Error(`${this.name} requires a single source with a 'sparql' endpoint to be present in the context or URL ending on /sparql or /update.`)}async run(e){const t=(0,o.getContextSourceFirst)(e.context);if(!t)throw new Error("Illegal state: undefined sparql endpoint source.");const r=(0,o.getDataSourceValue)(t);let n,i,a;this.lastContext=e.context;try{n=e.context.get(s.KeysInitQuery.queryString)??(0,p.toSparql)(e.operation),i=this.endpointFetcher.getQueryType(n),"UNKNOWN"===i&&(i=this.endpointFetcher.getUpdateTypes(n))}catch{}switch(i&&"UNKNOWN"!==i||(a=p.Util.inScopeVariables(e.operation),n=(0,p.toSparql)(h.FACTORY.createProject(e.operation,a)),i="SELECT"),i){case"SELECT":return a||(a=p.Util.inScopeVariables(e.operation)),this.executeQuery(r,n,!1,a);case"CONSTRUCT":return this.executeQuery(r,n,!0);case"ASK":return{type:"boolean",execute:()=>this.endpointFetcher.fetchAsk(r,n)};default:return{type:"void",execute:()=>this.endpointFetcher.fetchUpdate(r,n)}}}executeQuery(e,t,r,n){const i=r?this.endpointFetcher.fetchTriples(e,t):this.endpointFetcher.fetchBindings(e,t);let o=0;const a=(0,u.wrap)(i,{autoStart:!1,maxBufferSize:Number.POSITIVE_INFINITY}).map((e=>(o++,r?e:d.bindings(Object.entries(e).map((([e,t])=>[f.variable(e.slice(1)),t]))))));i.then((e=>e.on("end",(()=>a.emit("metadata",{cardinality:{type:"exact",value:o},canContainUndefs:!0,variables:n})))),(()=>{}));const s=h.cachifyMetadata((()=>new Promise(((e,t)=>{a._fillBuffer(),a.on("error",t),a.on("end",(()=>t(new Error("No metadata was found")))),a.on("metadata",e)}))));return r?{type:"quads",quadStream:a,metadata:s}:{type:"bindings",bindingsStream:a,metadata:s}}}t.ActorQueryOperationSparqlEndpoint=h,h.FACTORY=new p.Factory},71111:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(36170),t)},52700:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationUnion=void 0;const n=r(83814),i=r(78664),o=r(98086);class a extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"union")}static unionVariables(e){return(0,o.uniqTerms)(e.flat())}static unionMetadata(e,t){const r={type:"exact",value:0};for(const t of e){if(!(t.cardinality.value&&Number.isFinite(t.cardinality.value)||0===t.cardinality.value)){r.type="estimate",r.value=Number.POSITIVE_INFINITY;break}"estimate"===t.cardinality.type&&(r.type="estimate"),r.value+=t.cardinality.value}const n={cardinality:r,canContainUndefs:e.some((e=>e.canContainUndefs))};return t?(n.variables=a.unionVariables(e.map((e=>e.variables))),n):n}async testOperation(e,t){return!0}async runOperation(e,t){const r=(await Promise.all(e.input.map((e=>this.mediatorQueryOperation.mediate({operation:e,context:t}))))).map(n.ActorQueryOperation.getSafeBindings);return{type:"bindings",bindingsStream:new i.UnionIterator(r.map((e=>e.bindingsStream)),{autoStart:!1}),metadata:()=>Promise.all(r.map((e=>e.metadata()))).then((e=>a.unionMetadata(e,!0)))}}}t.ActorQueryOperationUnion=a},54036:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(52700),t)},40433:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationAddRewrite=void 0;const n=r(83814),i=r(91194),o=r(6789),a=new i.DataFactory;class s extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"add"),this.factory=new o.Factory}async testOperation(e,t){return n.ActorQueryOperation.throwOnReadOnly(t),!0}runOperation(e,t){const r="DEFAULT"===e.destination?a.defaultGraph():e.destination,n="DEFAULT"===e.source?a.defaultGraph():e.source,i=this.factory.createDeleteInsert(void 0,[this.factory.createPattern(a.variable("s"),a.variable("p"),a.variable("o"),r)],this.factory.createPattern(a.variable("s"),a.variable("p"),a.variable("o"),n));return this.mediatorQueryOperation.mediate({operation:i,context:t})}}t.ActorQueryOperationAddRewrite=s},46270:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(40433),t)},56477:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationClear=void 0;const n=r(83814),i=new(r(91194).DataFactory);class o extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"clear")}async testOperation(e,t){return n.ActorQueryOperation.throwOnReadOnly(t),!0}async runOperation(e,t){let r;r="DEFAULT"===e.source?i.defaultGraph():"string"==typeof e.source?e.source:[e.source];const{execute:n}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:r,requireExistence:!e.silent,dropGraphs:!1},context:t});return{type:"void",execute:n}}}t.ActorQueryOperationClear=o},71103:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(56477),t)},36360:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationUpdateCompositeUpdate=void 0;const n=r(83814);class i extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"compositeupdate")}async testOperation(e,t){return n.ActorQueryOperation.throwOnReadOnly(t),!0}async runOperation(e,t){return{type:"void",execute:()=>(async()=>{for(const r of e.updates){const e=n.ActorQueryOperation.getSafeVoid(await this.mediatorQueryOperation.mediate({operation:r,context:t}));await e.execute()}})()}}}t.ActorQueryOperationUpdateCompositeUpdate=i},56690:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(36360),t)},96445:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationCopyRewrite=void 0;const n=r(83814),i=r(6789);class o extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"copy"),this.factory=new i.Factory}async testOperation(e,t){return n.ActorQueryOperation.throwOnReadOnly(t),!0}runOperation(e,t){if("string"==typeof e.destination&&"string"==typeof e.source&&e.destination===e.source||"string"!=typeof e.destination&&"string"!=typeof e.source&&e.destination.equals(e.source))return Promise.resolve({type:"void",execute:()=>Promise.resolve()});const r=this.factory.createCompositeUpdate([this.factory.createDrop(e.destination,!0),this.factory.createAdd(e.source,e.destination,e.silent)]);return this.mediatorQueryOperation.mediate({operation:r,context:t})}}t.ActorQueryOperationCopyRewrite=o},71852:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(96445),t)},78537:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationCreate=void 0;const n=r(83814);class i extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"create")}async testOperation(e,t){return n.ActorQueryOperation.throwOnReadOnly(t),!0}async runOperation(e,t){const{execute:r}=await this.mediatorUpdateQuads.mediate({createGraphs:{graphs:[e.source],requireNonExistence:!e.silent},context:t});return{type:"void",execute:r}}}t.ActorQueryOperationCreate=i},17166:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(78537),t)},82682:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationUpdateDeleteInsert=void 0;const n=r(32023),i=r(79550),o=r(83814),a=r(78664),s=new i.BindingsFactory;class u extends o.ActorQueryOperationTypedMediated{constructor(e){super(e,"deleteinsert"),this.blankNodeCounter=0}async testOperation(e,t){return o.ActorQueryOperation.throwOnReadOnly(t),!0}async runOperation(e,t){const r=e.where?o.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:e.where,context:t})).bindingsStream:new a.ArrayIterator([s.bindings()],{autoStart:!1});let i,u;e.insert&&(i=new n.BindingsToQuadsIterator(e.insert.map(n.BindingsToQuadsIterator.localizeQuad.bind(null,this.blankNodeCounter)),r.clone(),!1),this.blankNodeCounter++),e.delete&&(u=new n.BindingsToQuadsIterator(e.delete.map(n.BindingsToQuadsIterator.localizeQuad.bind(null,this.blankNodeCounter)),r.clone(),!1),this.blankNodeCounter++);const{execute:c}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:i,quadStreamDelete:u,context:t});return{type:"void",execute:c}}}t.ActorQueryOperationUpdateDeleteInsert=u},6215:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(82682),t)},96129:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationDrop=void 0;const n=r(83814),i=new(r(91194).DataFactory);class o extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"drop")}async testOperation(e,t){return n.ActorQueryOperation.throwOnReadOnly(t),!0}async runOperation(e,t){let r;r="DEFAULT"===e.source?i.defaultGraph():"string"==typeof e.source?e.source:[e.source];const{execute:n}=await this.mediatorUpdateQuads.mediate({deleteGraphs:{graphs:r,requireExistence:!e.silent,dropGraphs:!0},context:t});return{type:"void",execute:n}}}t.ActorQueryOperationDrop=o},54322:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(96129),t)},46108:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationLoad=void 0;const n=r(83814),i=r(78470),o=r(91194),a=r(6789),s=new o.DataFactory;class u extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"load"),this.factory=new a.Factory,this.constructOperation=this.factory.createConstruct(this.factory.createPattern(s.variable("s"),s.variable("p"),s.variable("o")),[this.factory.createPattern(s.variable("s"),s.variable("p"),s.variable("o"))])}async testOperation(e,t){return n.ActorQueryOperation.throwOnReadOnly(t),!0}async runOperation(e,t){let r=t.set(i.KeysRdfResolveQuadPattern.sources,[e.source.value]);e.silent&&(r=r.set(i.KeysInitQuery.lenient,!0));let n=u.getSafeQuads(await this.mediatorQueryOperation.mediate({operation:this.constructOperation,context:r})).quadStream;e.destination&&(n=n.map((t=>s.quad(t.subject,t.predicate,t.object,e.destination))));const{execute:o}=await this.mediatorUpdateQuads.mediate({quadStreamInsert:n,context:t});return{type:"void",execute:o}}}t.ActorQueryOperationLoad=u},82965:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(46108),t)},68871:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationMoveRewrite=void 0;const n=r(83814),i=r(6789);class o extends n.ActorQueryOperationTypedMediated{constructor(e){super(e,"move"),this.factory=new i.Factory}async testOperation(e,t){return n.ActorQueryOperation.throwOnReadOnly(t),!0}runOperation(e,t){if("string"==typeof e.destination&&"string"==typeof e.source&&e.destination===e.source||"string"!=typeof e.destination&&"string"!=typeof e.source&&e.destination.equals(e.source))return Promise.resolve({type:"void",execute:()=>Promise.resolve()});const r=[this.factory.createDrop(e.destination,!0),this.factory.createAdd(e.source,e.destination,e.silent),this.factory.createDrop(e.source)],n=this.factory.createCompositeUpdate(r);return this.mediatorQueryOperation.mediate({operation:n,context:t})}}t.ActorQueryOperationMoveRewrite=o},69259:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(68871),t)},52132:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationValues=void 0;const n=r(79550),i=r(83814),o=r(78664),a=r(91194),s=new n.BindingsFactory,u=new a.DataFactory;class c extends i.ActorQueryOperationTyped{constructor(e){super(e,"values")}async testOperation(e,t){return!0}async runOperation(e,t){const r=new o.ArrayIterator(e.bindings.map((e=>s.bindings(Object.entries(e).map((([e,t])=>[u.variable(e.slice(1)),t])))))),n=e.variables;return{type:"bindings",bindingsStream:r,metadata:()=>Promise.resolve({cardinality:{type:"exact",value:e.bindings.length},canContainUndefs:e.bindings.some((e=>n.some((t=>!(`?${t.value}`in e))))),variables:n})}}}t.ActorQueryOperationValues=c},78251:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(52132),t)},70332:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryParseGraphql=void 0;const n=r(21744),i=r(78470),o=r(67020);class a extends n.ActorQueryParse{constructor(e){super(e),this.graphqlToSparql=new o.Converter({requireContext:!0})}async test(e){if("graphql"!==e.queryFormat?.language)throw new Error("This actor can only parse GraphQL queries");return!0}async run(e){const t=e.context.get(i.KeysInitQuery.jsonLdContext)||{},r={singularizeVariables:e.context.get(i.KeysInitQuery.graphqlSingularizeVariables)};return{operation:await this.graphqlToSparql.graphqlToSparqlAlgebra(e.query,t,r)}}}t.ActorQueryParseGraphql=a},37873:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(70332),t)},44188:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryParseSparql=void 0;const n=r(21744),i=r(6789),o=r(2085);class a extends n.ActorQueryParse{constructor(e){super(e),this.prefixes=Object.freeze(this.prefixes)}async test(e){if(e.queryFormat&&"sparql"!==e.queryFormat.language)throw new Error("This actor can only parse SPARQL queries");return!0}async run(e){const t=new o.Parser({prefixes:this.prefixes,baseIRI:e.baseIRI}).parse(e.query);return{baseIRI:"query"===t.type?t.base:void 0,operation:(0,i.translate)(t,{quads:!0,prefixes:this.prefixes,blankToVariable:!0,baseIRI:e.baseIRI})}}}t.ActorQueryParseSparql=a},93700:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(44188),t)},96137:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryResultSerializeJson=void 0;const n=r(54851),i=r(42351),o=r(6053);class a extends i.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}async testHandleChecked(e,t){if(!["bindings","quads","boolean"].includes(e.type))throw new Error("This actor can only handle bindings or quad streams.");return!0}async runHandle(e,t,r){const i=new n.Readable;i._read=()=>{};let a=!0;if("bindings"===e.type){const t=e.bindingsStream;i.push("["),t.on("error",(e=>i.emit("error",e))),t.on("data",(e=>{i.push(a?"\n":",\n"),i.push(JSON.stringify(Object.fromEntries([...e].map((([e,t])=>[e.value,o.termToString(t)]))))),a=!1})),t.on("end",(()=>{i.push(a?"]\n":"\n]\n"),i.push(null)}))}else if("quads"===e.type){const t=e.quadStream;i.push("["),t.on("error",(e=>i.emit("error",e))),t.on("data",(e=>{i.push(a?"\n":",\n"),i.push(JSON.stringify(o.quadToStringQuad(e))),a=!1})),t.on("end",(()=>{i.push(a?"]\n":"\n]\n"),i.push(null)}))}else try{i.push(`${JSON.stringify(await e.execute())}\n`),i.push(null)}catch(e){setImmediate((()=>i.emit("error",e)))}return{data:i}}}t.ActorQueryResultSerializeJson=a},6234:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(96137),t)},42455:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryResultSerializeRdf=void 0;const n=r(42351);class i extends n.ActorQueryResultSerialize{constructor(e){super(e)}async testHandle(e,t,r){if("quads"!==e.type)throw new Error(`Actor ${this.name} can only handle quad streams`);const{mediaTypes:n}=await this.mediatorMediaTypeCombiner.mediate({context:r,mediaTypes:!0});if(!(t in n))throw new Error(`Actor ${this.name} can not handle media type ${t}. All available types: ${Object.keys(n)}`);return!0}async runHandle(e,t,r){return(await this.mediatorRdfSerialize.mediate({context:r,handle:{context:r,quadStream:e.quadStream},handleMediaType:t})).handle}async testMediaType(e){return!0}async getMediaTypes(e){return(await this.mediatorMediaTypeCombiner.mediate({context:e,mediaTypes:!0})).mediaTypes}async testMediaTypeFormats(e){return!0}async getMediaTypeFormats(e){return(await this.mediatorMediaTypeFormatCombiner.mediate({context:e,mediaTypeFormats:!0})).mediaTypeFormats}}t.ActorQueryResultSerializeRdf=i},45322:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(42455),t)},52789:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryResultSerializeSimple=void 0;const n=r(54851),i=r(42351);class o extends i.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}async testHandleChecked(e,t){if(!["bindings","quads","boolean","void"].includes(e.type))throw new Error("This actor can only handle bindings streams, quad streams, booleans, or updates.");return!0}async runHandle(e,t,r){const i=new n.Readable;let o;if(i._read=()=>{},"bindings"===e.type)o=e.bindingsStream,o.on("error",(e=>i.emit("error",e))),o.on("data",(e=>i.push(`${[...e].map((([e,t])=>`?${e.value}: ${t.value}`)).join("\n")}\n\n`))),o.on("end",(()=>i.push(null)));else if("quads"===e.type)o=e.quadStream,o.on("error",(e=>i.emit("error",e))),o.on("data",(e=>i.push(`subject: ${e.subject.value}\npredicate: ${e.predicate.value}\nobject: ${e.object.value}\ngraph: ${e.graph.value}\n\n`))),o.on("end",(()=>i.push(null)));else if("boolean"===e.type)try{i.push(`${JSON.stringify(await e.execute())}\n`),i.push(null)}catch(e){setImmediate((()=>i.emit("error",e)))}else e.execute().then((()=>{i.push("ok\n"),i.push(null)})).catch((e=>setImmediate((()=>i.emit("error",e)))));return{data:i}}}t.ActorQueryResultSerializeSimple=o},54399:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(52789),t)},82703:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryResultSerializeSparqlCsv=void 0;const n=r(54851),i=r(42351);class o extends i.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}static bindingToCsvBindings(e){if(!e)return"";let t=e.value;return t="Literal"===e.termType?`${t}`:"BlankNode"===e.termType?`_:${t}`:`<${t}>`,/[",\n\r]/u.test(t)&&(t=`"${t.replace(/"/gu,'""')}"`),t}async testHandleChecked(e,t){if("bindings"!==e.type)throw new Error("This actor can only handle bindings streams.");return!0}async runHandle(e,t,r){const i=e,a=new n.Readable;a._read=()=>{};const s=await i.metadata();return a.push(`${s.variables.map((e=>e.value)).join(",")}\r\n`),i.bindingsStream.on("error",(e=>{a.emit("error",e)})),i.bindingsStream.on("data",(e=>{a.push(`${s.variables.map((t=>o.bindingToCsvBindings(e.get(t)))).join(",")}\r\n`)})),i.bindingsStream.on("end",(()=>{a.push(null)})),{data:a}}}t.ActorQueryResultSerializeSparqlCsv=o},74295:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(82703),t)},1539:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryResultSerializeSparqlJson=void 0;const n=r(54851),i=r(42351);class o extends i.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}static bindingToJsonBindings(e){if("Literal"===e.termType){const t=e,r={value:t.value,type:"literal"},{language:n}=t,{datatype:i}=t;return n?r["xml:lang"]=n:i&&"http://www.w3.org/2001/XMLSchema#string"!==i.value&&(r.datatype=i.value),r}return"BlankNode"===e.termType?{value:e.value,type:"bnode"}:{value:e.value,type:"uri"}}async testHandleChecked(e,t){if(!["bindings","boolean"].includes(e.type))throw new Error("This actor can only handle bindings streams or booleans.");return!0}async runHandle(e,t,r){const i=new n.Readable;i._read=()=>{};const a={};if("bindings"===e.type){const t=await e.metadata();t.variables.length>0&&(a.vars=t.variables.map((e=>e.value)))}i.push(`{"head": ${JSON.stringify(a)},\n`);let s=!0;if("bindings"===e.type){const t=e.bindingsStream;t.on("error",(e=>{i.emit("error",e)})),t.on("data",(e=>{s?i.push('"results": { "bindings": [\n'):i.push(",\n"),i.push(JSON.stringify(Object.fromEntries([...e].map((([e,t])=>[e.value,o.bindingToJsonBindings(t)]))))),s=!1})),t.on("end",(()=>{s?i.push('"results": { "bindings": [] }}\n'):i.push("\n]}}\n"),i.push(null)}))}else try{i.push(`"boolean":${await e.execute()}\n}\n`),i.push(null)}catch(e){i.once("newListener",(()=>i.emit("error",e)))}return{data:i}}}t.ActorQueryResultSerializeSparqlJson=o},68058:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(1539),t)},1816:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryResultSerializeSparqlTsv=void 0;const n=r(54851),i=r(42351),o=r(2122);class a extends i.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}static bindingToTsvBindings(e){return e?(0,o.termToString)(e).replace(/\t/gu,"\\t").replace(/\n/gu,"\\n").replace(/\r/gu,"\\r"):""}async testHandleChecked(e,t){if("bindings"!==e.type)throw new Error("This actor can only handle bindings streams.");return!0}async runHandle(e,t,r){const i=e,o=new n.Readable;o._read=()=>{};const s=await i.metadata();return o.push(`${s.variables.map((e=>e.value)).join("\t")}\n`),i.bindingsStream.on("error",(e=>{o.emit("error",e)})),i.bindingsStream.on("data",(e=>{o.push(`${s.variables.map((t=>a.bindingToTsvBindings(e.get(t)))).join("\t")}\n`)})),i.bindingsStream.on("end",(()=>{o.push(null)})),{data:o}}}t.ActorQueryResultSerializeSparqlTsv=a},30865:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(1816),t)},87869:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryResultSerializeSparqlXml=void 0;const n=r(54851),i=r(42351),o=r(18882);class a extends i.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}static bindingToXmlBindings(e,t){let r;if("Literal"===e.termType){const t=e;r={literal:t.value};const{language:n}=t,{datatype:i}=t;n?r.literal=[{_attr:{"xml:lang":n}},r.literal]:i&&"http://www.w3.org/2001/XMLSchema#string"!==i.value&&(r.literal=[{_attr:{datatype:i.value}},r.literal])}else r="BlankNode"===e.termType?{bnode:e.value}:{uri:e.value};return{binding:[{_attr:{name:t.value}},r]}}async testHandleChecked(e,t){if(!["bindings","boolean"].includes(e.type))throw new Error("This actor can only handle bindings streams or booleans.");return!0}async runHandle(e,t,r){const i=new n.Readable;i._read=()=>{};const s=o.element({_attr:{xlmns:"http://www.w3.org/2005/sparql-results#"}});if(o({sparql:s},{stream:!0,indent:"  ",declaration:!0}).on("data",(e=>i.push(`${e}\n`))),"bindings"===e.type){const t=await e.metadata();t.variables.length>0&&s.push({head:t.variables.map((e=>({variable:{_attr:{name:e.value}}})))})}if("bindings"===e.type){const t=o.element({});s.push({results:t});const r=e.bindingsStream;r.on("error",(e=>{i.emit("error",e)})),r.on("data",(e=>{t.push({result:[...e].map((([e,t])=>a.bindingToXmlBindings(t,e)))})})),r.on("end",(()=>{t.close(),s.close(),setImmediate((()=>i.push(null)))}))}else try{s.push({boolean:await e.execute()}),s.close(),setImmediate((()=>i.push(null)))}catch(e){setImmediate((()=>i.emit("error",e)))}return{data:i}}}t.ActorQueryResultSerializeSparqlXml=a},33499:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(87869),t)},60179:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionObserverHttp=void 0;const n=r(21049);class i extends n.ActionObserver{constructor(e){super(e),this.requests=0,this.bus.subscribeObserver(this)}onRun(e,t,r){this.requests++}}t.ActionObserverHttp=i},41880:(e,t,r)=>{"use strict";var n=r(34406);Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryResultSerializeStats=void 0;const i=r(54851),o=r(42351);class a extends o.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}async testHandleChecked(e,t){if(!["bindings","quads"].includes(e.type))throw new Error("This actor can only handle bindings streams or quad streams.");return!0}pushHeader(e){const t=["Result","Delay (ms)","HTTP requests"].join(",");e.push(`${t}\n`)}pushStat(e,t,r){const n=[r,this.delay(t),this.httpObserver.requests].join(",");e.push(`${n}\n`)}pushFooter(e,t){const r=["TOTAL",this.delay(t),this.httpObserver.requests].join(",");e.push(`${r}\n`),e.push(null)}async runHandle(e,t,r){const o=new i.Readable;o._read=()=>{};const a="bindings"===e.type?e.bindingsStream:e.quadStream,s=n.hrtime();let u=1;return this.pushHeader(o),a.on("error",(e=>o.emit("error",e))),a.on("data",(()=>this.pushStat(o,s,u++))),a.on("end",(()=>this.pushFooter(o,s))),{data:o}}delay(e){const t=n.hrtime(e);return 1e3*t[0]+t[1]/1e6}}t.ActorQueryResultSerializeStats=a},81801:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(60179),t),i(r(41880),t)},25593:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryResultSerializeTable=void 0;const n=r(54851),i=r(42351),o=r(91194),a=r(98086),s=new o.DataFactory,u=a.QUAD_TERM_NAMES.map((e=>s.variable(e)));class c extends i.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e),this.padding=c.repeat(" ",this.columnWidth)}static repeat(e,t){return new Array(t+1).join(e)}async testHandleChecked(e,t){if(!["bindings","quads"].includes(e.type))throw new Error("This actor can only handle bindings or quad streams.");return!0}pad(e){return e.length<=this.columnWidth?e+this.padding.slice(e.length):`${e.slice(0,this.columnWidth-1)}…`}pushHeader(e,t){const r=t.map((e=>this.pad(e.value))).join(" ");e.push(`${r}\n${c.repeat("-",r.length)}\n`)}pushRow(e,t,r){e.push(`${t.map((e=>r.get(e)?.value||"")).map((e=>this.pad(e))).join(" ")}\n`)}async runHandle(e,t,r){const i=new n.Readable;let o;if(i._read=()=>{},"bindings"===e.type){o=e.bindingsStream;const t=(await e.metadata()).variables;this.pushHeader(i,t),o.on("error",(e=>i.emit("error",e))),o.on("data",(e=>this.pushRow(i,t,e)))}else o=e.quadStream,this.pushHeader(i,u),o.on("error",(e=>i.emit("error",e))),o.on("data",(e=>i.push(`${(0,a.getTerms)(e).map((e=>this.pad(e.value))).join(" ")}\n`)));return o.on("end",(()=>i.push(null))),{data:i}}}t.ActorQueryResultSerializeTable=c},68266:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(25593),t)},73102:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryResultSerializeTree=void 0;const n=r(54851),i=r(42351),o=r(78470),a=r(21049),s=r(97977);class u extends i.ActorQueryResultSerializeFixedMediaTypes{constructor(e){super(e)}static bindingsStreamToGraphQl(e,t,r){const n=a.ActionContext.ensureActionContext(t);return new Promise(((t,i)=>{const a=[],u=new s.Converter(r),c={singularizeVariables:n.get(o.KeysInitQuery.graphqlSingularizeVariables)||{}};e.on("error",i),e.on("data",(e=>{a.push(Object.fromEntries([...e].map((([e,t])=>[e.value,t]))))})),e.on("end",(()=>{t(u.bindingsToTree(a,c))}))}))}async testHandleChecked(e){if("bindings"!==e.type)throw new Error("This actor can only handle bindings streams.");return!0}async runHandle(e,t){const r=new n.Readable;r._read=()=>{};const i=e.bindingsStream;return i.on("error",(e=>r.emit("error",e))),u.bindingsStreamToGraphQl(i,e.context,{materializeRdfJsTerms:!0}).then((e=>{r.push(JSON.stringify(e,null,"  ")),r.push(null)})).catch((e=>r.emit("error",e))),{data:r}}}t.ActorQueryResultSerializeTree=u},93148:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.bindingsStreamToGraphQl=void 0,i(r(73102),t);const o=r(73102),{bindingsStreamToGraphQl:a}=o.ActorQueryResultSerializeTree;t.bindingsStreamToGraphQl=a},78710:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfJoinEntriesSortCardinality=void 0;const n=r(48955);class i extends n.ActorRdfJoinEntriesSort{constructor(e){super(e)}async test(e){return!0}async run(e){return{entries:[...e.entries].sort(((e,t)=>e.metadata.cardinality.value-t.metadata.cardinality.value))}}}t.ActorRdfJoinEntriesSortCardinality=i},12321:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(78710),t)},1547:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfJoinHash=void 0;const n=r(97045),i=r(89727);class o extends n.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"hash",limitEntries:2})}async getOutput(e){const t=await n.ActorRdfJoin.getMetadatas(e.entries),r=n.ActorRdfJoin.overlappingVariables(t);return{result:{type:"bindings",bindingsStream:new i.HashJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,(e=>n.ActorRdfJoin.hash(e,r)),n.ActorRdfJoin.joinBindings),metadata:async()=>await this.constructResultMetadata(e.entries,t,e.context)}}}async getJoinCoefficients(e,t){const r=n.ActorRdfJoin.getRequestInitialTimes(t),i=n.ActorRdfJoin.getRequestItemTimes(t);return{iterations:t[0].cardinality.value+t[1].cardinality.value,persistedItems:t[0].cardinality.value,blockingItems:t[0].cardinality.value,requestTime:r[0]+t[0].cardinality.value*i[0]+r[1]+t[1].cardinality.value*i[1]}}}t.ActorRdfJoinHash=o},55393:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(1547),t)},3173:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfJoinMultiBind=void 0;const n=r(83814),i=r(97045),o=r(78470),a=r(78664),s=r(6789);class u extends i.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"bind",canHandleUndefs:!0})}static createBindStream(e,t,r,i,o){const s=e=>{const t=r.map((t=>(0,n.materializeOperation)(t,e,{bindFilter:!1}))),o=t=>t.merge(e);return new a.TransformIterator((async()=>(await i(t,e)).transform({map:o})),{maxBufferSize:128})};switch(e){case"depth-first":return new a.MultiTransformIterator(t,{autoStart:!1,multiTransform:s,optional:o});case"breadth-first":return new a.UnionIterator(t.transform({map:s,optional:o}),{autoStart:!1});default:throw new Error(`Received request for unknown bind order: ${e}`)}}async sortJoinEntries(e,t){if(e.some((e=>e.metadata.canContainUndefs)))return e;const r={};for(const t of e)for(const e of t.metadata.variables){let t=r[e.value];t||(t=0),r[e.value]=++t}const n=[];for(const[e,t]of Object.entries(r))t>=2&&n.push(e);if(0===n.length)throw new Error("Bind join can only join entries with at least one common variable");const i=[];for(const t of e){let e=!1;for(const r of t.metadata.variables)if(n.includes(r.value)){e=!0;break}e||i.push(t)}return(await this.mediatorJoinEntriesSort.mediate({entries:e,context:t})).entries.sort(((e,t)=>{const r=i.includes(e);return r===i.includes(t)?0:r?1:-1}))}async getOutput(e){const t=await i.ActorRdfJoin.getEntriesWithMetadatas(e.entries),r=await this.sortJoinEntries(t,e.context);this.logDebug(e.context,"First entry for Bind Join: ",(()=>({entry:r[0].operation,metadata:r[0].metadata})));for(const[e,t]of r.entries())0!==e&&t.output.bindingsStream.close();const a=r[0].output,s=[...r];s.splice(0,1);const c=e.context.set(o.KeysQueryOperation.joinLeftMetadata,r[0].metadata).set(o.KeysQueryOperation.joinRightMetadatas,s.map((e=>e.metadata)));return{result:{type:"bindings",bindingsStream:u.createBindStream(this.bindOrder,a.bindingsStream,s.map((e=>e.operation)),(async(e,t)=>{const r=1===e.length?e[0]:u.FACTORY.createJoin(e);return n.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:r,context:c?.set(o.KeysQueryOperation.joinBindings,t)})).bindingsStream}),!1),metadata:()=>this.constructResultMetadata(r,r.map((e=>e.metadata)),e.context)},physicalPlanMetadata:{bindIndex:t.indexOf(r[0]),bindOrder:this.bindOrder}}}async getJoinCoefficients(e,t){const r=await this.sortJoinEntries(e.entries.map(((e,r)=>({...e,metadata:t[r]}))),e.context);t=r.map((e=>e.metadata));const n=i.ActorRdfJoin.getRequestInitialTimes(t),o=i.ActorRdfJoin.getRequestItemTimes(t),a=[...r],u=[...n],c=[...o];if(a.splice(0,1),u.splice(0,1),c.splice(0,1),a.some((e=>e.operation.type===s.Algebra.types.EXTEND||e.operation.type===s.Algebra.types.GROUP)))throw new Error(`Actor ${this.name} can not bind on Extend and Group operations`);const l=await Promise.all(a.map((async t=>(await this.mediatorJoinSelectivity.mediate({entries:[r[0],t],context:e.context})).selectivity*this.selectivityModifier))),p=a.map(((e,t)=>e.metadata.cardinality.value*l[t])).reduce(((e,t)=>e+t),0),d=u.reduce(((e,t,r)=>e+t*l[r]),0),f=c.reduce(((e,t,r)=>e+t*l[r]),0);return{iterations:t[0].cardinality.value*p,persistedItems:0,blockingItems:0,requestTime:n[0]+t[0].cardinality.value*(o[0]+d+p*f)}}}t.ActorRdfJoinMultiBind=u,u.FACTORY=new s.Factory},39474:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(3173),t)},21182:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfJoinMultiEmpty=void 0;const n=r(97045),i=r(78664);class o extends n.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"multi-empty"})}async test(e){if((await n.ActorRdfJoin.getMetadatas(e.entries)).every((e=>n.ActorRdfJoin.getCardinality(e).value>0)))throw new Error(`Actor ${this.name} can only join entries where at least one is empty`);return super.test(e)}async getOutput(e){for(const t of e.entries)t.output.bindingsStream.close();return{result:{bindingsStream:new i.ArrayIterator([],{autoStart:!1}),metadata:async()=>({cardinality:{type:"exact",value:0},canContainUndefs:!1,variables:n.ActorRdfJoin.joinVariables(await n.ActorRdfJoin.getMetadatas(e.entries))}),type:"bindings"}}}async getJoinCoefficients(e,t){return{iterations:0,persistedItems:0,blockingItems:0,requestTime:0}}}t.ActorRdfJoinMultiEmpty=o},3771:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(21182),t)},1394:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfJoinMultiSmallest=void 0;const n=r(83814),i=r(97045),o=r(6789);class a extends i.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"multi-smallest",limitEntries:3,limitEntriesMin:!0})}async sortJoinEntries(e,t){return(await this.mediatorJoinEntriesSort.mediate({entries:e,context:t})).entries}async getOutput(e){const t=await this.sortJoinEntries(await i.ActorRdfJoin.getEntriesWithMetadatas([...e.entries]),e.context),r=t[0],o=t[1];t.splice(0,2);const s={output:n.ActorQueryOperation.getSafeBindings(await this.mediatorJoin.mediate({type:e.type,entries:[r,o],context:e.context})),operation:a.FACTORY.createJoin([r.operation,o.operation],!1)};return t.push(s),{result:await this.mediatorJoin.mediate({type:e.type,entries:t,context:e.context})}}async getJoinCoefficients(e,t){t=[...t];const r=await this.sortJoinEntries(e.entries.map(((e,r)=>({...e,metadata:t[r]}))),e.context);t=r.map((e=>e.metadata));const n=i.ActorRdfJoin.getRequestInitialTimes(t),o=i.ActorRdfJoin.getRequestItemTimes(t);return{iterations:t[0].cardinality.value*t[1].cardinality.value*t.slice(2).reduce(((e,t)=>e*t.cardinality.value),1),persistedItems:0,blockingItems:0,requestTime:n[0]+t[0].cardinality.value*o[0]+n[1]+t[1].cardinality.value*o[1]+t.slice(2).reduce(((e,t,r)=>e+n.slice(2)[r]+t.cardinality.value*o.slice(2)[r]),0)}}}t.ActorRdfJoinMultiSmallest=a,a.FACTORY=new o.Factory},34442:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(1394),t)},69046:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfJoinNestedLoop=void 0;const n=r(97045),i=r(89727);class o extends n.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(e){return{result:{type:"bindings",bindingsStream:new i.NestedLoopJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,n.ActorRdfJoin.joinBindings,{autoStart:!1}),metadata:async()=>await this.constructResultMetadata(e.entries,await n.ActorRdfJoin.getMetadatas(e.entries),e.context)}}}async getJoinCoefficients(e,t){const r=n.ActorRdfJoin.getRequestInitialTimes(t),i=n.ActorRdfJoin.getRequestItemTimes(t);return{iterations:t[0].cardinality.value*t[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:r[0]+t[0].cardinality.value*i[0]+r[1]+t[1].cardinality.value*i[1]}}}t.ActorRdfJoinNestedLoop=o},87622:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(69046),t)},44716:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfJoinNone=void 0;const n=r(79550),i=r(97045),o=r(78664),a=new n.BindingsFactory;class s extends i.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"none",limitEntries:0})}async test(e){if(e.entries.length>0)throw new Error(`Actor ${this.name} can only join zero entries`);return await this.getJoinCoefficients()}async getOutput(e){return{result:{bindingsStream:new o.ArrayIterator([a.bindings()],{autoStart:!1}),metadata:()=>Promise.resolve({cardinality:{type:"exact",value:1},canContainUndefs:!1,variables:[]}),type:"bindings"}}}async getJoinCoefficients(){return{iterations:0,persistedItems:0,blockingItems:0,requestTime:0}}}t.ActorRdfJoinNone=s},64849:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(44716),t)},81712:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfJoinSingle=void 0;const n=r(97045);class i extends n.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"single",limitEntries:1}),this.includeInLogs=!1}async test(e){if(1!==e.entries.length)throw new Error(`Actor ${this.name} can only join a single entry`);return await this.getJoinCoefficients()}async getOutput(e){return{result:e.entries[0].output}}async getJoinCoefficients(){return{iterations:0,persistedItems:0,blockingItems:0,requestTime:0}}}t.ActorRdfJoinSingle=i},85427:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(81712),t)},34849:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfJoinSymmetricHash=void 0;const n=r(97045),i=r(89727);class o extends n.ActorRdfJoin{constructor(e){super(e,{logicalType:"inner",physicalName:"symmetric-hash",limitEntries:2})}async getOutput(e){const t=await n.ActorRdfJoin.getMetadatas(e.entries),r=n.ActorRdfJoin.overlappingVariables(t);return{result:{type:"bindings",bindingsStream:new i.SymmetricHashJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,(e=>o.hash(e,r)),n.ActorRdfJoin.joinBindings),metadata:async()=>await this.constructResultMetadata(e.entries,t,e.context)}}}async getJoinCoefficients(e,t){const r=n.ActorRdfJoin.getRequestInitialTimes(t),i=n.ActorRdfJoin.getRequestItemTimes(t);return{iterations:t[0].cardinality.value+t[1].cardinality.value,persistedItems:t[0].cardinality.value+t[1].cardinality.value,blockingItems:0,requestTime:r[0]+t[0].cardinality.value*i[0]+r[1]+t[1].cardinality.value*i[1]}}}t.ActorRdfJoinSymmetricHash=o},33023:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(34849),t)},92443:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfJoinMinusHashUndef=void 0;const n=r(97045),i=r(78664),o=r(30773);class a extends n.ActorRdfJoin{constructor(e){super(e,{logicalType:"minus",physicalName:"hash-undef",limitEntries:2,canHandleUndefs:!0})}async getOutput(e){const t=e.entries[1].output,r=e.entries[0].output,a=await n.ActorRdfJoin.getMetadatas(e.entries),s=n.ActorRdfJoin.overlappingVariables(a);if(s.length>0){const e=new o.BindingsIndex(s);return{result:{type:"bindings",bindingsStream:new i.TransformIterator((async()=>(await new Promise((r=>{t.bindingsStream.on("data",(t=>e.add(t))),t.bindingsStream.on("end",r)})),r.bindingsStream.filter((t=>!e.contains(t))))),{autoStart:!1}),async metadata(){const e=await r.metadata(),t=await r.metadata();return{...t,canContainUndefs:e.canContainUndefs||t.canContainUndefs}}}}}return{result:r}}async getJoinCoefficients(e,t){const r=n.ActorRdfJoin.getRequestInitialTimes(t),i=n.ActorRdfJoin.getRequestItemTimes(t);return{iterations:1.01*(t[0].cardinality.value+t[1].cardinality.value),persistedItems:t[0].cardinality.value,blockingItems:t[0].cardinality.value,requestTime:r[0]+t[0].cardinality.value*i[0]+r[1]+t[1].cardinality.value*i[1]}}}t.ActorRdfJoinMinusHashUndef=a},30773:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingsIndex=void 0;const n=r(6053);class i{constructor(e){this.data={},this.keys=e}static hashTerm(e){return e&&"Variable"!==e.termType?(0,n.termToString)(e):""}add(e){if(this.isBindingsValid(e)){let t=this.data;for(const r of this.keys){const n=i.hashTerm(e.get(r));let o=t[n];o||(o=t[n]={}),t=o}}}contains(e){return!!this.isBindingsValid(e)&&this.containsRecursive(e,this.keys,[this.data])}isBindingsValid(e){let t=!1;for(const r of this.keys)if(e.get(r)){t=!0;break}return t}containsRecursive(e,t,r){if(0===t.length)return!0;let n;[n,...t]=t;for(const o of r){const r=i.hashTerm(e.get(n));if(r){const n=[o[r],o[""]].filter(Boolean);if(0===n.length)continue;if(this.containsRecursive(e,t,n))return!0}else{let r=Object.keys(o).map((e=>o[e]));if(0===r.length&&(r=[{}]),this.containsRecursive(e,t,r))return!0}}return!1}}t.BindingsIndex=i},56419:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(92443),t)},34086:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfJoinMinusHash=void 0;const n=r(97045),i=r(78664);class o extends n.ActorRdfJoin{constructor(e){super(e,{logicalType:"minus",physicalName:"hash",limitEntries:2})}async getOutput(e){const t=e.entries[1].output,r=e.entries[0].output,o=await n.ActorRdfJoin.getMetadatas(e.entries),a=n.ActorRdfJoin.overlappingVariables(o);if(a.length>0){const e={};return{result:{type:"bindings",bindingsStream:new i.TransformIterator((async()=>(await new Promise((r=>{t.bindingsStream.on("data",(t=>{e[n.ActorRdfJoin.hash(t,a)]=!0})),t.bindingsStream.on("end",r)})),r.bindingsStream.filter((t=>!e[n.ActorRdfJoin.hash(t,a)])))),{autoStart:!1}),metadata:r.metadata}}}return{result:r}}async getJoinCoefficients(e,t){const r=n.ActorRdfJoin.getRequestInitialTimes(t),i=n.ActorRdfJoin.getRequestItemTimes(t);return{iterations:t[0].cardinality.value+t[1].cardinality.value,persistedItems:t[0].cardinality.value,blockingItems:t[0].cardinality.value,requestTime:r[0]+t[0].cardinality.value*i[0]+r[1]+t[1].cardinality.value*i[1]}}}t.ActorRdfJoinMinusHash=o},66927:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(34086),t)},89225:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfJoinOptionalBind=void 0;const n=r(39474),i=r(83814),o=r(97045),a=r(78470),s=r(6789);class u extends o.ActorRdfJoin{constructor(e){super(e,{logicalType:"optional",physicalName:"bind",limitEntries:2,canHandleUndefs:!0})}async getOutput(e){e.entries[1].output.bindingsStream.close();const t=e.context.set(a.KeysQueryOperation.joinLeftMetadata,await e.entries[0].output.metadata()).set(a.KeysQueryOperation.joinRightMetadatas,[await e.entries[1].output.metadata()]);return{result:{type:"bindings",bindingsStream:n.ActorRdfJoinMultiBind.createBindStream(this.bindOrder,e.entries[0].output.bindingsStream,[e.entries[1].operation],(async(e,r)=>{const n=e[0];return i.ActorQueryOperation.getSafeBindings(await this.mediatorQueryOperation.mediate({operation:n,context:t?.set(a.KeysQueryOperation.joinBindings,r)})).bindingsStream}),!0),metadata:async()=>await this.constructResultMetadata(e.entries,await o.ActorRdfJoin.getMetadatas(e.entries),e.context,{canContainUndefs:!0})}}}async getJoinCoefficients(e,t){const r=o.ActorRdfJoin.getRequestInitialTimes(t),n=o.ActorRdfJoin.getRequestItemTimes(t);if(e.entries[1].operation.type===s.Algebra.types.EXTEND||e.entries[1].operation.type===s.Algebra.types.GROUP)throw new Error(`Actor ${this.name} can not bind on Extend and Group operations`);const i=(await this.mediatorJoinSelectivity.mediate({entries:e.entries,context:e.context})).selectivity*this.selectivityModifier;return{iterations:t[0].cardinality.value*t[1].cardinality.value*i,persistedItems:0,blockingItems:0,requestTime:r[0]+t[0].cardinality.value*i*(n[0]+r[1]+t[1].cardinality.value*n[1])}}}t.ActorRdfJoinOptionalBind=u},95117:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(89225),t)},90145:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfJoinOptionalNestedLoop=void 0;const n=r(97045),i=r(89727);class o extends n.ActorRdfJoin{constructor(e){super(e,{logicalType:"optional",physicalName:"nested-loop",limitEntries:2,canHandleUndefs:!0})}async getOutput(e){return{result:{type:"bindings",bindingsStream:new i.NestedLoopJoin(e.entries[0].output.bindingsStream,e.entries[1].output.bindingsStream,n.ActorRdfJoin.joinBindings,{optional:!0,autoStart:!1}),metadata:async()=>await this.constructResultMetadata(e.entries,await n.ActorRdfJoin.getMetadatas(e.entries),e.context,{canContainUndefs:!0})}}}async getJoinCoefficients(e,t){const r=n.ActorRdfJoin.getRequestInitialTimes(t),i=n.ActorRdfJoin.getRequestItemTimes(t);return{iterations:t[0].cardinality.value*t[1].cardinality.value,persistedItems:0,blockingItems:0,requestTime:r[0]+t[0].cardinality.value*i[0]+r[1]+t[1].cardinality.value*i[1]}}}t.ActorRdfJoinOptionalNestedLoop=o},36920:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(90145),t)},88429:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.JoinTypes=t.ActorRdfJoinSelectivityVariableCounting=void 0;const n=r(52185),i=r(6789);class o extends n.ActorRdfJoinSelectivity{constructor(e){super(e)}async test(e){return{accuracy:.5}}static getPatternCost(e){let t=1;return"Variable"===e.subject.termType&&(t+=4),"Variable"!==e.predicate.termType&&e.type!==i.Algebra.types.PATH||(t+=1),"Variable"===e.object.termType&&(t+=2),"Variable"===e.graph.termType&&(t+=1),t/9}static getJoinTypes(e,t){const r=[];return"Variable"===e.subject.termType?(e.subject.equals(t.subject)&&r.push(a.unboundSS),"pattern"===t.type&&e.subject.equals(t.predicate)&&r.push(a.unboundSP),e.subject.equals(t.object)&&r.push(a.unboundSO),e.subject.equals(t.graph)&&r.push(a.unboundSG)):(e.subject.equals(t.subject)&&r.push(a.boundSS),"pattern"===t.type&&e.subject.equals(t.predicate)&&r.push(a.boundSP),e.subject.equals(t.object)&&r.push(a.boundSO),e.subject.equals(t.graph)&&r.push(a.boundSG)),"pattern"===e.type&&("Variable"===e.predicate.termType?(e.predicate.equals(t.subject)&&r.push(a.unboundPS),"pattern"===t.type&&e.predicate.equals(t.predicate)&&r.push(a.unboundPP),e.predicate.equals(t.object)&&r.push(a.unboundPO),e.predicate.equals(t.graph)&&r.push(a.unboundPG)):(e.predicate.equals(t.subject)&&r.push(a.boundPS),"pattern"===t.type&&e.predicate.equals(t.predicate)&&r.push(a.boundPP),e.predicate.equals(t.object)&&r.push(a.boundPO),e.predicate.equals(t.graph)&&r.push(a.boundPG))),"Variable"===e.object.termType?(e.object.equals(t.subject)&&r.push(a.unboundOS),"pattern"===t.type&&e.object.equals(t.predicate)&&r.push(a.unboundOP),e.object.equals(t.object)&&r.push(a.unboundOO),e.object.equals(t.graph)&&r.push(a.unboundOG)):(e.object.equals(t.subject)&&r.push(a.boundOS),"pattern"===t.type&&e.object.equals(t.predicate)&&r.push(a.boundOP),e.object.equals(t.object)&&r.push(a.boundOO),e.object.equals(t.graph)&&r.push(a.boundOG)),"Variable"===e.graph.termType?(e.graph.equals(t.subject)&&r.push(a.unboundGS),"pattern"===t.type&&e.graph.equals(t.predicate)&&r.push(a.unboundGP),e.graph.equals(t.object)&&r.push(a.unboundGO),e.graph.equals(t.graph)&&r.push(a.unboundGG)):(e.graph.equals(t.subject)&&r.push(a.boundGS),"pattern"===t.type&&e.graph.equals(t.predicate)&&r.push(a.boundGP),e.graph.equals(t.object)&&r.push(a.boundGO),e.graph.equals(t.graph)&&r.push(a.boundGG)),r}static getOperationsPairwiseJoinCost(e,t){let r=o.MAX_PAIRWISE_COST;for(const n of o.getJoinTypes(e,t))switch(n){case a.boundSS:r-=4;break;case a.boundSP:r-=6;break;case a.boundSO:r-=2;break;case a.boundSG:case a.boundPS:r-=6;break;case a.boundPP:return 1;case a.boundPO:case a.boundPG:r-=6;break;case a.boundOS:r-=2;break;case a.boundOP:r-=6;break;case a.boundOO:r-=2;break;case a.boundOG:case a.boundGS:case a.boundGP:case a.boundGO:case a.boundGG:r-=6;break;case a.unboundSS:r-=2;break;case a.unboundSP:r-=3;break;case a.unboundSO:r-=1;break;case a.unboundSG:case a.unboundPS:case a.unboundPP:case a.unboundPO:case a.unboundPG:r-=3;break;case a.unboundOS:r-=1;break;case a.unboundOP:r-=3;break;case a.unboundOO:r-=1;break;case a.unboundOG:case a.unboundGS:case a.unboundGP:case a.unboundGO:case a.unboundGG:r-=3}return r/o.MAX_PAIRWISE_COST}static getOperationsJoinCost(e){const t=[];for(const r of e)i.Util.recurseOperation(r,{[i.Algebra.types.PATTERN]:e=>(t.push(e),!1),[i.Algebra.types.PATH]:e=>(t.push(e),!1)});let r=0,n=0;for(const e of t)for(const i of t)e!==i&&(r+=o.getOperationsPairwiseJoinCost(e,i),n++);return r/n*t.reduce(((e,t)=>e*o.getPatternCost(t)),1)}async run(e){return e.entries.length<=1?{selectivity:1}:{selectivity:o.getOperationsJoinCost(e.entries.map((e=>e.operation)))}}}var a;t.ActorRdfJoinSelectivityVariableCounting=o,o.MAX_PAIRWISE_COST=82,function(e){e[e.boundSS=0]="boundSS",e[e.boundSP=1]="boundSP",e[e.boundSO=2]="boundSO",e[e.boundSG=3]="boundSG",e[e.boundPS=4]="boundPS",e[e.boundPP=5]="boundPP",e[e.boundPO=6]="boundPO",e[e.boundPG=7]="boundPG",e[e.boundOS=8]="boundOS",e[e.boundOP=9]="boundOP",e[e.boundOO=10]="boundOO",e[e.boundOG=11]="boundOG",e[e.boundGS=12]="boundGS",e[e.boundGP=13]="boundGP",e[e.boundGO=14]="boundGO",e[e.boundGG=15]="boundGG",e[e.unboundSS=16]="unboundSS",e[e.unboundSP=17]="unboundSP",e[e.unboundSO=18]="unboundSO",e[e.unboundSG=19]="unboundSG",e[e.unboundPS=20]="unboundPS",e[e.unboundPP=21]="unboundPP",e[e.unboundPO=22]="unboundPO",e[e.unboundPG=23]="unboundPG",e[e.unboundOS=24]="unboundOS",e[e.unboundOP=25]="unboundOP",e[e.unboundOO=26]="unboundOO",e[e.unboundOG=27]="unboundOG",e[e.unboundGS=28]="unboundGS",e[e.unboundGP=29]="unboundGP",e[e.unboundGO=30]="unboundGO",e[e.unboundGG=31]="unboundGG"}(a=t.JoinTypes||(t.JoinTypes={}))},41998:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(88429),t)},27839:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfResolveQuadPatternFederated=void 0;const n=r(58392),i=r(86571);class o extends n.ActorRdfResolveQuadPatternSource{constructor(e){super(e),this.emptyPatterns=new Map}async test(e){if(!(0,n.getContextSources)(e.context))throw new Error(`Actor ${this.name} can only resolve quad pattern queries against a sources array.`);return!0}async getSource(e){return new i.FederatedQuadSource(this.mediatorResolveQuadPattern,e,this.emptyPatterns,this.skipEmptyPatterns)}}t.ActorRdfResolveQuadPatternFederated=o},86571:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FederatedQuadSource=void 0;const n=r(58392),i=r(78470),o=r(27057),a=r(78664),s=r(91194),u=r(98086),c=r(6789),l=new s.DataFactory;class p{constructor(e,t,r,n){if(this.mediatorResolveQuadPattern=e,this.sources=t.get(i.KeysRdfResolveQuadPattern.sources),this.contextDefault=t.delete(i.KeysRdfResolveQuadPattern.sources),this.emptyPatterns=r,this.sourceIds=t.get(i.KeysRdfResolveQuadPattern.sourceIds)??new Map,this.skipEmptyPatterns=n,this.algebraFactory=new c.Factory,this.skipEmptyPatterns)for(const e of this.sources)this.emptyPatterns.has(e)||this.emptyPatterns.set(e,[])}static isTermBound(e){return"Variable"!==e.termType}static isSubPatternOf(e,t){return(!p.isTermBound(t.subject)||t.subject.equals(e.subject))&&(!p.isTermBound(t.predicate)||t.predicate.equals(e.predicate))&&(!p.isTermBound(t.object)||t.object.equals(e.object))&&(!p.isTermBound(t.graph)||t.graph.equals(e.graph))}static skolemizeTerm(e,t){return"BlankNode"===e.termType?new o.BlankNodeScoped(`bc_${t}_${e.value}`,l.namedNode(`${p.SKOLEM_PREFIX}${t}:${e.value}`)):e}static skolemizeQuad(e,t){return(0,u.mapTerms)(e,(e=>p.skolemizeTerm(e,t)))}static deskolemizeTerm(e,t){if("BlankNode"===e.termType&&"skolemized"in e&&(e=e.skolemized),"NamedNode"===e.termType&&e.value.startsWith(p.SKOLEM_PREFIX)){const r=e.value.indexOf(":",p.SKOLEM_PREFIX.length);if(e.value.slice(p.SKOLEM_PREFIX.length,r)===t){const t=e.value.slice(r+1,e.value.length);return l.blankNode(t)}return null}return e}static deskolemizeQuad(e,t){return(0,u.mapTerms)(e,(e=>p.deskolemizeTerm(e,t)||e))}isSourceEmpty(e,t){if(!this.skipEmptyPatterns)return!1;const r=this.emptyPatterns.get(e);if(r)for(const e of r)if(p.isSubPatternOf(t,e))return!0;return!1}getSourceId(e){let t=this.sourceIds.get(e);return void 0===t&&(t=`${this.sourceIds.size}`,this.sourceIds.set(e,t)),t}match(e,t,r,o){const s={cardinality:{type:"exact",value:0},canContainUndefs:!1};let u=this.sources.length;const c=(e,t,r,n)=>{this.skipEmptyPatterns&&!e&&r&&!this.isSourceEmpty(t,r)&&this.emptyPatterns.get(t).push(r),u||(n&&1===this.sources.length?d.setProperty("metadata",n):d.setProperty("metadata",s))},l=Promise.all(this.sources.map((async l=>{const f=this.getSourceId(l),h=p.deskolemizeTerm(e,f),y=p.deskolemizeTerm(t,f),g=p.deskolemizeTerm(r,f),m=p.deskolemizeTerm(o,f);let b,v,_=(0,n.getDataSourceContext)(l,this.contextDefault);_=_.set(i.KeysRdfResolveQuadPattern.source,{type:(0,n.getDataSourceType)(l),value:(0,n.getDataSourceValue)(l)}),h&&y&&g&&m&&!this.isSourceEmpty(l,b=this.algebraFactory.createPattern(h,y,g,m))?v=await this.mediatorResolveQuadPattern.mediate({pattern:b,context:_}):(v={data:new a.ArrayIterator([],{autoStart:!1})},v.data.setProperty("metadata",{cardinality:0,canContainUndefs:!1})),v.data.getProperty("metadata",(e=>{e.cardinality&&Number.isFinite(e.cardinality.value)?("estimate"===e.cardinality.type&&(s.cardinality.type="estimate"),s.cardinality.value+=e.cardinality.value,u--):(s.cardinality.type="estimate",s.cardinality.value=Number.POSITIVE_INFINITY,u=0),(s.requestTime||e.requestTime)&&(s.requestTime=s.requestTime||0,e.requestTime=e.requestTime||0,s.requestTime+=e.requestTime),(s.pageSize||e.pageSize)&&(s.pageSize=s.pageSize||0,e.pageSize=e.pageSize||0,s.pageSize+=e.pageSize),e.canContainUndefs&&(s.canContainUndefs=!0),c(s.cardinality.value,l,b,e)}));const w=v.data.map((e=>p.skolemizeQuad(e,f)));return w.on("error",(e=>d.emit("error",e))),w}))),d=new a.TransformIterator((async()=>new a.UnionIterator(await l)),{autoStart:!1});return 0===this.sources.length&&d.setProperty("metadata",s),d}}t.FederatedQuadSource=p,p.SKOLEM_PREFIX="urn:comunica_skolem:source_"},87779:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(27839),t),i(r(86571),t)},74344:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfResolveQuadPatternRdfJsSource=void 0;const n=r(58392),i=r(419);class o extends n.ActorRdfResolveQuadPatternSource{constructor(e){super(e)}async test(e){if(!(0,n.hasContextSingleSourceOfType)("rdfjsSource",e.context))throw new Error(`${this.name} requires a single source with an rdfjsSource to be present in the context.`);const t=(0,n.getContextSource)(e.context);if(!t||"string"==typeof t||!("match"in t)&&!t.value.match)throw new Error(`${this.name} received an invalid rdfjsSource.`);return!0}async getSource(e){const t=(0,n.getContextSource)(e);return new i.RdfJsQuadSource("match"in t?t:t.value)}}t.ActorRdfResolveQuadPatternRdfJsSource=o},53996:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},419:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RdfJsQuadSource=void 0;const n=r(78664);class i{constructor(e){this.source=e}static nullifyVariables(e){return e&&"Variable"!==e.termType?e:void 0}match(e,t,r,o){const a=this.source.match(i.nullifyVariables(e),i.nullifyVariables(t),i.nullifyVariables(r),i.nullifyVariables(o)),s=(0,n.wrap)(a,{autoStart:!1});return this.setMetadata(s,e,t,r,o).catch((e=>s.destroy(e))),s}async setMetadata(e,t,r,n,o){let a;if(this.source.countQuads)a=await this.source.countQuads(i.nullifyVariables(t),i.nullifyVariables(r),i.nullifyVariables(n),i.nullifyVariables(o));else{let e=0;a=await new Promise(((a,s)=>{const u=this.source.match(i.nullifyVariables(t),i.nullifyVariables(r),i.nullifyVariables(n),i.nullifyVariables(o));u.on("error",s),u.on("end",(()=>a(e))),u.on("data",(()=>e++))}))}e.setProperty("metadata",{cardinality:{type:"exact",value:a},canContainUndefs:!1})}}t.RdfJsQuadSource=i},62515:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(74344),t),i(r(53996),t),i(r(419),t)},71597:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfSerializeJsonLd=void 0;const n=r(51072),i=r(82694);class o extends n.ActorRdfSerializeFixedMediaTypes{constructor(e){super(e)}async runHandle(e,t,r){return{data:new i.JsonLdSerializer({space:" ".repeat(this.jsonStringifyIndentSpaces)}).import(e.quadStream)}}}t.ActorRdfSerializeJsonLd=o},21336:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(71597),t)},24668:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfSerializeN3=void 0;const n=r(51072),i=r(66641);class o extends n.ActorRdfSerializeFixedMediaTypes{constructor(e){super(e)}async runHandle(e,t,r){return{data:new i.StreamWriter({format:t}).import(e.quadStream),triples:"text/turtle"===t||"application/n-triples"===t||"text/n3"===t}}}t.ActorRdfSerializeN3=o},97021:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(24668),t)},77428:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfUpdateQuadsRdfJsStore=void 0;const n=r(58595),i=r(65024);class o extends n.ActorRdfUpdateQuadsDestination{constructor(e){super(e)}async test(e){const t=(0,n.getContextDestination)(e.context);if(!t||"string"==typeof t||!("remove"in t)&&"value"in t&&!t.value.remove)throw new Error(`${this.name} received an invalid rdfjsStore.`);return!0}async getDestination(e){const t=(0,n.getContextDestination)(e);return new i.RdfJsQuadDestination("remove"in t?t:t.value)}}t.ActorRdfUpdateQuadsRdfJsStore=o},65024:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.RdfJsQuadDestination=void 0;const n=r(91194),i=r(6053),o=new n.DataFactory;t.RdfJsQuadDestination=class{constructor(e){this.store=e}promisifyEventEmitter(e){return new Promise(((t,r)=>{e.on("end",t),e.on("error",r)}))}delete(e){return this.promisifyEventEmitter(this.store.remove(e))}insert(e){return this.promisifyEventEmitter(this.store.import(e))}async deleteGraphs(e,t,r){switch(e){case"ALL":await this.promisifyEventEmitter(this.store.deleteGraph(o.defaultGraph()));case"NAMED":const t=this.store.match(),r={};t.on("data",(e=>{"DefaultGraph"!==e.graph.termType&&(r[(0,i.termToString)(e.graph)]=!0)})),await this.promisifyEventEmitter(t),await Promise.all(Object.keys(r).map((e=>this.promisifyEventEmitter(this.store.deleteGraph((0,i.stringToTerm)(e))))));break;default:for(const t of Array.isArray(e)?e:[e])await this.promisifyEventEmitter(this.store.deleteGraph(t))}}async createGraphs(e,t){if(t)for(const t of e){const e=this.store.match(void 0,void 0,void 0,t);await new Promise(((r,n)=>{e.once("data",(()=>{n(new Error(`Unable to create graph ${t.value} as it already exists`))})),e.on("end",r),e.on("error",n)}))}}}},2340:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(77428),t)},35681:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bindings=void 0;const n=r(27623),i=r(49836);class o{constructor(e,t){this.type="bindings",this.dataFactory=e,this.entries=t}has(e){return this.entries.has("string"==typeof e?e:e.value)}get(e){return this.entries.get("string"==typeof e?e:e.value)}set(e,t){return new o(this.dataFactory,this.entries.set("string"==typeof e?e:e.value,t))}delete(e){return new o(this.dataFactory,this.entries.delete("string"==typeof e?e:e.value))}keys(){return this.mapIterable(this.iteratorToIterable(this.entries.keys()),(e=>this.dataFactory.variable(e)))}values(){return this.iteratorToIterable(this.entries.values())}forEach(e){this.entries.forEach(((t,r)=>e(t,this.dataFactory.variable(r))))}get size(){return this.entries.size}[Symbol.iterator](){return this.mapIterable(this.iteratorToIterable(this.entries.entries()),(([e,t])=>[this.dataFactory.variable(e),t]))[Symbol.iterator]()}equals(e){if(!e)return!1;if(this===e)return!0;if(this.size!==e.size)return!1;for(const t of this.keys())if(!this.get(t)?.equals(e.get(t)))return!1;return!0}filter(e){return new o(this.dataFactory,(0,n.Map)(this.entries.filter(((t,r)=>e(t,this.dataFactory.variable(r))))))}map(e){return new o(this.dataFactory,(0,n.Map)(this.entries.map(((t,r)=>e(t,this.dataFactory.variable(r))))))}merge(e){const t=new Set([...this.iteratorToIterable(this.entries.keys()),...[...e.keys()].map((e=>e.value))]),r=[];for(const n of t){const t=this.entries.get(n),i=e.get(this.dataFactory.variable(n));if(t&&i&&!t.equals(i))return;const o=t||i;r.push([n,o])}return new o(this.dataFactory,(0,n.Map)(r))}mergeWith(e,t){const r=new Set([...this.iteratorToIterable(this.entries.keys()),...[...t.keys()].map((e=>e.value))]),i=[];for(const n of r){const r=this.dataFactory.variable(n),o=this.entries.get(n),a=t.get(r);let s;s=o&&a&&!o.equals(a)?e(o,a,r):o||a,i.push([n,s])}return new o(this.dataFactory,(0,n.Map)(i))}toString(){return(0,i.bindingsToString)(this)}*mapIterable(e,t){for(const r of e)yield t(r)}iteratorToIterable(e){return{[Symbol.iterator]:()=>e}}}t.Bindings=o},49239:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BindingsFactory=void 0;const n=r(27623),i=r(91194),o=r(35681);t.BindingsFactory=class{constructor(e=new i.DataFactory){this.dataFactory=e}bindings(e=[]){return new o.Bindings(this.dataFactory,(0,n.Map)(e.map((([e,t])=>[e.value,t]))))}fromBindings(e){return this.bindings([...e])}fromRecord(e){return this.bindings(Object.entries(e).map((([e,t])=>[this.dataFactory.variable(e),t])))}}},49836:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.bindingsToString=void 0;const n=r(6053);t.bindingsToString=function(e){const t={};for(const r of e.keys())t[r.value]=(0,n.termToString)(e.get(r));return JSON.stringify(t,null,"  ")}},79550:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(35681),t),i(r(49239),t),i(r(49836),t)},73313:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorContextPreprocess=void 0;const n=r(21049);class i extends n.Actor{constructor(e){super(e)}}t.ActorContextPreprocess=i},20846:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(73313),t)},90927:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorHashBindings=void 0;const n=r(21049);class i extends n.Actor{constructor(e){super(e)}}t.ActorHashBindings=i},47582:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(90927),t)},14145:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorHttp=void 0;const n=r(21049),i=r(88146),o=r(58607),a=r(82673).toWebReadableStream;class s extends n.Actor{constructor(e){super(e)}static toNodeReadable(e){return o(e)||null===e?e:new i.ReadableWebToNodeStream(e)}static toWebReadableStream(e){return a(e)}static headersToHash(e){const t={};return e.forEach(((e,r)=>{t[r]=e})),t}}t.ActorHttp=s},80389:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(14145),t)},97327:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorInit=void 0;const n=r(21049);class i extends n.Actor{constructor(e){super(e)}}t.ActorInit=i},40104:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(97327),t)},5227:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorOptimizeQueryOperation=void 0;const n=r(21049);class i extends n.Actor{constructor(e){super(e)}}t.ActorOptimizeQueryOperation=i},9302:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(5227),t)},44346:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperation=void 0;const n=r(78470),i=r(21049),o=r(27057),a=r(87804);let s=0;class u extends i.Actor{constructor(e){super(e)}static getSafeBindings(e){return u.validateQueryOutput(e,"bindings"),e}static getSafeQuads(e){return u.validateQueryOutput(e,"quads"),e}static getSafeBoolean(e){return u.validateQueryOutput(e,"boolean"),e}static getSafeVoid(e){return u.validateQueryOutput(e,"void"),e}static cachifyMetadata(e){let t;return()=>t||(t=e())}static validateQueryOutput(e,t){if(e.type!==t)throw new Error(`Invalid query output type: Expected '${t}' but got '${e.type}'`)}static getBaseExpressionContext(e){const t=e.get(n.KeysInitQuery.queryTimestamp),r=e.get(n.KeysInitQuery.baseIRI);if(e.has(n.KeysInitQuery.extensionFunctionCreator)&&e.has(n.KeysInitQuery.extensionFunctions))throw new Error("Illegal simultaneous usage of extensionFunctionCreator and extensionFunctions in context");let i=e.get(n.KeysInitQuery.extensionFunctionCreator);const o=e.get(n.KeysInitQuery.extensionFunctions);return o&&(i=e=>o[e.value]),{now:t,baseIRI:r,extensionFunctionCreator:i}}static getExpressionContext(e,t){return{...this.getBaseExpressionContext(e),bnode:e=>new o.BlankNodeBindingsScoped(e||"BNODE_"+s++)}}static getAsyncExpressionContext(e,t){const r={...this.getBaseExpressionContext(e),bnode:e=>Promise.resolve(new o.BlankNodeBindingsScoped(e||"BNODE_"+s++))};return t&&(r.exists=u.createExistenceResolver(e,t)),r}static createExistenceResolver(e,t){return async(r,n)=>{const i=(0,a.materializeOperation)(r.input,n),o=await t.mediate({operation:i,context:e}),s=u.getSafeBindings(o);return new Promise(((e,t)=>{s.bindingsStream.on("end",(()=>{e(!1)})),s.bindingsStream.on("error",t),s.bindingsStream.on("data",(()=>{s.bindingsStream.close(),e(!0)}))})).then((e=>r.not?!e:e))}}static throwOnReadOnly(e){if(e.get(n.KeysQueryOperation.readOnly))throw new Error("Attempted a write operation in read-only mode")}}t.ActorQueryOperation=u},3312:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationTyped=void 0;const n=r(78470),i=r(44346);class o extends i.ActorQueryOperation{constructor(e,t){if(super({...e,operationName:t}),!this.operationName)throw new Error('A valid "operationName" argument must be provided.')}async test(e){if(!e.operation)throw new Error("Missing field 'operation' in a query operation action.");if(e.operation.type!==this.operationName)throw new Error(`Actor ${this.name} only supports ${this.operationName} operations, but got ${e.operation.type}`);const t=e.operation;return this.testOperation(t,e.context)}async run(e){const t=e.context.get(n.KeysInitQuery.physicalQueryPlanLogger);t&&(t.logOperation(e.operation.type,void 0,e.operation,e.context.get(n.KeysInitQuery.physicalQueryPlanNode),this.name,{}),e.context=e.context.set(n.KeysInitQuery.physicalQueryPlanNode,e.operation));const r=e.operation,o=e.context.set(n.KeysQueryOperation.operation,r),a=await this.runOperation(r,o);return"metadata"in a&&(a.metadata=i.ActorQueryOperation.cachifyMetadata(a.metadata)),a}}t.ActorQueryOperationTyped=o},95748:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryOperationTypedMediated=void 0;const n=r(3312);class i extends n.ActorQueryOperationTyped{constructor(e,t){super(e,t)}}t.ActorQueryOperationTypedMediated=i},87804:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.materializeOperation=t.materializeTerm=void 0;const n=r(79550),i=r(6053),o=r(6789),a=new n.BindingsFactory;function s(e,t){if("Variable"===e.termType){const r=t.get(e);if(r)return r}return e}t.materializeTerm=s,t.materializeOperation=function e(t,r,n={}){return n={strictTargetVariables:"strictTargetVariables"in n&&n.strictTargetVariables,bindFilter:!("bindFilter"in n)||n.bindFilter},o.Util.mapOperation(t,{path:(e,t)=>({recurse:!1,result:t.createPath(s(e.subject,r),e.predicate,s(e.object,r),s(e.graph,r))}),pattern:(e,t)=>({recurse:!1,result:t.createPattern(s(e.subject,r),s(e.predicate,r),s(e.object,r),s(e.graph,r))}),extend(t){if(r.has(t.variable)){if(n.strictTargetVariables)throw new Error(`Tried to bind variable ${(0,i.termToString)(t.variable)} in a BIND operator.`);return{recurse:!0,result:e(t.input,r,n)}}return{recurse:!0,result:t}},group(e,t){if(n.strictTargetVariables){for(const t of e.variables)if(r.has(t))throw new Error(`Tried to bind variable ${(0,i.termToString)(t)} in a GROUP BY operator.`);return{recurse:!0,result:e}}const o=e.variables.filter((e=>!r.has(e)));return{recurse:!0,result:t.createGroup(e.input,o,e.aggregates)}},project(t,o){if(n.strictTargetVariables){for(const e of t.variables)if(r.has(e))throw new Error(`Tried to bind variable ${(0,i.termToString)(e)} in a SELECT operator.`);return{recurse:!0,result:t}}const s=t.variables.filter((e=>!r.has(e))),u=a.bindings(t.variables.map((e=>{const t=r.get(e);if(t)return[e,t]})).filter((e=>Boolean(e))));return{recurse:!1,result:o.createProject(e(t.input,u,n),s)}},values(e,t){if(!n.strictTargetVariables){const n=e.variables.filter((e=>!r.has(e))),o=e.bindings.map((e=>{const t={...e};let n=!0;return r.forEach(((e,r)=>{const o=(0,i.termToString)(r);o in t&&(e.equals(t[o])||(n=!1),delete t[o])})),n?t:void 0})).filter(Boolean);return{recurse:!0,result:t.createValues(n,o)}}for(const t of e.variables)if(r.has(t))throw new Error(`Tried to bind variable ${(0,i.termToString)(t)} in a VALUES operator.`);return{recurse:!1,result:e}},expression(e,t){if(!n.bindFilter)return{recurse:!1,result:e};if("term"===e.expressionType)return{recurse:!1,result:t.createTermExpression(s(e.term,r))};if("aggregate"===e.expressionType&&"variable"in e&&r.has(e.variable)){if(n.strictTargetVariables)throw new Error(`Tried to bind ${(0,i.termToString)(e.variable)} in a ${e.aggregator} aggregate.`);return{recurse:!0,result:e}}return{recurse:!0,result:e}}})}},58235:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BusQueryOperation=void 0;const n=r(21049);class i extends n.BusIndexed{constructor(e){super({...e,actorIdentifierFields:["operationName"],actionIdentifierFields:["operation","type"]})}}t.BusQueryOperation=i},83814:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(44346),t),i(r(3312),t),i(r(95748),t),i(r(87804),t),i(r(58235),t)},79018:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryParse=void 0;const n=r(21049);class i extends n.Actor{constructor(e){super(e)}}t.ActorQueryParse=i},21744:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(79018),t)},36519:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryResultSerialize=void 0;const n=r(89208);class i extends n.ActorAbstractMediaTyped{constructor(e){super(e)}}t.ActorQueryResultSerialize=i},55313:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorQueryResultSerializeFixedMediaTypes=void 0;const n=r(89208);class i extends n.ActorAbstractMediaTypedFixed{constructor(e){super(e)}async testHandleChecked(e,t){return!0}}t.ActorQueryResultSerializeFixedMediaTypes=i},42351:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(36519),t),i(r(55313),t)},7215:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfJoinEntriesSort=void 0;const n=r(21049);class i extends n.Actor{constructor(e){super(e)}}t.ActorRdfJoinEntriesSort=i},48955:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(7215),t)},75074:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfJoinSelectivity=void 0;const n=r(21049);class i extends n.Actor{constructor(e){super(e)}}t.ActorRdfJoinSelectivity=i},52185:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(75074),t)},53409:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfJoin=void 0;const n=r(83814),i=r(78470),o=r(21049),a=r(91194),s=r(6053),u=new a.DataFactory;class c extends o.Actor{constructor(e,t){super(e),this.includeInLogs=!0,this.logicalType=t.logicalType,this.physicalName=t.physicalName,this.limitEntries=t.limitEntries??Number.POSITIVE_INFINITY,this.limitEntriesMin=t.limitEntriesMin??!1,this.canHandleUndefs=t.canHandleUndefs??!1}static hash(e,t){return t.filter((t=>e.has(t))).map((t=>(0,s.termToString)(e.get(t)))).join("")}static overlappingVariables(e){const t=e.map((e=>e.variables));let r=t[0];for(const e of t.slice(1))r=r.filter((t=>e.some((e=>e.value===t.value))));return r}static joinVariables(e){return[...new Set(e.flatMap((e=>e.variables.map((e=>e.value)))))].map((e=>u.variable(e)))}static joinBindings(...e){if(0===e.length)return null;if(1===e.length)return e[0];let t=e[0];for(const r of e.slice(1)){const e=t.merge(r);if(!e)return null;t=e}return t}static getCardinality(e){return e.cardinality}static async getMetadatas(e){return await Promise.all(e.map((e=>e.output.metadata())))}static async getEntriesWithMetadatas(e){const t=await c.getMetadatas(e);return e.map(((e,r)=>({...e,metadata:t[r]})))}static getRequestInitialTimes(e){return e.map((e=>e.pageSize?0:e.requestTime||0))}static getRequestItemTimes(e){return e.map((e=>e.pageSize?(e.requestTime||0)/e.pageSize:0))}async constructResultMetadata(e,t,r,n={}){let i;return n.cardinality?i=n.cardinality:(i=t.reduce(((e,t)=>{const r=c.getCardinality(t);return{type:"estimate"===r.type?"estimate":e.type,value:e.value*r.value}}),{type:"exact",value:1}),i.value*=(await this.mediatorJoinSelectivity.mediate({entries:e,context:r})).selectivity),{...n,cardinality:{type:i.type,value:i.value},canContainUndefs:n.canContainUndefs??t.some((e=>e.canContainUndefs)),variables:c.joinVariables(t)}}async test(e){if(e.type!==this.logicalType)throw new Error(`${this.name} can only handle logical joins of type '${this.logicalType}', while '${e.type}' was given.`);if(e.entries.length<=1)throw new Error(`${this.name} requires at least two join entries.`);if(this.limitEntriesMin?e.entries.length<this.limitEntries:e.entries.length>this.limitEntries)throw new Error(`${this.name} requires ${this.limitEntries} join entries at ${this.limitEntriesMin?"least":"most"}. The input contained ${e.entries.length}.`);for(const t of e.entries)if("bindings"!==t.output.type)throw new Error(`Invalid type of a join entry: Expected 'bindings' but got '${t.output.type}'`);const t=await c.getMetadatas(e.entries);if(!this.canHandleUndefs)for(const e of t)if(e.canContainUndefs)throw new Error(`Actor ${this.name} can not join streams containing undefs`);return await this.getJoinCoefficients(e,t)}async run(e){let t;e.context.has(i.KeysInitQuery.physicalQueryPlanLogger)&&(t=e.context.get(i.KeysInitQuery.physicalQueryPlanNode),e.context=e.context.set(i.KeysInitQuery.physicalQueryPlanNode,e));const r=e.context.get(i.KeysInitQuery.physicalQueryPlanLogger);let o;this.includeInLogs&&r&&(o={},r.logOperation(`join-${this.logicalType}`,this.physicalName,e,t,this.name,o));const{result:a,physicalPlanMetadata:s}=await this.getOutput(e),u=await c.getMetadatas(e.entries);return o&&(Object.assign(o,s),o.cardinalities=u.map(c.getCardinality),o.joinCoefficients=await this.getJoinCoefficients(e,u)),a.metadata=n.ActorQueryOperation.cachifyMetadata(a.metadata),a}}t.ActorRdfJoin=c},97045:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(53409),t)},90:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfResolveQuadPattern=void 0;const n=r(21049);class i extends n.Actor{constructor(e){super(e)}}t.ActorRdfResolveQuadPattern=i},1795:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfResolveQuadPatternSource=void 0;const n=r(90);class i extends n.ActorRdfResolveQuadPattern{constructor(e){super(e)}async test(e){return!0}async run(e){const t=await this.getSource(e.context,e.pattern);return await this.getOutput(t,e.pattern,e.context)}async getOutput(e,t,r){return{data:e.match(t.subject,t.predicate,t.object,t.graph)}}}t.ActorRdfResolveQuadPatternSource=i},58392:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(90),t),i(r(1795),t),i(r(18165),t)},18165:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasContextSingleSourceOfType=t.hasContextSingleSource=t.getContextSourceUrl=t.getContextSourceFirst=t.getContextSource=t.getContextSources=t.getDataSourceContext=t.getDataSourceValue=t.getDataSourceType=t.isDataSourceRawType=void 0;const n=r(78470);function i(e){return"string"==typeof e||"match"in e}function o(e){return"string"==typeof e?"":"match"in e?"rdfjsSource":e.type}function a(e){return i(e)?e:e.value}function s(e){return e.get(n.KeysRdfResolveQuadPattern.source)}t.isDataSourceRawType=i,t.getDataSourceType=o,t.getDataSourceValue=a,t.getDataSourceContext=function(e,t){return"string"==typeof e||"match"in e||!e.context?t:t.merge(e.context)},t.getContextSources=function(e){return e.get(n.KeysRdfResolveQuadPattern.sources)},t.getContextSource=s,t.getContextSourceFirst=function(e){if(e.has(n.KeysRdfResolveQuadPattern.source))return e.get(n.KeysRdfResolveQuadPattern.source);const t=e.get(n.KeysRdfResolveQuadPattern.sources);return 1===t?.length?t[0]:void 0},t.getContextSourceUrl=function(e){if(e){let t=a(e);if("string"==typeof t){const e=t.indexOf("#");return e>=0&&(t=t.slice(0,e)),t}}},t.hasContextSingleSource=function(e){const t=s(e);return Boolean(t&&(i(t)||t.value))},t.hasContextSingleSourceOfType=function(e,t){const r=s(t);return Boolean(r&&o(r)===e&&a(r))}},40994:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfSerialize=void 0;const n=r(89208);class i extends n.ActorAbstractMediaTyped{constructor(e){super(e)}}t.ActorRdfSerialize=i},56466:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfSerializeFixedMediaTypes=void 0;const n=r(89208);class i extends n.ActorAbstractMediaTypedFixed{constructor(e){super(e)}async testHandleChecked(e){return!0}}t.ActorRdfSerializeFixedMediaTypes=i},51072:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(40994),t),i(r(56466),t)},88143:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfUpdateQuads=void 0;const n=r(21049);class i extends n.Actor{constructor(e){super(e)}}t.ActorRdfUpdateQuads=i},49864:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActorRdfUpdateQuadsDestination=t.deskolemize=t.deskolemizeStream=void 0;const n=r(87779),i=r(78470),o=r(88143);function a(e,t){return e?.map((e=>n.FederatedQuadSource.deskolemizeQuad(e,t)))}function s(e){const t=e.context.get(i.KeysRdfUpdateQuads.destination),r=e.context.get(i.KeysRdfResolveQuadPattern.sourceIds)?.get(t);return r?{...e,quadStreamInsert:a(e.quadStreamInsert,r),quadStreamDelete:a(e.quadStreamDelete,r)}:e}t.deskolemizeStream=a,t.deskolemize=s;class u extends o.ActorRdfUpdateQuads{async test(e){return!0}async run(e){const t=await this.getDestination(e.context);return await this.getOutput(t,s(e),e.context)}async getOutput(e,t,r){return{execute:()=>Promise.all([t.quadStreamInsert?e.insert(t.quadStreamInsert):Promise.resolve(),t.quadStreamDelete?e.delete(t.quadStreamDelete):Promise.resolve(),t.deleteGraphs?e.deleteGraphs(t.deleteGraphs.graphs,t.deleteGraphs.requireExistence,t.deleteGraphs.dropGraphs):Promise.resolve(),t.createGraphs?e.createGraphs(t.createGraphs.graphs,t.createGraphs.requireNonExistence):Promise.resolve()]).then((()=>{}))}}}t.ActorRdfUpdateQuadsDestination=u},93744:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateHttpResponse=void 0;const n=r(80389),i=r(29038);t.validateHttpResponse=async function(e,t){if(t.status>=400){let r="empty response";if(t.body){const e=n.ActorHttp.toNodeReadable(t.body);r=await i(e)}throw new Error(`Could not update ${e} (HTTP status ${t.status}):\n${r}`)}await(t.body?.cancel())}},58595:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(88143),t),i(r(49864),t),i(r(93744),t),i(r(71180),t)},71180:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getContextDestinationUrl=t.getContextDestinationFirst=t.getContextDestination=t.getDataDestinationContext=t.getDataDestinationValue=t.getDataDestinationType=t.isDataDestinationRawType=void 0;const n=r(78470);function i(e){return"string"==typeof e||"remove"in e}function o(e){return i(e)?e:e.value}t.isDataDestinationRawType=i,t.getDataDestinationType=function(e){return"string"==typeof e?"":"remove"in e?"rdfjsStore":e.type},t.getDataDestinationValue=o,t.getDataDestinationContext=function(e,t){return"string"==typeof e||"remove"in e||!e.context?t:t.merge(e.context)},t.getContextDestination=function(e){return e.get(n.KeysRdfUpdateQuads.destination)},t.getContextDestinationFirst=function(e){if(e.has(n.KeysRdfUpdateQuads.destination))return e.get(n.KeysRdfUpdateQuads.destination)},t.getContextDestinationUrl=function(e){if(e){let t=o(e);if("string"==typeof t){const e=t.indexOf("#");return e>=0&&(t=t.slice(0,e)),t}}}},6180:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.KeysRdfUpdateQuads=t.KeysRdfResolveQuadPattern=t.KeysRdfParseHtmlScript=t.KeysRdfParseJsonLd=t.KeysQueryOperation=t.KeysInitQuery=t.KeysHttpProxy=t.KeysHttpMemento=t.KeysHttp=t.KeysCore=void 0;const n=r(21049);t.KeysCore={log:n.CONTEXT_KEY_LOGGER},t.KeysHttp={includeCredentials:new n.ActionContextKey("@comunica/bus-http:include-credentials"),auth:new n.ActionContextKey("@comunica/bus-http:auth"),fetch:new n.ActionContextKey("@comunica/bus-http:fetch"),httpTimeout:new n.ActionContextKey("@comunica/bus-http:http-timeout"),httpBodyTimeout:new n.ActionContextKey("@comunica/bus-http:http-body-timeout")},t.KeysHttpMemento={datetime:new n.ActionContextKey("@comunica/actor-http-memento:datetime")},t.KeysHttpProxy={httpProxyHandler:new n.ActionContextKey("@comunica/actor-http-proxy:httpProxyHandler")},t.KeysInitQuery={initialBindings:new n.ActionContextKey("@comunica/actor-init-query:initialBindings"),queryFormat:new n.ActionContextKey("@comunica/actor-init-query:queryFormat"),graphqlSingularizeVariables:new n.ActionContextKey("@comunica/actor-init-query:singularizeVariables"),lenient:new n.ActionContextKey("@comunica/actor-init-query:lenient"),queryString:new n.ActionContextKey("@comunica/actor-init-query:queryString"),query:new n.ActionContextKey("@comunica/actor-init-query:query"),baseIRI:new n.ActionContextKey("@comunica/actor-init-query:baseIRI"),queryTimestamp:new n.ActionContextKey("@comunica/actor-init-query:queryTimestamp"),extensionFunctionCreator:new n.ActionContextKey("@comunica/actor-init-query:extensionFunctionCreator"),extensionFunctions:new n.ActionContextKey("@comunica/actor-init-query:extensionFunctions"),cliArgsHandlers:new n.ActionContextKey("@comunica/actor-init-query:cliArgsHandlers"),explain:new n.ActionContextKey("@comunica/actor-init-query:explain"),physicalQueryPlanLogger:new n.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanLogger"),physicalQueryPlanNode:new n.ActionContextKey("@comunica/actor-init-query:physicalQueryPlanNode"),jsonLdContext:new n.ActionContextKey("@context")},t.KeysQueryOperation={operation:new n.ActionContextKey("@comunica/bus-query-operation:operation"),joinLeftMetadata:new n.ActionContextKey("@comunica/bus-query-operation:joinLeftMetadata"),joinRightMetadatas:new n.ActionContextKey("@comunica/bus-query-operation:joinRightMetadatas"),joinBindings:new n.ActionContextKey("@comunica/bus-query-operation:joinBindings"),readOnly:new n.ActionContextKey("@comunica/bus-query-operation:readOnly"),isPathArbitraryLengthDistinctKey:new n.ActionContextKey("@comunica/bus-query-operation:isPathArbitraryLengthDistinct"),limitIndicator:new n.ActionContextKey("@comunica/bus-query-operation:limitIndicator"),unionDefaultGraph:new n.ActionContextKey("@comunica/bus-query-operation:unionDefaultGraph")},t.KeysRdfParseJsonLd={documentLoader:new n.ActionContextKey("@comunica/actor-rdf-parse-jsonld:documentLoader"),strictValues:new n.ActionContextKey("@comunica/actor-rdf-parse-jsonld:strictValues"),parserOptions:new n.ActionContextKey("@comunica/actor-rdf-parse-jsonld:parserOptions")},t.KeysRdfParseHtmlScript={processingHtmlScript:new n.ActionContextKey("@comunica/actor-rdf-parse-html-script:processingHtmlScript"),extractAllScripts:new n.ActionContextKey("extractAllScripts")},t.KeysRdfResolveQuadPattern={sources:new n.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:sources"),source:new n.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:source"),sourceIds:new n.ActionContextKey("@comunica/bus-rdf-resolve-quad-pattern:sourceIds")},t.KeysRdfUpdateQuads={destination:new n.ActionContextKey("@comunica/bus-rdf-update-quads:destination")}},78470:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(6180),t)},81662:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionContextKey=t.ActionContext=void 0;const n=r(27623);class i{constructor(e={}){this.map=(0,n.Map)(e)}setDefault(e,t){return this.has(e)?this:this.set(e,t)}set(e,t){return this.setRaw(e.name,t)}setRaw(e,t){return new i(this.map.set(e,t))}delete(e){return new i(this.map.delete(e.name))}get(e){return this.getRaw(e.name)}getRaw(e){return this.map.get(e)}getSafe(e){if(!this.has(e))throw new Error(`Context entry ${e.name} is required but not available`);return this.get(e)}has(e){return this.hasRaw(e.name)}hasRaw(e){return this.map.has(e)}merge(...e){let t=this;for(const r of e)for(const e of r.keys())t=t.set(e,r.get(e));return t}keys(){return[...this.map.keys()].map((e=>new o(e)))}toJS(){return this.map.toJS()}toString(){return`ActionContext(${JSON.stringify(this.map.toJS())})`}[Symbol.for("nodejs.util.inspect.custom")](){return`ActionContext(${JSON.stringify(this.map.toJS(),null,"  ")})`}static ensureActionContext(e){return e instanceof i?e:new i((0,n.Map)(e||{}))}}t.ActionContext=i;class o{constructor(e){this.name=e}}t.ActionContextKey=o},13650:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ActionObserver=void 0,t.ActionObserver=class{constructor(e){Object.assign(this,e)}}},47405:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Actor=void 0;const n=r(13832);class i{constructor(e){this.beforeActors=[],Object.assign(this,e),this.bus.subscribe(this),this.beforeActors.length>0&&this.bus.addDependencies(this,this.beforeActors)}static getContextLogger(e){return e.get(n.CONTEXT_KEY_LOGGER)}runObservable(e){const t=this.run(e);return this.bus.onRun(this,e,t),t}async initialize(){return!0}async deinitialize(){return!0}getDefaultLogData(e,t){const r=t?t():{};return r.actor=this.name,r}logTrace(e,t,r){const n=i.getContextLogger(e);n&&n.trace(t,this.getDefaultLogData(e,r))}logDebug(e,t,r){const n=i.getContextLogger(e);n&&n.debug(t,this.getDefaultLogData(e,r))}logInfo(e,t,r){const n=i.getContextLogger(e);n&&n.info(t,this.getDefaultLogData(e,r))}logWarn(e,t,r){const n=i.getContextLogger(e);n&&n.warn(t,this.getDefaultLogData(e,r))}logError(e,t,r){const n=i.getContextLogger(e);n&&n.error(t,this.getDefaultLogData(e,r))}logFatal(e,t,r){const n=i.getContextLogger(e);n&&n.fatal(t,this.getDefaultLogData(e,r))}}t.Actor=i},56910:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Bus=void 0,t.Bus=class{constructor(e){this.actors=[],this.observers=[],this.dependencyLinks=new Map,Object.assign(this,e)}subscribe(e){this.actors.push(e),this.reorderForDependencies()}subscribeObserver(e){this.observers.push(e)}unsubscribe(e){const t=this.actors.indexOf(e);return t>=0&&(this.actors.splice(t,1),!0)}unsubscribeObserver(e){const t=this.observers.indexOf(e);return t>=0&&(this.observers.splice(t,1),!0)}publish(e){return this.actors.map((t=>({actor:t,reply:t.test(e)})))}onRun(e,t,r){for(const n of this.observers)n.onRun(e,t,r)}addDependencies(e,t){for(const r of t){let t=this.dependencyLinks.get(r);t||(t=[],this.dependencyLinks.set(r,t)),t.push(e)}this.reorderForDependencies()}reorderForDependencies(){if(this.dependencyLinks.size>0){const e=[];for(const t of this.dependencyLinks.keys()){const r=this.actors.indexOf(t);r>=0&&(this.actors.splice(r,1),e.push(t))}for(;e.length>0;){let t=-1;for(let r=0;r<e.length;r++){let n=!0;for(const t of this.dependencyLinks.get(e[r]))if(!this.actors.includes(t)&&e.includes(t)){n=!1;break}if(n){t=r;break}}if(t<0)throw new Error(`Cyclic dependency links detected in bus ${this.name}`);const r=e.splice(t,1)[0];this.actors.push(r)}}}}},52430:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BusIndexed=void 0;const n=r(56910);class i extends n.Bus{constructor(e){super(e),this.actorsIndex={}}subscribe(e){const t=this.getActorIdentifier(e)||"_undefined_";let r=this.actorsIndex[t];r||(r=this.actorsIndex[t]=[]),r.push(e),super.subscribe(e)}unsubscribe(e){const t=this.getActorIdentifier(e)||"_undefined_",r=this.actorsIndex[t];if(r){const n=r.indexOf(e);n>=0&&r.splice(n,1),0===r.length&&delete this.actorsIndex[t]}return super.unsubscribe(e)}publish(e){const t=this.getActionIdentifier(e);return t?[...this.actorsIndex[t]||[],...this.actorsIndex._undefined_||[]].map((t=>({actor:t,reply:t.test(e)}))):super.publish(e)}getActorIdentifier(e){return this.actorIdentifierFields.reduce(((e,t)=>e[t]),e)}getActionIdentifier(e){return this.actionIdentifierFields.reduce(((e,t)=>e[t]),e)}}t.BusIndexed=i},13832:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CONTEXT_KEY_LOGGER=void 0;const n=r(81662);t.CONTEXT_KEY_LOGGER=new n.ActionContextKey("@comunica/core:log")},39014:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Mediator=void 0,t.Mediator=class{constructor(e){Object.assign(this,e)}publish(e){const t=this.bus.publish(e);if(0===t.length)throw new Error(`No actors are able to reply to a message in the bus ${this.bus.name}`);return t}async mediateActor(e){return await this.mediateWith(e,this.publish(e))}async mediate(e){return(await this.mediateActor(e)).runObservable(e)}}},21049:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;const o=r(24331).Logger;t.Logger=o,i(r(81662),t),i(r(56910),t),i(r(52430),t),i(r(13832),t),i(r(13650),t),i(r(47405),t),i(r(39014),t)},77265:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlankNodeBindingsScoped=void 0,t.BlankNodeBindingsScoped=class{constructor(e){this.termType="BlankNode",this.singleBindingsScope=!0,this.value=e}equals(e){return!!e&&"BlankNode"===e.termType&&e.value===this.value}}},61705:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BlankNodeScoped=void 0,t.BlankNodeScoped=class{constructor(e,t){this.termType="BlankNode",this.value=e,this.skolemized=t}equals(e){return!!e&&"BlankNode"===e.termType&&e.value===this.value}}},27057:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(61705),t),i(r(77265),t)},37045:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LoggerVoid=void 0;const n=r(24331);class i extends n.Logger{debug(){}error(){}fatal(){}info(){}trace(){}warn(){}}t.LoggerVoid=i},60738:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(37045),t)},85170:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediatorAll=void 0;const n=r(21049);class i extends n.Mediator{constructor(e){super(e)}async mediate(e){const t=[];let r;try{r=this.publish(e)}catch{r=[]}for(const e of r)try{await e.reply,t.push(e.actor)}catch{}return(await Promise.all(t.map((t=>t.runObservable(e)))))[0]}async mediateWith(){throw new Error("Unsupported operation: MediatorAll#mediateWith")}}t.MediatorAll=i},95069:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(85170),t)},67979:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediatorCombinePipeline=void 0;const n=r(21049);class i extends n.Mediator{constructor(e){super(e)}async mediate(e){let t;try{t=this.publish(e)}catch{return e}if(this.filterErrors){const e=[];for(const r of t)try{await r.reply,e.push(r)}catch{}t=e}if(t=await Promise.all(t.map((async({actor:e,reply:t})=>({actor:e,reply:await t})))),this.order){const e=e=>{const t=this.field?e[this.field]:e;if("number"!=typeof t)throw new Error("Cannot order elements that are not numbers.");return t};t=t.sort(((t,r)=>("increasing"===this.order?1:-1)*(e(t.reply)-e(r.reply))))}let r=e;for(const{actor:e}of t)r={...r,...await e.runObservable(r)};return r}mediateWith(){throw new Error("Method not supported.")}}t.MediatorCombinePipeline=i},84190:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(67979),t)},12396:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediatorCombineUnion=void 0;const n=r(21049);class i extends n.Mediator{constructor(e){super(e),this.combiner=this.createCombiner()}async mediate(e){let t;try{t=this.publish(e)}catch{t=[]}await Promise.all(t.map((({reply:e})=>e)));const r=await Promise.all(t.map((t=>t.actor.runObservable(e))));return this.combiner(r)}mediateWith(){throw new Error("Method not supported.")}createCombiner(){return e=>{const t={};return t[this.field]={},[{}].concat(e.map((e=>e[this.field]))).forEach(((e,r,n)=>{t[this.field]={...e,...t[this.field]}})),t}}}t.MediatorCombineUnion=i},21413:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(12396),t)},37966:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediatorJoinCoefficientsFixed=void 0;const n=r(78470),i=r(21049);class o extends i.Mediator{constructor(e){super(e)}async mediateWith(e,t){const r=[],o=t.map((({reply:e})=>e)).map((e=>e.catch((e=>{r.push(e)})))),a=await Promise.all(o);let s=a.map(((e,t)=>{if(e)return e.iterations*this.cpuWeight+e.persistedItems*this.memoryWeight+e.blockingItems*this.timeWeight+e.requestTime*this.ioWeight}));const u=Math.max(...s.filter((e=>void 0!==e))),c=e.context.get(n.KeysQueryOperation.limitIndicator);c&&(s=s.map(((e,t)=>void 0!==e&&a[t].persistedItems>0&&a[t].iterations>c?e+u:e)));let l=-1,p=Number.POSITIVE_INFINITY;for(const[e,t]of s.entries())void 0!==t&&(-1===l||t<p)&&(l=e,p=t);if(l<0)throw new Error(`All actors rejected their test in ${this.name}\n${r.map((e=>e.message)).join("\n")}`);const d=t[l].actor;return d.includeInLogs&&i.Actor.getContextLogger(e.context)?.debug(`Determined physical join operator '${d.logicalType}-${d.physicalName}'`,{entries:e.entries.length,variables:await Promise.all(e.entries.map((async e=>(await e.output.metadata()).variables.map((e=>e.value))))),costs:Object.fromEntries(s.map(((e,r)=>[`${t[r].actor.logicalType}-${t[r].actor.physicalName}`,e]))),coefficients:Object.fromEntries(a.map(((e,r)=>[`${t[r].actor.logicalType}-${t[r].actor.physicalName}`,e])))}),d}}t.MediatorJoinCoefficientsFixed=o},78557:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(37966),t)},29064:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediatorNumber=void 0;const n=r(21049);class i extends n.Mediator{constructor(e){super(e),this.indexPicker=this.createIndexPicker()}createIndexPicker(){switch(this.type){case"min":return e=>e.reduce(((e,t,r)=>{const n=this.getOrDefault(t[this.field],Number.POSITIVE_INFINITY);return null!==n&&(Number.isNaN(e[0])||e[0]>n)?[n,r]:e}),[Number.NaN,-1])[1];case"max":return e=>e.reduce(((e,t,r)=>{const n=this.getOrDefault(t[this.field],Number.NEGATIVE_INFINITY);return null!==n&&(Number.isNaN(e[0])||e[0]<n)?[n,r]:e}),[Number.NaN,-1])[1];default:throw new Error(`No valid "type" value was given, must be either 'min' or 'max', but got: ${this.type}`)}}getOrDefault(e,t){return void 0===e?t:e}async mediateWith(e,t){let r=t.map((({reply:e})=>e));const n=[];if(this.ignoreErrors){const e={};e[this.field]=null,r=r.map((t=>t.catch((t=>(n.push(t),e)))))}const i=await Promise.all(r),o=this.indexPicker(i);if(o<0)throw new Error(`All actors rejected their test in ${this.name}\n${n.map((e=>e.message)).join("\n")}`);return t[o].actor}}t.MediatorNumber=i},92201:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(29064),t)},19465:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediatorRace=void 0;const n=r(21049);class i extends n.Mediator{constructor(e){super(e)}mediateWith(e,t){return new Promise(((e,r)=>{const n=[];for(const i of t)i.reply.then((()=>{e(i.actor)})).catch((e=>{n.push(e),n.length===t.length&&r(new Error(`${this.name} mediated over all rejecting actors:\n${n.map((e=>e.message)).join("\n")}`))}))}))}}t.MediatorRace=i},7204:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(19465),t)},69923:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},80416:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},42461:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},61817:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},65622:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},4179:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},27188:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},21716:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},96946:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},13518:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},46537:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},27293:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0})},52120:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=void 0;class r{static getLevelOrdinal(e){return r.LEVELS[e]}}t.Logger=r,r.LEVELS={trace:0,debug:1,info:2,warn:3,error:4,fatal:5}},24331:function(e,t,r){"use strict";var n=this&&this.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var i=Object.getOwnPropertyDescriptor(t,r);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,i)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),i=this&&this.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(t,"__esModule",{value:!0}),i(r(69923),t),i(r(80416),t),i(r(42461),t),i(r(61817),t),i(r(65622),t),i(r(4179),t),i(r(27188),t),i(r(21716),t),i(r(96946),t),i(r(13518),t),i(r(46537),t),i(r(27293),t),i(r(52120),t)},95766:(e,t)=>{"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,o=u(e),a=o[0],s=o[1],c=new i(function(e,t,r){return 3*(t+r)/4-r}(0,a,s)),l=0,p=s>0?a-4:a;for(r=0;r<p;r+=4)t=n[e.charCodeAt(r)]<<18|n[e.charCodeAt(r+1)]<<12|n[e.charCodeAt(r+2)]<<6|n[e.charCodeAt(r+3)],c[l++]=t>>16&255,c[l++]=t>>8&255,c[l++]=255&t;return 2===s&&(t=n[e.charCodeAt(r)]<<2|n[e.charCodeAt(r+1)]>>4,c[l++]=255&t),1===s&&(t=n[e.charCodeAt(r)]<<10|n[e.charCodeAt(r+1)]<<4|n[e.charCodeAt(r+2)]>>2,c[l++]=t>>8&255,c[l++]=255&t),c},t.fromByteArray=function(e){for(var t,n=e.length,i=n%3,o=[],a=16383,s=0,u=n-i;s<u;s+=a)o.push(c(e,s,s+a>u?u:s+a));return 1===i?(t=e[n-1],o.push(r[t>>2]+r[t<<4&63]+"==")):2===i&&(t=(e[n-2]<<8)+e[n-1],o.push(r[t>>10]+r[t>>4&63]+r[t<<2&63]+"=")),o.join("")};for(var r=[],n=[],i="undefined"!=typeof Uint8Array?Uint8Array:Array,o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",a=0,s=o.length;a<s;++a)r[a]=o[a],n[o.charCodeAt(a)]=a;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,n){for(var i,o,a=[],s=t;s<n;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(r[(o=i)>>18&63]+r[o>>12&63]+r[o>>6&63]+r[63&o]);return a.join("")}n["-".charCodeAt(0)]=62,n["_".charCodeAt(0)]=63},6391:function(e,t,r){var n;!function(i){"use strict";var o,a=/^-?(?:\d+(?:\.\d*)?|\.\d+)(?:e[+-]?\d+)?$/i,s=Math.ceil,u=Math.floor,c="[BigNumber Error] ",l=c+"Number primitive has more than 15 significant digits: ",p=1e14,d=14,f=9007199254740991,h=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9,1e10,1e11,1e12,1e13],y=1e7,g=1e9;function m(e){var t=0|e;return e>0||e===t?t:t-1}function b(e){for(var t,r,n=1,i=e.length,o=e[0]+"";n<i;){for(t=e[n++]+"",r=d-t.length;r--;t="0"+t);o+=t}for(i=o.length;48===o.charCodeAt(--i););return o.slice(0,i+1||1)}function v(e,t){var r,n,i=e.c,o=t.c,a=e.s,s=t.s,u=e.e,c=t.e;if(!a||!s)return null;if(r=i&&!i[0],n=o&&!o[0],r||n)return r?n?0:-s:a;if(a!=s)return a;if(r=a<0,n=u==c,!i||!o)return n?0:!i^r?1:-1;if(!n)return u>c^r?1:-1;for(s=(u=i.length)<(c=o.length)?u:c,a=0;a<s;a++)if(i[a]!=o[a])return i[a]>o[a]^r?1:-1;return u==c?0:u>c^r?1:-1}function _(e,t,r,n){if(e<t||e>r||e!==u(e))throw Error(c+(n||"Argument")+("number"==typeof e?e<t||e>r?" out of range: ":" not an integer: ":" not a primitive number: ")+String(e))}function w(e){var t=e.c.length-1;return m(e.e/d)==t&&e.c[t]%2!=0}function T(e,t){return(e.length>1?e.charAt(0)+"."+e.slice(1):e)+(t<0?"e":"e+")+t}function O(e,t,r){var n,i;if(t<0){for(i=r+".";++t;i+=r);e=i+e}else if(++t>(n=e.length)){for(i=r,t-=n;--t;i+=r);e+=i}else t<n&&(e=e.slice(0,t)+"."+e.slice(t));return e}o=function e(t){var r,n,i,o,S,E,A,x,R,I,N=Q.prototype={constructor:Q,toString:null,valueOf:null},P=new Q(1),j=20,D=4,L=-7,C=21,F=-1e7,M=1e7,k=!1,B=1,U=0,q={prefix:"",groupSize:3,secondaryGroupSize:0,groupSeparator:",",decimalSeparator:".",fractionGroupSize:0,fractionGroupSeparator:" ",suffix:""},V="0123456789abcdefghijklmnopqrstuvwxyz",G=!0;function Q(e,t){var r,o,s,c,p,h,y,g,m=this;if(!(m instanceof Q))return new Q(e,t);if(null==t){if(e&&!0===e._isBigNumber)return m.s=e.s,void(!e.c||e.e>M?m.c=m.e=null:e.e<F?m.c=[m.e=0]:(m.e=e.e,m.c=e.c.slice()));if((h="number"==typeof e)&&0*e==0){if(m.s=1/e<0?(e=-e,-1):1,e===~~e){for(c=0,p=e;p>=10;p/=10,c++);return void(c>M?m.c=m.e=null:(m.e=c,m.c=[e]))}g=String(e)}else{if(!a.test(g=String(e)))return i(m,g,h);m.s=45==g.charCodeAt(0)?(g=g.slice(1),-1):1}(c=g.indexOf("."))>-1&&(g=g.replace(".","")),(p=g.search(/e/i))>0?(c<0&&(c=p),c+=+g.slice(p+1),g=g.substring(0,p)):c<0&&(c=g.length)}else{if(_(t,2,V.length,"Base"),10==t&&G)return K(m=new Q(e),j+m.e+1,D);if(g=String(e),h="number"==typeof e){if(0*e!=0)return i(m,g,h,t);if(m.s=1/e<0?(g=g.slice(1),-1):1,Q.DEBUG&&g.replace(/^0\.0*|\./,"").length>15)throw Error(l+e)}else m.s=45===g.charCodeAt(0)?(g=g.slice(1),-1):1;for(r=V.slice(0,t),c=p=0,y=g.length;p<y;p++)if(r.in